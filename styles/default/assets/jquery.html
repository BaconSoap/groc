<!DOCTYPE html><html lang="en"><head><title>styles/default/assets/jquery</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="lidoc-relative-root" content="../../../"><link rel="stylesheet" type="text/css" media="all" href="../../../assets/style.css"><script type="text/javascript" src="../../../assets/behavior.js"></script><body><div class="segment"><div class="code"><div class="wrapper"><span class="err">/*!</span>
 <span class="o">*</span> <span class="nx">jQuery</span> <span class="nx">JavaScript</span> <span class="nx">Library</span> <span class="nx">v1</span><span class="p">.</span><span class="mf">7.1</span>
 <span class="o">*</span> <span class="nx">http</span><span class="o">:</span><span class="err">//jquery.com/</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nx">Copyright</span> <span class="mi">2011</span><span class="p">,</span> <span class="nx">John</span> <span class="nx">Resig</span>
 <span class="o">*</span> <span class="nx">Dual</span> <span class="nx">licensed</span> <span class="nx">under</span> <span class="nx">the</span> <span class="nx">MIT</span> <span class="o">or</span> <span class="nx">GPL</span> <span class="nx">Version</span> <span class="mi">2</span> <span class="nx">licenses</span><span class="p">.</span>
 <span class="o">*</span> <span class="nx">http</span><span class="o">:</span><span class="err">//jquery.org/license</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nx">Includes</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">js</span>
 <span class="o">*</span> <span class="nx">http</span><span class="o">:</span><span class="err">//sizzlejs.com/</span>
 <span class="o">*</span> <span class="nx">Copyright</span> <span class="mi">2011</span><span class="p">,</span> <span class="nx">The</span> <span class="nx">Dojo</span> <span class="nx">Foundation</span>
 <span class="o">*</span> <span class="nx">Released</span> <span class="nx">under</span> <span class="nx">the</span> <span class="nx">MIT</span><span class="p">,</span> <span class="nx">BSD</span><span class="p">,</span> <span class="o">and</span> <span class="nx">GPL</span> <span class="nx">Licenses</span><span class="p">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nb">Date</span><span class="o">:</span> <span class="nx">Mon</span> <span class="nx">Nov</span> <span class="mi">21</span> <span class="mi">21</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span><span class="mi">03</span> <span class="mi">2011</span> <span class="o">-</span><span class="mi">0500</span>
 <span class="o">*</span><span class="err">/</span>
<span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="err">// Use the correct document accordingly with window argument (sandbox)</span>
<span class="nx">var</span> <span class="nb">document</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">,</span>
  <span class="nv">navigator = </span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">,</span>
  <span class="nv">location = </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span>
<span class="nx">var</span> <span class="nv">jQuery = </span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>

<span class="err">// Define a local copy of jQuery</span>
<span class="nx">var</span> <span class="nv">jQuery = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// The jQuery object is actually just the init constructor &#39;enhanced&#39;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">rootjQuery</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Map over jQuery in case of overwrite</span>
  <span class="nv">_jQuery = </span><span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">,</span>

  <span class="err">// Map over the $ in case of overwrite</span>
  <span class="nx">_</span><span class="nv">$ = </span><span class="nb">window</span><span class="p">.</span><span class="nx">$</span><span class="p">,</span>

  <span class="err">// A central reference to the root jQuery(document)</span>
  <span class="nx">rootjQuery</span><span class="p">,</span>

  <span class="err">// A simple way to check for HTML strings or ID strings</span>
  <span class="o">/</span><span class="err">/ Prioritize #id over &lt;tag&gt; to avoid XSS via location.hash (#9521)</span>
  <span class="nv">quickExpr = </span><span class="sr">/^(?:[^#&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/</span><span class="p">,</span>

  <span class="err">// Check if a string has a non-whitespace character in it</span>
  <span class="nv">rnotwhite = </span><span class="sr">/\S/</span><span class="p">,</span>

  <span class="err">// Used for trimming whitespace</span>
  <span class="nv">trimLeft = </span><span class="sr">/^\s+/</span><span class="p">,</span>
  <span class="nv">trimRight = </span><span class="sr">/\s+$/</span><span class="p">,</span>

  <span class="err">// Match a standalone tag</span>
  <span class="nv">rsingleTag = </span><span class="sr">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;)?$/</span><span class="p">,</span>

  <span class="err">// JSON RegExp</span>
  <span class="nv">rvalidchars = </span><span class="sr">/^[\],:{}\s]*$/</span><span class="p">,</span>
  <span class="nv">rvalidescape = </span><span class="sr">/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g</span><span class="p">,</span>
  <span class="nv">rvalidtokens = </span><span class="sr">/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g</span><span class="p">,</span>
  <span class="nv">rvalidbraces = </span><span class="sr">/(?:^|:|,)(?:\s*\[)+/g</span><span class="p">,</span>

  <span class="err">// Useragent RegExp</span>
  <span class="nv">rwebkit = </span><span class="sr">/(webkit)[ \/]([\w.]+)/</span><span class="p">,</span>
  <span class="nv">ropera = </span><span class="sr">/(opera)(?:.*version)?[ \/]([\w.]+)/</span><span class="p">,</span>
  <span class="nv">rmsie = </span><span class="sr">/(msie) ([\w.]+)/</span><span class="p">,</span>
  <span class="nv">rmozilla = </span><span class="sr">/(mozilla)(?:.*? rv:([\w.]+))?/</span><span class="p">,</span>

  <span class="err">// Matches dashed string for camelizing</span>
  <span class="nv">rdashAlpha = </span><span class="sr">/-([a-z]|[0-9])/ig</span><span class="p">,</span>
  <span class="nv">rmsPrefix = </span><span class="sr">/^-ms-/</span><span class="p">,</span>

  <span class="err">// Used by jQuery.camelCase as callback to replace()</span>
  <span class="nv">fcamelCase = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">letter</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span> <span class="nx">letter</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="err">// Keep a UserAgent string for use with jQuery.browser</span>
  <span class="nv">userAgent = </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">,</span>

  <span class="err">// For matching the engine and version of the browser</span>
  <span class="nx">browserMatch</span><span class="p">,</span>

  <span class="err">// The deferred used on DOM ready</span>
  <span class="nx">readyList</span><span class="p">,</span>

  <span class="err">// The ready event handler</span>
  <span class="nx">DOMContentLoaded</span><span class="p">,</span>

  <span class="err">// Save a reference to some core methods</span>
  <span class="nv">toString = </span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span>
  <span class="nv">hasOwn = </span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">,</span>
  <span class="nv">push = </span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">,</span>
  <span class="nv">slice = </span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span>
  <span class="nv">trim = </span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">,</span>
  <span class="nv">indexOf = </span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">,</span>

  <span class="err">// [[Class]] -&gt; type pairs</span>
  <span class="nv">class2type = </span><span class="p">{};</span>

<span class="nv">jQuery.fn = jQuery.prototype = </span><span class="p">{</span>
  <span class="nv">constructor: </span><span class="nx">jQuery</span><span class="p">,</span>
  <span class="nv">init: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">rootjQuery</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">doc</span><span class="p">;</span>

    <span class="err">// Handle $(&quot;&quot;), $(null), or $(undefined)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Handle $(DOMElement)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">context = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">length = </span><span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ The body element only exists once, optimize finding it</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;body&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">context = </span><span class="nb">document</span><span class="p">;</span>
      <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">selector = </span><span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">length = </span><span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Handle HTML strings</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Are we dealing with HTML string or an ID?</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Assume that strings that start and end with &lt;&gt; are HTML and skip the regex check</span>
        <span class="nv">match = </span><span class="p">[</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">null</span> <span class="p">];</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">match = </span><span class="nx">quickExpr</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Verify a match, and that no context was specified for #id</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="o">!</span><span class="nx">context</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// HANDLE: $(html) -&gt; $(array)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">context = </span><span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">?</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">context</span><span class="p">;</span>
          <span class="nv">doc = </span><span class="p">(</span> <span class="nx">context</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nv">context : </span><span class="nb">document</span> <span class="p">);</span>

          <span class="err">// If a single string is passed in and it&#39;s a single tag</span>
          <span class="o">/</span><span class="err">/ just do a createElement and skip the rest</span>
          <span class="nv">ret = </span><span class="nx">rsingleTag</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">selector = </span><span class="p">[</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">];</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">attr</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nv">selector = </span><span class="p">[</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">];</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">ret = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="p">[</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">doc</span> <span class="p">]</span> <span class="p">);</span>
            <span class="nv">selector = </span><span class="p">(</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">cacheable</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">fragment</span><span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">fragment</span> <span class="p">).</span><span class="nx">childNodes</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>

        <span class="err">// HANDLE: $(&quot;#id&quot;)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">elem = </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">);</span>

          <span class="err">// Check parentNode to catch when Blackberry 4.6 returns</span>
          <span class="o">/</span><span class="err">/ nodes that are no longer in the document #6963</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
            <span class="err">// Handle the case where IE and Opera return items</span>
            <span class="o">/</span><span class="err">/ by name instead of ID</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
            <span class="p">}</span>

            <span class="o">/</span><span class="err">/ Otherwise, we inject the element directly into the jQuery object</span>
            <span class="k">this</span><span class="p">.</span><span class="nv">length = </span><span class="mi">1</span><span class="p">;</span>
            <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">this</span><span class="p">.</span><span class="nv">context = </span><span class="nb">document</span><span class="p">;</span>
          <span class="k">this</span><span class="p">.</span><span class="nv">selector = </span><span class="nx">selector</span><span class="p">;</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="o">/</span><span class="err">/ HANDLE: $(expr, $(...))</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">context</span><span class="p">.</span><span class="nx">jquery</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">||</span> <span class="nx">rootjQuery</span> <span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>

      <span class="err">// HANDLE: $(expr, context)</span>
      <span class="o">/</span><span class="err">/ (which is just equivalent to: $(context).find(expr)</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span> <span class="nx">context</span> <span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="o">/</span><span class="err">/ HANDLE: $(function)</span>
    <span class="o">/</span><span class="err">/ Shortcut for document ready</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">selector</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">selector = </span><span class="nx">selector</span><span class="p">.</span><span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">context = </span><span class="nx">selector</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Start with an empty selector</span>
  <span class="nv">selector: </span><span class="s2">&quot;&quot;</span><span class="p">,</span>

  <span class="err">// The current version of jQuery being used</span>
  <span class="nv">jquery: </span><span class="s2">&quot;1.7.1&quot;</span><span class="p">,</span>

  <span class="err">// The default length of a jQuery object is 0</span>
  <span class="nv">length: </span><span class="mi">0</span><span class="p">,</span>

  <span class="err">// The number of elements contained in the matched element set</span>
  <span class="nv">size: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">toArray: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Get the Nth element in the matched element set OR</span>
  <span class="o">/</span><span class="err">/ Get the whole matched element set as a clean array</span>
  <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">num</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>

      <span class="err">// Return a &#39;clean&#39; array</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span> <span class="o">:</span>

      <span class="err">// Return just the object</span>
      <span class="p">(</span> <span class="nx">num</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">num</span> <span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">[</span> <span class="nx">num</span> <span class="p">]</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Take an array of elements and push it onto the stack</span>
  <span class="o">/</span><span class="err">/ (returning the new matched element set)</span>
  <span class="nv">pushStack: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Build a new jQuery matched element set</span>
    <span class="nx">var</span> <span class="nv">ret = </span><span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elems</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elems</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Add the old object onto the stack (as a reference)</span>
    <span class="nv">ret.prevObject = </span><span class="k">this</span><span class="p">;</span>

    <span class="nv">ret.context = </span><span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;find&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret.selector = </span><span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">+</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">selector</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret.selector = </span><span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Return the newly-formed element set</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Execute a callback for every element in the matched set.</span>
  <span class="o">/</span><span class="err">/ (You can seed the arguments with an array of args, but this is</span>
  <span class="o">/</span><span class="err">/ only used internally.)</span>
  <span class="nv">each: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">ready: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Attach the listeners</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">bindReady</span><span class="p">();</span>

    <span class="err">// Add the callback</span>
    <span class="nx">readyList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">eq: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">i = </span><span class="o">+</span><span class="nx">i</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">first: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">last: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">slice: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">),</span>
      <span class="s2">&quot;slice&quot;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">map: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}));</span>
  <span class="p">},</span>

  <span class="nv">end: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// For internal use only.</span>
  <span class="o">/</span><span class="err">/ Behaves like an Array&#39;s method, not like a jQuery method.</span>
  <span class="nv">push: </span><span class="nx">push</span><span class="p">,</span>
  <span class="nv">sort: </span><span class="p">[].</span><span class="nx">sort</span><span class="p">,</span>
  <span class="nv">splice: </span><span class="p">[].</span><span class="nx">splice</span>
<span class="p">};</span>

<span class="err">// Give the init function the jQuery prototype for later instantiation</span>
<span class="nv">jQuery.fn.init.prototype = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">;</span>

<span class="nv">jQuery.extend = jQuery.fn.extend = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">copy</span><span class="p">,</span> <span class="nx">copyIsArray</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span>
    <span class="nv">target = </span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="p">{},</span>
    <span class="nv">i = </span><span class="mi">1</span><span class="p">,</span>
    <span class="nv">length = </span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nv">deep = </span><span class="kc">false</span><span class="p">;</span>

  <span class="err">// Handle a deep copy situation</span>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">target</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">deep = </span><span class="nx">target</span><span class="p">;</span>
    <span class="nv">target = </span><span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="err">// skip the boolean and the target</span>
    <span class="nv">i = </span><span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Handle case when target is a string or something (possible in deep copy)</span>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">target</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">target = </span><span class="p">{};</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ extend jQuery itself if only one argument is passed</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">===</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">target = </span><span class="k">this</span><span class="p">;</span>
    <span class="o">--</span><span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Only deal with non-null/undefined values</span>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nv">options = </span><span class="nx">arguments</span><span class="p">[</span> <span class="nx">i</span> <span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Extend the base object</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">src = </span><span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
        <span class="nv">copy = </span><span class="nx">options</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

        <span class="err">// Prevent never-ending loop</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">target</span> <span class="o">===</span> <span class="nx">copy</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ Recurse if we&#39;re merging plain objects or arrays</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">&amp;&amp;</span> <span class="nx">copy</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">copy</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nv">copyIsArray = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">copy</span><span class="p">))</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">copyIsArray</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">copyIsArray = </span><span class="kc">false</span><span class="p">;</span>
            <span class="nv">clone = </span><span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="o">?</span> <span class="nv">src : </span><span class="p">[];</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">clone = </span><span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="o">?</span> <span class="nv">src : </span><span class="p">{};</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Never move original objects, clone them</span>
          <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">deep</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span> <span class="nx">copy</span> <span class="p">);</span>

        <span class="err">// Don&#39;t bring in undefined values</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">copy</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">copy</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Return the modified object</span>
  <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">noConflict: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">deep</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">===</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nv">$ = </span><span class="nx">_$</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">===</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nv">jQuery = </span><span class="nx">_jQuery</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Is the DOM ready to be used? Set to true once it occurs.</span>
  <span class="nv">isReady: </span><span class="kc">false</span><span class="p">,</span>

  <span class="err">// A counter to track how many items to wait for before</span>
  <span class="o">/</span><span class="err">/ the ready event fires. See #6781</span>
  <span class="nv">readyWait: </span><span class="mi">1</span><span class="p">,</span>

  <span class="err">// Hold (or release) the ready event</span>
  <span class="nv">holdReady: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">hold</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hold</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// Handle when the DOM is ready</span>
  <span class="nv">ready: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">wait</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Either a released hold or an DOMready/load event and not yet ready</span>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">wait</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">!--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">wait</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Remember that the DOM is ready</span>
      <span class="nv">jQuery.isReady = </span><span class="kc">true</span><span class="p">;</span>

      <span class="err">// If a normal DOM Ready event fired, decrement, and wait if need be</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">wait</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ If there are functions bound, to execute</span>
      <span class="nx">readyList</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">(</span> <span class="nb">document</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jQuery</span> <span class="p">]</span> <span class="p">);</span>

      <span class="err">// Trigger any bound ready events</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">trigger</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ready&quot;</span> <span class="p">).</span><span class="kc">off</span><span class="p">(</span> <span class="s2">&quot;ready&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">bindReady: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">readyList</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">readyList = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span> <span class="s2">&quot;once memory&quot;</span> <span class="p">);</span>

    <span class="err">// Catch cases where $(document).ready() is called after the</span>
    <span class="o">/</span><span class="err">/ browser event has already occurred.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Handle it asynchronously to allow scripts the opportunity to delay ready</span>
      <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Mozilla, Opera and webkit nightlies currently support this event</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Use the handy event callback</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

      <span class="err">// A fallback to window.onload, that will always work</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

    <span class="err">// If IE event model is used</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// ensure firing before onload,</span>
      <span class="o">/</span><span class="err">/ maybe late but safe also for iframes</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onreadystatechange&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span> <span class="p">);</span>

      <span class="err">// A fallback to window.onload, that will always work</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onload&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span> <span class="p">);</span>

      <span class="err">// If IE and not a frame</span>
      <span class="o">/</span><span class="err">/ continually check to see if the document is ready</span>
      <span class="nx">var</span> <span class="nv">toplevel = </span><span class="kc">false</span><span class="p">;</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nv">toplevel = </span><span class="nb">window</span><span class="p">.</span><span class="nx">frameElement</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">doScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">toplevel</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">doScrollCheck</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// See test/unit/core.js for details concerning isFunction.</span>
  <span class="o">/</span><span class="err">/ Since version 1.3, DOM methods and functions like alert</span>
  <span class="o">/</span><span class="err">/ aren&#39;t supported. They return false on IE (#2968).</span>
  <span class="nv">isFunction: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">isArray: </span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">||</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;array&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// A crude way of determining if an object is a window</span>
  <span class="nv">isWindow: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;setInterval&quot;</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">isNumeric: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isFinite</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">type: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
      <span class="nb">String</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">class2type</span><span class="p">[</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;object&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">isPlainObject: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Must be an Object.</span>
    <span class="o">/</span><span class="err">/ Because of IE, we also have to check the presence of the constructor property.</span>
    <span class="o">/</span><span class="err">/ Make sure that DOM nodes and window objects don&#39;t pass through, as well</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">obj</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="err">// Not own constructor property must be Object</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s2">&quot;constructor&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;isPrototypeOf&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// IE8,9 Will throw exceptions on certain host objects #9897</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Own properties are enumerated firstly, so to speed up,</span>
    <span class="o">/</span><span class="err">/ if last one is own, then all properties are own.</span>

    <span class="nx">var</span> <span class="nx">key</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{}</span>

    <span class="k">return</span> <span class="nx">key</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">isEmptyObject: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">error: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">parseJSON: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Make sure leading/trailing whitespace is removed (IE can&#39;t handle it)</span>
    <span class="nv">data = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>

    <span class="err">// Attempt to parse using the native JSON parser first</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Make sure the incoming data is actual JSON</span>
    <span class="o">/</span><span class="sr">/ Logic borrowed from http:/</span><span class="o">/</span><span class="nx">json</span><span class="p">.</span><span class="nx">org</span><span class="err">/json2.js</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rvalidchars</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidescape</span><span class="p">,</span> <span class="s2">&quot;@&quot;</span> <span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidtokens</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span> <span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidbraces</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">return</span> <span class="p">(</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span> <span class="s2">&quot;return &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)();</span>

    <span class="p">}</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;Invalid JSON: &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Cross-browser xml parsing</span>
  <span class="nv">parseXML: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">DOMParser</span> <span class="p">)</span> <span class="p">{</span> <span class="err">// Standard</span>
        <span class="nv">tmp = </span><span class="k">new</span> <span class="nx">DOMParser</span><span class="p">();</span>
        <span class="nv">xml = </span><span class="nx">tmp</span><span class="p">.</span><span class="nx">parseFromString</span><span class="p">(</span> <span class="nx">data</span> <span class="p">,</span> <span class="s2">&quot;text/xml&quot;</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="err">// IE</span>
        <span class="nv">xml = </span><span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span> <span class="s2">&quot;Microsoft.XMLDOM&quot;</span> <span class="p">);</span>
        <span class="nv">xml.async = </span><span class="s2">&quot;false&quot;</span><span class="p">;</span>
        <span class="nx">xml</span><span class="p">.</span><span class="nx">loadXML</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">xml = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">xml</span> <span class="o">||</span> <span class="o">!</span><span class="nx">xml</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">||</span> <span class="nx">xml</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;parsererror&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;Invalid XML: &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">xml</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">noop: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{},</span>

  <span class="err">// Evaluates a script in a global context</span>
  <span class="o">/</span><span class="err">/ Workarounds based on findings by Jim Driscoll</span>
  <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">weblogs</span><span class="p">.</span><span class="nx">java</span><span class="p">.</span><span class="nx">net</span><span class="err">/blog/driscoll/archive/2009/09/08/eval-javascript-global-context</span>
  <span class="nv">globalEval: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">rnotwhite</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// We use execScript on Internet Explorer</span>
      <span class="o">/</span><span class="err">/ We use an anonymous function so that context is window</span>
      <span class="o">/</span><span class="err">/ rather than jQuery in Firefox</span>
      <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">execScript</span> <span class="o">||</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">[</span> <span class="s2">&quot;eval&quot;</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span> <span class="p">)(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// Convert dashed to camelCase; used by the css and data modules</span>
  <span class="o">/</span><span class="err">/ Microsoft forgot to hump their vendor prefix (#9572)</span>
  <span class="nv">camelCase: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">string</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rmsPrefix</span><span class="p">,</span> <span class="s2">&quot;ms-&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rdashAlpha</span><span class="p">,</span> <span class="nx">fcamelCase</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">nodeName: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="err">// args is for internal usage only</span>
  <span class="nv">each: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">name</span><span class="p">,</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">length = </span><span class="nx">object</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nv">isObj = </span><span class="nx">length</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">object</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">args</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">],</span> <span class="nx">args</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="o">/</span><span class="err">/ A special, fast, case for the most common use of each</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Use native String.trim function wherever possible</span>
  <span class="nv">trim: </span><span class="nx">trim</span> <span class="o">?</span>
    <span class="nx">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">trim</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">text</span> <span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span>

    <span class="err">// Otherwise use our own trimming functionality</span>
    <span class="nx">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">text</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">trimLeft</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">trimRight</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">},</span>

  <span class="err">// results is for internal usage only</span>
  <span class="nv">makeArray: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">array</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// The window, strings (and functions) also have &#39;length&#39;</span>
      <span class="o">/</span><span class="err">/ Tweaked logic slightly to handle Blackberry 4.7 RegExp issues #6930</span>
      <span class="nx">var</span> <span class="nv">type = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">array</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;regexp&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">push</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">inArray: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">len</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">indexOf</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">indexOf</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nv">len = </span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nv">i = </span><span class="nx">i</span> <span class="o">?</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">+</span> <span class="nx">i</span> <span class="p">)</span> <span class="o">:</span> <span class="nv">i : </span><span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Skip accessing in sparse arrays</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">array</span> <span class="o">&amp;&amp;</span> <span class="nx">array</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">merge: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">second</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">i = </span><span class="nx">first</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nv">j = </span><span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">second</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">l = </span><span class="nx">second</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">second</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">second</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">second</span><span class="p">[</span> <span class="nx">j</span><span class="o">++</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nv">first.length = </span><span class="nx">i</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">first</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">grep: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">inv</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">ret = </span><span class="p">[],</span> <span class="nx">retVal</span><span class="p">;</span>
    <span class="nv">inv = </span><span class="o">!!</span><span class="nx">inv</span><span class="p">;</span>

    <span class="err">// Go through the array, only saving the items</span>
    <span class="o">/</span><span class="err">/ that pass the validator function</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">length = </span><span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">retVal = </span><span class="o">!!</span><span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">inv</span> <span class="o">!==</span> <span class="nx">retVal</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// arg is for internal usage only</span>
  <span class="nv">map: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nv">ret = </span><span class="p">[],</span>
      <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">length = </span><span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="err">// jquery objects are treated as arrays</span>
      <span class="nv">isArray = </span><span class="nx">elems</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">||</span> <span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">elems</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">length</span> <span class="o">-</span><span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">)</span> <span class="p">;</span>

    <span class="err">// Go through the array, translating each of the items to their</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isArray</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">value = </span><span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">[</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Go through every key on the object,</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">value = </span><span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">key</span> <span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">[</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Flatten any nested arrays</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">ret</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// A global GUID counter for objects</span>
  <span class="nv">guid: </span><span class="mi">1</span><span class="p">,</span>

  <span class="err">// Bind a function to a context, optionally partially applying any</span>
  <span class="o">/</span><span class="err">/ arguments.</span>
  <span class="nv">proxy: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">tmp = </span><span class="nx">fn</span><span class="p">[</span> <span class="nx">context</span> <span class="p">];</span>
      <span class="nv">context = </span><span class="nx">fn</span><span class="p">;</span>
      <span class="nv">fn = </span><span class="nx">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Quick check to determine if target is callable, in the spec</span>
    <span class="o">/</span><span class="err">/ this throws a TypeError, but we will just return undefined.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Simulated bind</span>
    <span class="nx">var</span> <span class="nv">args = </span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span> <span class="p">),</span>
      <span class="nv">proxy = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">};</span>

    <span class="err">// Set the guid of unique handler to the same of original handler, so it can be removed</span>
    <span class="nv">proxy.guid = fn.guid = </span><span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">proxy</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">proxy</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Mutifunctional method to get and set values to a collection</span>
  <span class="o">/</span><span class="err">/ The value/s can optionally be executed if it&#39;s a function</span>
  <span class="nv">access: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">exec</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">length = </span><span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="err">// Setting many attributes</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">key</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">exec</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">elems</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Setting one attribute</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Optionally, function values get executed if exec is true</span>
      <span class="nv">exec = </span><span class="o">!</span><span class="nx">pass</span> <span class="o">&amp;&amp;</span> <span class="nx">exec</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">exec</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">pass</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">elems</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Getting an attribute</span>
    <span class="k">return</span> <span class="nx">length</span> <span class="o">?</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">now: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span> <span class="p">).</span><span class="nx">getTime</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="err">// Use of jQuery.browser is frowned upon.</span>
  <span class="o">/</span><span class="sr">/ More details: http:/</span><span class="o">/</span><span class="nx">docs</span><span class="p">.</span><span class="nx">jquery</span><span class="p">.</span><span class="nx">com</span><span class="err">/Utilities/jQuery.browser</span>
  <span class="nv">uaMatch: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">ua = </span><span class="nx">ua</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="nx">var</span> <span class="nv">match = </span><span class="nx">rwebkit</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="nx">ropera</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="nx">rmsie</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="nx">ua</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;compatible&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">rmozilla</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="p">[];</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nv">browser: </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nv">version: </span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;0&quot;</span> <span class="p">};</span>
  <span class="p">},</span>

  <span class="nv">sub: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">function</span> <span class="nx">jQuerySub</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuerySub</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="nv">jQuerySub.superclass = </span><span class="k">this</span><span class="p">;</span>
    <span class="nv">jQuerySub.fn = jQuerySub.prototype = </span><span class="k">this</span><span class="p">();</span>
    <span class="nv">jQuerySub.fn.constructor = </span><span class="nx">jQuerySub</span><span class="p">;</span>
    <span class="nv">jQuerySub.sub = </span><span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="p">;</span>
    <span class="nv">jQuerySub.fn.init = </span><span class="nx">function</span> <span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuerySub</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">context = </span><span class="nx">jQuerySub</span><span class="p">(</span> <span class="nx">context</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">rootjQuerySub</span> <span class="p">);</span>
    <span class="p">};</span>
    <span class="nv">jQuerySub.fn.init.prototype = </span><span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">;</span>
    <span class="nx">var</span> <span class="nv">rootjQuerySub = </span><span class="nx">jQuerySub</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">jQuerySub</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">browser: </span><span class="p">{}</span>
<span class="p">});</span>

<span class="err">// Populate the class2type map</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;Boolean Number String Function Array Date RegExp Object&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">class2type</span><span class="p">[</span> <span class="s2">&quot;[object &quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">});</span>

<span class="nv">browserMatch = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">uaMatch</span><span class="p">(</span> <span class="nx">userAgent</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">browserMatch</span><span class="p">.</span><span class="nx">browser</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">browser</span><span class="p">[</span> <span class="nx">browserMatch</span><span class="p">.</span><span class="nx">browser</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nv">jQuery.browser.version = </span><span class="nx">browserMatch</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Deprecated, use jQuery.browser.webkit instead</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">webkit</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.browser.safari = </span><span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ IE doesn&#39;t match non-breaking spaces with \s</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">rnotwhite</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">&quot;\xA0&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">trimLeft = </span><span class="sr">/^[\s\xA0]+/</span><span class="p">;</span>
  <span class="nv">trimRight = </span><span class="sr">/[\s\xA0]+$/</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ All jQuery objects should point back to these</span>
<span class="nv">rootjQuery = </span><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>

<span class="err">// Cleanup functions for the document ready method</span>
<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">DOMContentLoaded = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">DOMContentLoaded = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;onreadystatechange&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span> <span class="p">);</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ The DOM ready check for Internet Explorer</span>
<span class="nx">function</span> <span class="nx">doScrollCheck</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="err">// If IE is used, use the trick by Diego Perini</span>
    <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">javascript</span><span class="p">.</span><span class="nx">nwbox</span><span class="p">.</span><span class="nx">com</span><span class="sr">/IEContentLoaded/</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">doScroll</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">doScrollCheck</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ and execute any waiting functions</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>

<span class="p">})();</span>


<span class="err">// String to Object flags format cache</span>
<span class="nx">var</span> <span class="nv">flagsCache = </span><span class="p">{};</span>

<span class="err">// Convert String-formatted flags into Object-formatted ones and store in cache</span>
<span class="nx">function</span> <span class="nx">createFlags</span><span class="p">(</span> <span class="nx">flags</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">object = </span><span class="nx">flagsCache</span><span class="p">[</span> <span class="nx">flags</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">i</span><span class="p">,</span> <span class="nx">length</span><span class="p">;</span>
  <span class="nv">flags = </span><span class="nx">flags</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="sr">/\s+/</span> <span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">length = </span><span class="nx">flags</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">object</span><span class="p">[</span> <span class="nx">flags</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/*</span>
 <span class="o">*</span> <span class="nx">Create</span> <span class="nx">a</span> <span class="nx">callback</span> <span class="nx">list</span> <span class="nx">using</span> <span class="nx">the</span> <span class="nx">following</span> <span class="nv">parameters:</span>
 <span class="o">*</span>
 <span class="o">*</span>  <span class="nv">flags: </span> <span class="nx">an</span> <span class="nx">optional</span> <span class="nx">list</span> <span class="k">of</span> <span class="nx">space</span><span class="o">-</span><span class="nx">separated</span> <span class="nx">flags</span> <span class="nx">that</span> <span class="nx">will</span> <span class="nx">change</span> <span class="nx">how</span>
 <span class="o">*</span>      <span class="nx">the</span> <span class="nx">callback</span> <span class="nx">list</span> <span class="nx">behaves</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nx">By</span> <span class="nx">default</span> <span class="nx">a</span> <span class="nx">callback</span> <span class="nx">list</span> <span class="nx">will</span> <span class="nx">act</span> <span class="nx">like</span> <span class="nx">an</span> <span class="nx">event</span> <span class="nx">callback</span> <span class="nx">list</span> <span class="o">and</span> <span class="nx">can</span> <span class="nx">be</span>
 <span class="o">*</span> <span class="s2">&quot;fired&quot;</span> <span class="nx">multiple</span> <span class="nx">times</span><span class="p">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nx">Possible</span> <span class="nv">flags:</span>
 <span class="o">*</span>
 <span class="o">*</span>  <span class="nv">once: </span>    <span class="nx">will</span> <span class="nx">ensure</span> <span class="nx">the</span> <span class="nx">callback</span> <span class="nx">list</span> <span class="nx">can</span> <span class="nx">only</span> <span class="nx">be</span> <span class="nx">fired</span> <span class="nx">once</span> <span class="p">(</span><span class="nx">like</span> <span class="nx">a</span> <span class="nx">Deferred</span><span class="p">)</span>
 <span class="o">*</span>
 <span class="o">*</span>  <span class="nv">memory: </span>    <span class="nx">will</span> <span class="nx">keep</span> <span class="nx">track</span> <span class="k">of</span> <span class="nx">previous</span> <span class="nx">values</span> <span class="o">and</span> <span class="nx">will</span> <span class="nx">call</span> <span class="nx">any</span> <span class="nx">callback</span> <span class="nx">added</span>
 <span class="o">*</span>          <span class="nx">after</span> <span class="nx">the</span> <span class="nx">list</span> <span class="nx">has</span> <span class="nx">been</span> <span class="nx">fired</span> <span class="nx">right</span> <span class="nx">away</span> <span class="nx">with</span> <span class="nx">the</span> <span class="nx">latest</span> <span class="s2">&quot;memorized&quot;</span>
 <span class="o">*</span>          <span class="nx">values</span> <span class="p">(</span><span class="nx">like</span> <span class="nx">a</span> <span class="nx">Deferred</span><span class="p">)</span>
 <span class="o">*</span>
 <span class="o">*</span>  <span class="nv">unique: </span>    <span class="nx">will</span> <span class="nx">ensure</span> <span class="nx">a</span> <span class="nx">callback</span> <span class="nx">can</span> <span class="nx">only</span> <span class="nx">be</span> <span class="nx">added</span> <span class="nx">once</span> <span class="p">(</span><span class="kc">no</span> <span class="nx">duplicate</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">list</span><span class="p">)</span>
 <span class="o">*</span>
 <span class="o">*</span>  <span class="nv">stopOnFalse: </span> <span class="nx">interrupt</span> <span class="nx">callings</span> <span class="k">when</span> <span class="nx">a</span> <span class="nx">callback</span> <span class="nx">returns</span> <span class="kc">false</span>
 <span class="o">*</span>
 <span class="o">*</span><span class="err">/</span>
<span class="nv">jQuery.Callbacks = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">flags</span> <span class="p">)</span> <span class="p">{</span>

  <span class="err">// Convert flags from String-formatted to Object-formatted</span>
  <span class="o">/</span><span class="err">/ (we check in cache first)</span>
  <span class="nv">flags = </span><span class="nx">flags</span> <span class="o">?</span> <span class="p">(</span> <span class="nx">flagsCache</span><span class="p">[</span> <span class="nx">flags</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">createFlags</span><span class="p">(</span> <span class="nx">flags</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span> <span class="p">{};</span>

  <span class="nx">var</span> <span class="err">// Actual callback list</span>
    <span class="nv">list = </span><span class="p">[],</span>
    <span class="err">// Stack of fire calls for repeatable lists</span>
    <span class="nv">stack = </span><span class="p">[],</span>
    <span class="err">// Last fire value (for non-forgettable lists)</span>
    <span class="nx">memory</span><span class="p">,</span>
    <span class="err">// Flag to know if list is currently firing</span>
    <span class="nx">firing</span><span class="p">,</span>
    <span class="err">// First callback to fire (used internally by add and fireWith)</span>
    <span class="nx">firingStart</span><span class="p">,</span>
    <span class="err">// End of the loop when firing</span>
    <span class="nx">firingLength</span><span class="p">,</span>
    <span class="err">// Index of currently firing callback (modified by remove if needed)</span>
    <span class="nx">firingIndex</span><span class="p">,</span>
    <span class="err">// Add one or several callbacks to the list</span>
    <span class="nv">add = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">i</span><span class="p">,</span>
        <span class="nx">length</span><span class="p">,</span>
        <span class="nx">elem</span><span class="p">,</span>
        <span class="nx">type</span><span class="p">,</span>
        <span class="nx">actual</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">length = </span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem = </span><span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
        <span class="nv">type = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;array&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Inspect recursively</span>
          <span class="nx">add</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Add if not in unique mode and callback is not in</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">flags</span><span class="p">.</span><span class="nx">unique</span> <span class="o">||</span> <span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">list</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="err">// Fire callbacks</span>
    <span class="nv">fire = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">args = </span><span class="nx">args</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nv">memory = </span><span class="o">!</span><span class="nx">flags</span><span class="p">.</span><span class="nx">memory</span> <span class="o">||</span> <span class="p">[</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">];</span>
      <span class="nv">firing = </span><span class="kc">true</span><span class="p">;</span>
      <span class="nv">firingIndex = </span><span class="nx">firingStart</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nv">firingStart = </span><span class="mi">0</span><span class="p">;</span>
      <span class="nv">firingLength = </span><span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">list</span> <span class="o">&amp;&amp;</span> <span class="nx">firingIndex</span> <span class="o">&lt;</span> <span class="nx">firingLength</span><span class="p">;</span> <span class="nx">firingIndex</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span><span class="p">[</span> <span class="nx">firingIndex</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">flags</span><span class="p">.</span><span class="nx">stopOnFalse</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">memory = </span><span class="kc">true</span><span class="p">;</span> <span class="err">// Mark as halted</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nv">firing = </span><span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">flags</span><span class="p">.</span><span class="nx">once</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">stack</span> <span class="o">&amp;&amp;</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">memory = </span><span class="nx">stack</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">(</span> <span class="nx">memory</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">memory</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">memory</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">list = </span><span class="p">[];</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="err">// Actual Callbacks object</span>
    <span class="nv">self = </span><span class="p">{</span>
      <span class="err">// Add a callback or a collection of callbacks to the list</span>
      <span class="nv">add: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nv">length = </span><span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="nx">add</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="err">// Do we need to add the callbacks to the</span>
          <span class="o">/</span><span class="err">/ current firing batch?</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">firingLength = </span><span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="err">// With memory, if we&#39;re not firing then</span>
          <span class="o">/</span><span class="err">/ we should call right away, unless previous</span>
          <span class="o">/</span><span class="err">/ firing was halted (stopOnFalse)</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">memory</span> <span class="o">&amp;&amp;</span> <span class="nx">memory</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">firingStart = </span><span class="nx">length</span><span class="p">;</span>
            <span class="nx">fire</span><span class="p">(</span> <span class="nx">memory</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">memory</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Remove a callback from the list</span>
      <span class="nv">remove: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nv">args = </span><span class="nx">arguments</span><span class="p">,</span>
            <span class="nv">argIndex = </span><span class="mi">0</span><span class="p">,</span>
            <span class="nv">argLength = </span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">argIndex</span> <span class="o">&lt;</span> <span class="nx">argLength</span> <span class="p">;</span> <span class="nx">argIndex</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">argIndex</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">list</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
                <span class="err">// Handle firingIndex and firingLength</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">firingLength</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">firingLength</span><span class="o">--</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">firingIndex</span> <span class="p">)</span> <span class="p">{</span>
                      <span class="nx">firingIndex</span><span class="o">--</span><span class="p">;</span>
                    <span class="p">}</span>
                  <span class="p">}</span>
                <span class="p">}</span>
                <span class="o">/</span><span class="err">/ Remove the element</span>
                <span class="nx">list</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
                <span class="err">// If we have some unicity property then</span>
                <span class="o">/</span><span class="err">/ we only need to do this once</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">flags</span><span class="p">.</span><span class="nx">unique</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Control if a given callback is in the list</span>
      <span class="nv">has: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
            <span class="nv">length = </span><span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="nx">list</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Remove all callbacks from the list</span>
      <span class="nv">empty: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">list = </span><span class="p">[];</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Have the list do nothing anymore</span>
      <span class="nv">disable: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">list = stack = memory = </span><span class="kc">undefined</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Is it disabled?</span>
      <span class="nv">disabled: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">list</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Lock the list in its current state</span>
      <span class="nv">lock: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">stack = </span><span class="kc">undefined</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">memory</span> <span class="o">||</span> <span class="nx">memory</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Is it locked?</span>
      <span class="nv">locked: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">stack</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Call all callbacks with the given context and arguments</span>
      <span class="nv">fireWith: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">flags</span><span class="p">.</span><span class="nx">once</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">stack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="p">[</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">flags</span><span class="p">.</span><span class="nx">once</span> <span class="o">&amp;&amp;</span> <span class="nx">memory</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">fire</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// Call all the callbacks with the given arguments</span>
      <span class="nv">fire: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="err">// To know if the callbacks have already been called at least once</span>
      <span class="nv">fired: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nx">memory</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>

  <span class="k">return</span> <span class="nx">self</span><span class="p">;</span>
<span class="p">};</span>




<span class="nx">var</span> <span class="err">// Static reference to slice</span>
  <span class="nv">sliceDeferred = </span><span class="p">[].</span><span class="nx">slice</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nv">Deferred: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">doneList = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span> <span class="s2">&quot;once memory&quot;</span> <span class="p">),</span>
      <span class="nv">failList = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span> <span class="s2">&quot;once memory&quot;</span> <span class="p">),</span>
      <span class="nv">progressList = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span> <span class="s2">&quot;memory&quot;</span> <span class="p">),</span>
      <span class="nv">state = </span><span class="s2">&quot;pending&quot;</span><span class="p">,</span>
      <span class="nv">lists = </span><span class="p">{</span>
        <span class="nv">resolve: </span><span class="nx">doneList</span><span class="p">,</span>
        <span class="nv">reject: </span><span class="nx">failList</span><span class="p">,</span>
        <span class="nv">notify: </span><span class="nx">progressList</span>
      <span class="p">},</span>
      <span class="nv">promise = </span><span class="p">{</span>
        <span class="nv">done: </span><span class="nx">doneList</span><span class="p">.</span><span class="nx">add</span><span class="p">,</span>
        <span class="nv">fail: </span><span class="nx">failList</span><span class="p">.</span><span class="nx">add</span><span class="p">,</span>
        <span class="nv">progress: </span><span class="nx">progressList</span><span class="p">.</span><span class="nx">add</span><span class="p">,</span>

        <span class="nv">state: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="err">// Deprecated</span>
        <span class="nv">isResolved: </span><span class="nx">doneList</span><span class="p">.</span><span class="nx">fired</span><span class="p">,</span>
        <span class="nv">isRejected: </span><span class="nx">failList</span><span class="p">.</span><span class="nx">fired</span><span class="p">,</span>

        <span class="k">then</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">doneCallbacks</span><span class="p">,</span> <span class="nx">failCallbacks</span><span class="p">,</span> <span class="nx">progressCallbacks</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">doneCallbacks</span> <span class="p">).</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">failCallbacks</span> <span class="p">).</span><span class="nx">progress</span><span class="p">(</span> <span class="nx">progressCallbacks</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nv">always: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">).</span><span class="nx">fail</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nv">pipe: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fnDone</span><span class="p">,</span> <span class="nx">fnFail</span><span class="p">,</span> <span class="nx">fnProgress</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">newDefer</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">{</span>
              <span class="nv">done: </span><span class="p">[</span> <span class="nx">fnDone</span><span class="p">,</span> <span class="s2">&quot;resolve&quot;</span> <span class="p">],</span>
              <span class="nv">fail: </span><span class="p">[</span> <span class="nx">fnFail</span><span class="p">,</span> <span class="s2">&quot;reject&quot;</span> <span class="p">],</span>
              <span class="nv">progress: </span><span class="p">[</span> <span class="nx">fnProgress</span><span class="p">,</span> <span class="s2">&quot;notify&quot;</span> <span class="p">]</span>
            <span class="p">},</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">var</span> <span class="nv">fn = </span><span class="nx">data</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span>
                <span class="nv">action = </span><span class="nx">data</span><span class="p">[</span> <span class="mi">1</span> <span class="p">],</span>
                <span class="nx">returned</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">deferred</span><span class="p">[</span> <span class="nx">handler</span> <span class="p">](</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nv">returned = </span><span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">returned</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">returned</span><span class="p">.</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">returned</span><span class="p">.</span><span class="nx">promise</span><span class="p">().</span><span class="k">then</span><span class="p">(</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">reject</span><span class="p">,</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">notify</span> <span class="p">);</span>
                  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">newDefer</span><span class="p">[</span> <span class="nx">action</span> <span class="o">+</span> <span class="s2">&quot;With&quot;</span> <span class="p">](</span> <span class="k">this</span> <span class="o">===</span> <span class="nx">deferred</span> <span class="o">?</span> <span class="nv">newDefer : </span><span class="k">this</span><span class="p">,</span> <span class="p">[</span> <span class="nx">returned</span> <span class="p">]</span> <span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">});</span>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">deferred</span><span class="p">[</span> <span class="nx">handler</span> <span class="p">](</span> <span class="nx">newDefer</span><span class="p">[</span> <span class="nx">action</span> <span class="p">]</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}).</span><span class="nx">promise</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="err">// Get a promise for this deferred</span>
        <span class="o">/</span><span class="err">/ If obj is provided, the promise aspect is added to the object</span>
        <span class="nv">promise: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">obj = </span><span class="nx">promise</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">promise</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">obj</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nv">deferred = </span><span class="nx">promise</span><span class="p">.</span><span class="nx">promise</span><span class="p">({}),</span>
      <span class="nx">key</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">lists</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">deferred</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">lists</span><span class="p">[</span> <span class="nx">key</span> <span class="p">].</span><span class="nx">fire</span><span class="p">;</span>
      <span class="nx">deferred</span><span class="p">[</span> <span class="nx">key</span> <span class="o">+</span> <span class="s2">&quot;With&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">lists</span><span class="p">[</span> <span class="nx">key</span> <span class="p">].</span><span class="nx">fireWith</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Handle state</span>
    <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nv">state = </span><span class="s2">&quot;resolved&quot;</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">failList</span><span class="p">.</span><span class="nx">disable</span><span class="p">,</span> <span class="nx">progressList</span><span class="p">.</span><span class="nx">lock</span> <span class="p">).</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nv">state = </span><span class="s2">&quot;rejected&quot;</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">doneList</span><span class="p">.</span><span class="nx">disable</span><span class="p">,</span> <span class="nx">progressList</span><span class="p">.</span><span class="nx">lock</span> <span class="p">);</span>

    <span class="err">// Call given func if any</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">func</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">deferred</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ All done!</span>
    <span class="k">return</span> <span class="nx">deferred</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Deferred helper</span>
  <span class="k">when</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">firstParam</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">args = </span><span class="nx">sliceDeferred</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
      <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">length = </span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nv">pValues = </span><span class="k">new</span> <span class="nb">Array</span><span class="p">(</span> <span class="nx">length</span> <span class="p">),</span>
      <span class="nv">count = </span><span class="nx">length</span><span class="p">,</span>
      <span class="nv">pCount = </span><span class="nx">length</span><span class="p">,</span>
      <span class="nv">deferred = </span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">firstParam</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">firstParam</span><span class="p">.</span><span class="nx">promise</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nv">firstParam :</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nv">promise = </span><span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
    <span class="nx">function</span> <span class="nx">resolveFunc</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">sliceDeferred</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">count</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">function</span> <span class="nx">progressFunc</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">pValues</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">sliceDeferred</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">notifyWith</span><span class="p">(</span> <span class="nx">promise</span><span class="p">,</span> <span class="nx">pValues</span> <span class="p">);</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span><span class="p">().</span><span class="k">then</span><span class="p">(</span> <span class="nx">resolveFunc</span><span class="p">(</span><span class="nx">i</span><span class="p">),</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">,</span> <span class="nx">progressFunc</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="o">--</span><span class="nx">count</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">count</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">deferred</span> <span class="o">!==</span> <span class="nx">firstParam</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">length</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">firstParam</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[]</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">promise</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="nv">jQuery.support = </span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="nx">var</span> <span class="nx">support</span><span class="p">,</span>
    <span class="nx">all</span><span class="p">,</span>
    <span class="nx">a</span><span class="p">,</span>
    <span class="nx">select</span><span class="p">,</span>
    <span class="nx">opt</span><span class="p">,</span>
    <span class="nx">input</span><span class="p">,</span>
    <span class="nx">marginDiv</span><span class="p">,</span>
    <span class="nx">fragment</span><span class="p">,</span>
    <span class="nx">tds</span><span class="p">,</span>
    <span class="nx">events</span><span class="p">,</span>
    <span class="nx">eventName</span><span class="p">,</span>
    <span class="nx">i</span><span class="p">,</span>
    <span class="nx">isSupported</span><span class="p">,</span>
    <span class="nv">div = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span>
    <span class="nv">documentElement = </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

  <span class="err">// Preliminary tests</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;className&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">);</span>
  <span class="nv">div.innerHTML = </span><span class="s2">&quot;   &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href=&#39;/a&#39; style=&#39;top:1px;float:left;opacity:.55;&#39;&gt;a&lt;/a&gt;&lt;input type=&#39;checkbox&#39;/&gt;&quot;</span><span class="p">;</span>

  <span class="nv">all = </span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>
  <span class="nv">a = </span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>

  <span class="err">// Can&#39;t get basic test support</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">all</span> <span class="o">||</span> <span class="o">!</span><span class="nx">all</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="o">!</span><span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{};</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ First batch of supports tests</span>
  <span class="nv">select = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;select&quot;</span> <span class="p">);</span>
  <span class="nv">opt = </span><span class="nx">select</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="nv">input = </span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;input&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>

  <span class="nv">support = </span><span class="p">{</span>
    <span class="err">// IE strips leading whitespace when .innerHTML is used</span>
    <span class="nv">leadingWhitespace: </span><span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="p">),</span>

    <span class="err">// Make sure that tbody elements aren&#39;t automatically inserted</span>
    <span class="o">/</span><span class="err">/ IE will insert them into empty tables</span>
    <span class="nv">tbody: </span><span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span>

    <span class="err">// Make sure that link elements get serialized correctly by innerHTML</span>
    <span class="o">/</span><span class="err">/ This requires a wrapper element in IE</span>
    <span class="nv">htmlSerialize: </span><span class="o">!!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span>

    <span class="err">// Get the style information from getAttribute</span>
    <span class="o">/</span><span class="err">/ (IE uses .cssText instead)</span>
    <span class="nv">style: </span><span class="sr">/top/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">)</span> <span class="p">),</span>

    <span class="err">// Make sure that URLs aren&#39;t manipulated</span>
    <span class="o">/</span><span class="err">/ (IE normalizes it by default)</span>
    <span class="nv">hrefNormalized: </span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;/a&quot;</span> <span class="p">),</span>

    <span class="err">// Make sure that element opacity exists</span>
    <span class="o">/</span><span class="err">/ (IE uses filter instead)</span>
    <span class="o">/</span><span class="err">/ Use a regex to work around a WebKit issue. See #5145</span>
    <span class="nv">opacity: </span><span class="sr">/^0.55/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="p">),</span>

    <span class="err">// Verify style float existence</span>
    <span class="o">/</span><span class="err">/ (IE uses styleFloat instead of cssFloat)</span>
    <span class="nv">cssFloat: </span><span class="o">!!</span><span class="nx">a</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssFloat</span><span class="p">,</span>

    <span class="err">// Make sure that if no value is specified for a checkbox</span>
    <span class="o">/</span><span class="err">/ that it defaults to &quot;on&quot;.</span>
    <span class="o">/</span><span class="err">/ (WebKit defaults to &quot;&quot; instead)</span>
    <span class="nv">checkOn: </span><span class="p">(</span> <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;on&quot;</span> <span class="p">),</span>

    <span class="err">// Make sure that a selected-by-default option has a working selected property.</span>
    <span class="o">/</span><span class="err">/ (WebKit defaults to false instead of true, IE too, if it&#39;s in an optgroup)</span>
    <span class="nv">optSelected: </span><span class="nx">opt</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span>

    <span class="err">// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)</span>
    <span class="nv">getSetAttribute: </span><span class="nx">div</span><span class="p">.</span><span class="nx">className</span> <span class="o">!==</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span>

    <span class="err">// Tests for enctype support on a form(#6743)</span>
    <span class="nv">enctype: </span><span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">enctype</span><span class="p">,</span>

    <span class="err">// Makes sure cloning an html5 element does not cause problems</span>
    <span class="o">/</span><span class="err">/ Where outerHTML is undefined, this still works</span>
    <span class="nv">html5Clone: </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;nav&quot;</span><span class="p">).</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">outerHTML</span> <span class="o">!==</span> <span class="s2">&quot;&lt;:nav&gt;&lt;/:nav&gt;&quot;</span><span class="p">,</span>

    <span class="err">// Will be defined later</span>
    <span class="nv">submitBubbles: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">changeBubbles: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">focusinBubbles: </span><span class="kc">false</span><span class="p">,</span>
    <span class="nv">deleteExpando: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">noCloneEvent: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">inlineBlockNeedsLayout: </span><span class="kc">false</span><span class="p">,</span>
    <span class="nv">shrinkWrapBlocks: </span><span class="kc">false</span><span class="p">,</span>
    <span class="nv">reliableMarginRight: </span><span class="kc">true</span>
  <span class="p">};</span>

  <span class="err">// Make sure checked status is properly cloned</span>
  <span class="nv">input.checked = </span><span class="kc">true</span><span class="p">;</span>
  <span class="nv">support.noCloneChecked = </span><span class="nx">input</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">checked</span><span class="p">;</span>

  <span class="err">// Make sure that the options inside disabled selects aren&#39;t marked as disabled</span>
  <span class="o">/</span><span class="err">/ (WebKit marks them as disabled)</span>
  <span class="nv">select.disabled = </span><span class="kc">true</span><span class="p">;</span>
  <span class="nv">support.optDisabled = </span><span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">disabled</span><span class="p">;</span>

  <span class="err">// Test to see if it&#39;s possible to delete an expando from an element</span>
  <span class="o">/</span><span class="err">/ Fails in Internet Explorer</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">div</span><span class="p">.</span><span class="nx">test</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">support.deleteExpando = </span><span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">fireEvent</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="err">// Cloning a node shouldn&#39;t copy over any</span>
      <span class="o">/</span><span class="err">/ bound event handlers (IE does this)</span>
      <span class="nv">support.noCloneEvent = </span><span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">fireEvent</span><span class="p">(</span> <span class="s2">&quot;onclick&quot;</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Check if a radio maintains its value</span>
  <span class="o">/</span><span class="err">/ after being appended to the DOM</span>
  <span class="nv">input = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">);</span>
  <span class="nv">input.value = </span><span class="s2">&quot;t&quot;</span><span class="p">;</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;radio&quot;</span><span class="p">);</span>
  <span class="nv">support.radioValue = </span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;t&quot;</span><span class="p">;</span>

  <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">,</span> <span class="s2">&quot;checked&quot;</span><span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">input</span> <span class="p">);</span>
  <span class="nv">fragment = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
  <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">lastChild</span> <span class="p">);</span>

  <span class="err">// WebKit doesn&#39;t clone checked state correctly in fragments</span>
  <span class="nv">support.checkClone = </span><span class="nx">fragment</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

  <span class="err">// Check if a disconnected checkbox will retain its checked</span>
  <span class="o">/</span><span class="err">/ value of true after appended to the DOM (IE6/7)</span>
  <span class="nv">support.appendChecked = </span><span class="nx">input</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

  <span class="nx">fragment</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">input</span> <span class="p">);</span>
  <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>

  <span class="nv">div.innerHTML = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>

  <span class="err">// Check if div with explicit width and no margin-right incorrectly</span>
  <span class="o">/</span><span class="err">/ gets computed margin-right based on width of container. For more</span>
  <span class="o">/</span><span class="err">/ info see bug #3333</span>
  <span class="o">/</span><span class="err">/ Fails in WebKit before Feb 2011 nightlies</span>
  <span class="o">/</span><span class="err">/ WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">marginDiv = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
    <span class="nv">marginDiv.style.width = </span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
    <span class="nv">marginDiv.style.marginRight = </span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
    <span class="nv">div.style.width = </span><span class="s2">&quot;2px&quot;</span><span class="p">;</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">marginDiv</span> <span class="p">);</span>
    <span class="nv">support.reliableMarginRight =</span>
      <span class="p">(</span> <span class="nb">parseInt</span><span class="p">(</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">marginDiv</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{</span> <span class="nv">marginRight: </span><span class="mi">0</span> <span class="p">}</span> <span class="p">).</span><span class="nx">marginRight</span><span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Technique from Juriy Zaytsev</span>
  <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">perfectionkills</span><span class="p">.</span><span class="nx">com</span><span class="sr">/detecting-event-support-without-browser-sniffing/</span>
  <span class="o">/</span><span class="err">/ We only care about the case where non-standard event systems</span>
  <span class="o">/</span><span class="err">/ are used, namely in IE. Short-circuiting here helps us to</span>
  <span class="o">/</span><span class="err">/ avoid an eval call (in setAttribute) which can cause CSP</span>
  <span class="o">/</span><span class="sr">/ to go haywire. See: https:/</span><span class="o">/</span><span class="nx">developer</span><span class="p">.</span><span class="nx">mozilla</span><span class="p">.</span><span class="nx">org</span><span class="err">/en/Security/CSP</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span>
      <span class="nv">submit: </span><span class="mi">1</span><span class="p">,</span>
      <span class="nv">change: </span><span class="mi">1</span><span class="p">,</span>
      <span class="nv">focusin: </span><span class="mi">1</span>
    <span class="p">})</span> <span class="p">{</span>
      <span class="nv">eventName = </span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">;</span>
      <span class="nv">isSupported = </span><span class="p">(</span> <span class="nx">eventName</span> <span class="k">in</span> <span class="nx">div</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isSupported</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">eventName</span><span class="p">,</span> <span class="s2">&quot;return;&quot;</span> <span class="p">);</span>
        <span class="nv">isSupported = </span><span class="p">(</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">[</span> <span class="nx">eventName</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">support</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;Bubbles&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">isSupported</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">fragment</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>

  <span class="err">// Null elements to avoid leaks in IE</span>
  <span class="nv">fragment = select = opt = marginDiv = div = input = </span><span class="kc">null</span><span class="p">;</span>

  <span class="err">// Run tests that need a body at doc ready</span>
  <span class="nx">jQuery</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">outer</span><span class="p">,</span> <span class="nx">inner</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">td</span><span class="p">,</span> <span class="nx">offsetSupport</span><span class="p">,</span>
      <span class="nx">conMarginTop</span><span class="p">,</span> <span class="nx">ptlm</span><span class="p">,</span> <span class="nx">vb</span><span class="p">,</span> <span class="nx">style</span><span class="p">,</span> <span class="nx">html</span><span class="p">,</span>
      <span class="nv">body = </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Return for frameset docs that don&#39;t have a body</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">conMarginTop = </span><span class="mi">1</span><span class="p">;</span>
    <span class="nv">ptlm = </span><span class="s2">&quot;position:absolute;top:0;left:0;width:1px;height:1px;margin:0;&quot;</span><span class="p">;</span>
    <span class="nv">vb = </span><span class="s2">&quot;visibility:hidden;border:0;&quot;</span><span class="p">;</span>
    <span class="nv">style = </span><span class="s2">&quot;style=&#39;&quot;</span> <span class="o">+</span> <span class="nx">ptlm</span> <span class="o">+</span> <span class="s2">&quot;border:5px solid #000;padding:0;&#39;&quot;</span><span class="p">;</span>
    <span class="nv">html = </span><span class="s2">&quot;&lt;div &quot;</span> <span class="o">+</span> <span class="nx">style</span> <span class="o">+</span> <span class="s2">&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&quot;</span> <span class="o">+</span>
      <span class="s2">&quot;&lt;table &quot;</span> <span class="o">+</span> <span class="nx">style</span> <span class="o">+</span> <span class="s2">&quot; cellpadding=&#39;0&#39; cellspacing=&#39;0&#39;&gt;&quot;</span> <span class="o">+</span>
      <span class="s2">&quot;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="p">;</span>

    <span class="nv">container = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
    <span class="nv">container.style.cssText = </span><span class="nx">vb</span> <span class="o">+</span> <span class="s2">&quot;width:0;height:0;position:static;top:0;margin-top:&quot;</span> <span class="o">+</span> <span class="nx">conMarginTop</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
    <span class="nx">body</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">body</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>

    <span class="err">// Construct the test element</span>
    <span class="nv">div = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
    <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>

    <span class="err">// Check if table cells still have offsetWidth/Height when they are set</span>
    <span class="o">/</span><span class="err">/ to display:none and there are still other visible table cells in a</span>
    <span class="o">/</span><span class="err">/ table row; if so, offsetWidth/Height are not reliable for use when</span>
    <span class="o">/</span><span class="err">/ determining if an element has been hidden directly using</span>
    <span class="o">/</span><span class="err">/ display:none (it is still safe to use offsets if a parent element is</span>
    <span class="o">/</span><span class="err">/ hidden; don safety goggles and see bug #4512 for more information).</span>
    <span class="o">/</span><span class="err">/ (only IE 8 fails this test)</span>
    <span class="nv">div.innerHTML = </span><span class="s2">&quot;&lt;table&gt;&lt;tr&gt;&lt;td style=&#39;padding:0;border:0;display:none&#39;&gt;&lt;/td&gt;&lt;td&gt;t&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="p">;</span>
    <span class="nv">tds = </span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;td&quot;</span> <span class="p">);</span>
    <span class="nv">isSupported = </span><span class="p">(</span> <span class="nx">tds</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">);</span>

    <span class="nx">tds</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nv">style.display = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="nx">tds</span><span class="p">[</span> <span class="mi">1</span> <span class="p">].</span><span class="nv">style.display = </span><span class="s2">&quot;none&quot;</span><span class="p">;</span>

    <span class="err">// Check if empty table cells still have offsetWidth/Height</span>
    <span class="o">/</span><span class="err">/ (IE &lt;= 8 fail this test)</span>
    <span class="nv">support.reliableHiddenOffsets = </span><span class="nx">isSupported</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">tds</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">);</span>

    <span class="err">// Figure out if the W3C box model works as expected</span>
    <span class="nv">div.innerHTML = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="nv">div.style.width = div.style.paddingLeft = </span><span class="s2">&quot;1px&quot;</span><span class="p">;</span>
    <span class="nv">jQuery.boxModel = support.boxModel = </span><span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">2</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Check if natively block-level elements act like inline-block</span>
      <span class="o">/</span><span class="err">/ elements when setting their display to &#39;inline&#39; and giving</span>
      <span class="o">/</span><span class="err">/ them layout</span>
      <span class="o">/</span><span class="err">/ (IE &lt; 8 does this)</span>
      <span class="nv">div.style.display = </span><span class="s2">&quot;inline&quot;</span><span class="p">;</span>
      <span class="nv">div.style.zoom = </span><span class="mi">1</span><span class="p">;</span>
      <span class="nv">support.inlineBlockNeedsLayout = </span><span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">);</span>

      <span class="err">// Check if elements with layout shrink-wrap their children</span>
      <span class="o">/</span><span class="err">/ (IE 6 does this)</span>
      <span class="nv">div.style.display = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="nv">div.innerHTML = </span><span class="s2">&quot;&lt;div style=&#39;width:4px;&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">;</span>
      <span class="nv">support.shrinkWrapBlocks = </span><span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">!==</span> <span class="mi">2</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nv">div.style.cssText = </span><span class="nx">ptlm</span> <span class="o">+</span> <span class="nx">vb</span><span class="p">;</span>
    <span class="nv">div.innerHTML = </span><span class="nx">html</span><span class="p">;</span>

    <span class="nv">outer = </span><span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="nv">inner = </span><span class="nx">outer</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="nv">td = </span><span class="nx">outer</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>

    <span class="nv">offsetSupport = </span><span class="p">{</span>
      <span class="nv">doesNotAddBorder: </span><span class="p">(</span> <span class="nx">inner</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">!==</span> <span class="mi">5</span> <span class="p">),</span>
      <span class="nv">doesAddBorderForTableAndCells: </span><span class="p">(</span> <span class="nx">td</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="mi">5</span> <span class="p">)</span>
    <span class="p">};</span>

    <span class="nv">inner.style.position = </span><span class="s2">&quot;fixed&quot;</span><span class="p">;</span>
    <span class="nv">inner.style.top = </span><span class="s2">&quot;20px&quot;</span><span class="p">;</span>

    <span class="err">// safari subtracts parent border width here which is 5px</span>
    <span class="nv">offsetSupport.fixedPosition = </span><span class="p">(</span> <span class="nx">inner</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="mi">20</span> <span class="o">||</span> <span class="nx">inner</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="mi">15</span> <span class="p">);</span>
    <span class="nv">inner.style.position = inner.style.top = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="nv">outer.style.overflow = </span><span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
    <span class="nv">outer.style.position = </span><span class="s2">&quot;relative&quot;</span><span class="p">;</span>

    <span class="nv">offsetSupport.subtractsBorderForOverflowNotVisible = </span><span class="p">(</span> <span class="nx">inner</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="o">-</span><span class="mi">5</span> <span class="p">);</span>
    <span class="nv">offsetSupport.doesNotIncludeMarginInBodyOffset = </span><span class="p">(</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">!==</span> <span class="nx">conMarginTop</span> <span class="p">);</span>

    <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">);</span>
    <span class="nv">div  = container = </span><span class="kc">null</span><span class="p">;</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">support</span><span class="p">,</span> <span class="nx">offsetSupport</span> <span class="p">);</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">support</span><span class="p">;</span>
<span class="p">})();</span>




<span class="nx">var</span> <span class="nv">rbrace = </span><span class="sr">/^(?:\{.*\}|\[.*\])$/</span><span class="p">,</span>
  <span class="nv">rmultiDash = </span><span class="sr">/([A-Z])/g</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">cache: </span><span class="p">{},</span>

  <span class="err">// Please use with caution</span>
  <span class="nv">uuid: </span><span class="mi">0</span><span class="p">,</span>

  <span class="err">// Unique for each copy of jQuery on the page</span>
  <span class="o">/</span><span class="err">/ Non-digits removed to match rinlinejQuery</span>
  <span class="nv">expando: </span><span class="s2">&quot;jQuery&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\D/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">),</span>

  <span class="err">// The following elements throw uncatchable exceptions if you</span>
  <span class="o">/</span><span class="err">/ attempt to add expando properties to them.</span>
  <span class="nv">noData: </span><span class="p">{</span>
    <span class="s2">&quot;embed&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="err">// Ban all objects except for Flash (which handle expandos)</span>
    <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;applet&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="nv">hasData: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>
    <span class="k">return</span> <span class="o">!!</span><span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">data: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">pvt</span> <span class="sr">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nx">privateCache</span><span class="p">,</span> <span class="nx">thisCache</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
      <span class="nv">internalKey = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>
      <span class="nv">getByName = </span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>

      <span class="err">// We have to handle DOM nodes and JS objects differently because IE6-7</span>
      <span class="o">/</span><span class="err">/ can&#39;t GC object references properly across the DOM-JS boundary</span>
      <span class="nv">isNode = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>

      <span class="err">// Only DOM nodes need the global jQuery cache; JS object data is</span>
      <span class="o">/</span><span class="err">/ attached directly to the object so GC can occur automatically</span>
      <span class="nv">cache = </span><span class="nx">isNode</span> <span class="o">?</span> <span class="nv">jQuery.cache : </span><span class="nx">elem</span><span class="p">,</span>

      <span class="err">// Only defining an ID for JS objects if its cache already exists allows</span>
      <span class="o">/</span><span class="err">/ the code to shortcut on the same path as a DOM node with no cache</span>
      <span class="nv">id = </span><span class="nx">isNode</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">internalKey</span><span class="p">,</span>
      <span class="nv">isEvents = </span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;events&quot;</span><span class="p">;</span>

    <span class="err">// Avoid doing any more work than we need to when trying to get data on an</span>
    <span class="o">/</span><span class="err">/ object that has no data at all</span>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">id</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">isEvents</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">pvt</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">data</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">getByName</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Only DOM nodes need a new unique ID for each element since their data</span>
      <span class="o">/</span><span class="err">/ ends up in the global cache</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">id = </span><span class="o">++</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">uuid</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">id = </span><span class="nx">internalKey</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>

      <span class="err">// Avoids exposing jQuery metadata on plain JS objects when the object</span>
      <span class="o">/</span><span class="err">/ is serialized using JSON.stringify</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nv">toJSON = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ An object can be passed to jQuery.data instead of a key/value pair; this gets</span>
    <span class="o">/</span><span class="err">/ shallow copied over onto the existing cache</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">],</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nv">data = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nv">privateCache = thisCache = </span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>

    <span class="err">// jQuery data() is stored in a separate object inside the object&#39;s internal data</span>
    <span class="o">/</span><span class="err">/ cache in order to avoid key collisions between internal data and user-defined</span>
    <span class="o">/</span><span class="err">/ data.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">thisCache</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">thisCache.data = </span><span class="p">{};</span>
      <span class="p">}</span>

      <span class="nv">thisCache = </span><span class="nx">thisCache</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Users should not attempt to inspect the internal events object using jQuery.data,</span>
    <span class="o">/</span><span class="err">/ it is undocumented and subject to change. But does anyone listen? No.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isEvents</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">privateCache</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Check for both converted-to-camel and non-converted data property names</span>
    <span class="o">/</span><span class="err">/ If a data property was specified</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">getByName</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// First Try to find as-is property data</span>
      <span class="nv">ret = </span><span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

      <span class="err">// Test for null|undefined property data</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// Try to find the camelCased property</span>
        <span class="nv">ret = </span><span class="nx">thisCache</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">ret = </span><span class="nx">thisCache</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">removeData: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">pvt</span> <span class="sr">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nx">thisCache</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span>

      <span class="err">// Reference to internal data cache key</span>
      <span class="nv">internalKey = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>

      <span class="nv">isNode = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>

      <span class="err">// See jQuery.data for more information</span>
      <span class="nv">cache = </span><span class="nx">isNode</span> <span class="o">?</span> <span class="nv">jQuery.cache : </span><span class="nx">elem</span><span class="p">,</span>

      <span class="err">// See jQuery.data for more information</span>
      <span class="nv">id = </span><span class="nx">isNode</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">internalKey</span><span class="p">;</span>

    <span class="err">// If there is already no cache entry for this object, there is no</span>
    <span class="o">/</span><span class="err">/ purpose in continuing</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nv">thisCache = </span><span class="nx">pvt</span> <span class="o">?</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// Support array or space separated string names for data keys</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

          <span class="err">// try the string as a key before any manipulation</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">name = </span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

            <span class="err">// split the camel cased version by spaces unless a key with the spaces exists</span>
            <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">name = </span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nv">name = </span><span class="nx">name</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">delete</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">];</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ If there is no data left in the cache, we want to continue</span>
        <span class="o">/</span><span class="err">/ and let the cache object itself get destroyed</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">pvt</span> <span class="o">?</span> <span class="nv">isEmptyDataObject : </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span> <span class="p">)(</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ See jQuery.data for more information</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span><span class="p">;</span>

      <span class="err">// Don&#39;t destroy the parent cache unless the internal data object</span>
      <span class="o">/</span><span class="err">/ had been the only thing left in it</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Browsers that fail expando deletion also refuse to delete expandos on</span>
    <span class="o">/</span><span class="err">/ the window, but it will allow it on all other JS objects; other browsers</span>
    <span class="o">/</span><span class="err">/ don&#39;t care</span>
    <span class="o">/</span><span class="err">/ Ensure that `cache` is not a window object #10080</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cache</span><span class="p">.</span><span class="nx">setInterval</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ We destroyed the cache and need to eliminate the expando on the node to avoid</span>
    <span class="o">/</span><span class="err">/ false lookups in the cache for entries that no longer exist</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// IE does not allow us to delete expando properties from nodes,</span>
      <span class="o">/</span><span class="err">/ nor does it have a removeAttribute function on Document nodes;</span>
      <span class="o">/</span><span class="err">/ we must handle all of these cases</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">internalKey</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// For internal use only.</span>
  <span class="nv">_data: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// A method for determining if a DOM node can handle the data expando</span>
  <span class="nv">acceptData: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">match = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">noData</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;classid&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">match</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">data: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">parts</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span>
      <span class="nv">data = </span><span class="kc">null</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">data = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;parsedAttrs&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">attr = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">attributes</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">attr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">name = </span><span class="nx">attr</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;data-&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">);</span>

              <span class="nx">dataAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;parsedAttrs&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="nv">parts = </span><span class="nx">key</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
    <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">data = </span><span class="k">this</span><span class="p">.</span><span class="nx">triggerHandler</span><span class="p">(</span><span class="s2">&quot;getData&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]);</span>

      <span class="err">// Try to fetch any internally stored data first</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">data = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span> <span class="p">);</span>
        <span class="nv">data = </span><span class="nx">dataAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">data</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
          <span class="nv">args = </span><span class="p">[</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">value</span> <span class="p">];</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">triggerHandler</span><span class="p">(</span> <span class="s2">&quot;setData&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">triggerHandler</span><span class="p">(</span> <span class="s2">&quot;changeData&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">removeData: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">function</span> <span class="nx">dataAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
  <span class="err">// If nothing was found internally, try to fetch any</span>
  <span class="o">/</span><span class="err">/ data from the HTML5 data-* attribute</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">var</span> <span class="nv">name = </span><span class="s2">&quot;data-&quot;</span> <span class="o">+</span> <span class="nx">key</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rmultiDash</span><span class="p">,</span> <span class="s2">&quot;-$1&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="nv">data = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nv">data = </span><span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;true&quot;</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span>
        <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;false&quot;</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span>
        <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;null&quot;</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isNumeric</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">?</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">rbrace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">data</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>

      <span class="o">/</span><span class="err">/ Make sure we set the data so it isn&#39;t changed later</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">data = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ checks a cache object for emptiness</span>
<span class="nx">function</span> <span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>

    <span class="err">// if the public data object is empty, the private is still empty</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;data&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;toJSON&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>




<span class="nx">function</span> <span class="nx">handleQueueMarkDefer</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">deferDataKey = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;defer&quot;</span><span class="p">,</span>
    <span class="nv">queueDataKey = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">,</span>
    <span class="nv">markDataKey = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
    <span class="nv">defer = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">deferDataKey</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">defer</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="nx">src</span> <span class="o">===</span> <span class="s2">&quot;queue&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">queueDataKey</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="nx">src</span> <span class="o">===</span> <span class="s2">&quot;mark&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">markDataKey</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Give room for hard-coded callbacks to fire first</span>
    <span class="o">/</span><span class="err">/ and eventually mark/queue something else on the element</span>
    <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">queueDataKey</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">markDataKey</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="nx">defer</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nv">_mark: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">type = </span><span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">_unmark: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">force</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">force</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">type = </span><span class="nx">elem</span><span class="p">;</span>
      <span class="nv">elem = </span><span class="nx">force</span><span class="p">;</span>
      <span class="nv">force = </span><span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">type = </span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
      <span class="nx">var</span> <span class="nv">key = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
        <span class="nv">count = </span><span class="nx">force</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">count</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">count</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="nx">handleQueueMarkDefer</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;mark&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">queue: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">q</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">type = </span><span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">;</span>
      <span class="nv">q = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>

      <span class="err">// Speed up dequeue by getting out quickly if this is just a lookup</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">q</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">q = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">q</span> <span class="o">||</span> <span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">dequeue: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">type = </span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

    <span class="nx">var</span> <span class="nv">queue = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">),</span>
      <span class="nv">fn = </span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
      <span class="nv">hooks = </span><span class="p">{};</span>

    <span class="err">// If the fx queue is dequeued, always remove the progress sentinel</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">fn = </span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Add a progress sentinel to prevent the fx queue from being</span>
      <span class="o">/</span><span class="err">/ automatically dequeued</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;fx&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">queue</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.run&quot;</span><span class="p">,</span> <span class="nx">hooks</span> <span class="p">);</span>
      <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">},</span> <span class="nx">hooks</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue &quot;</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.run&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="nx">handleQueueMarkDefer</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;queue&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">queue: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">data = </span><span class="nx">type</span><span class="p">;</span>
      <span class="nv">type = </span><span class="s2">&quot;fx&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">type</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">queue = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;fx&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nv">dequeue: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="err">// Based off of the plugin by Clint Helfers, with permission.</span>
  <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">blindsignals</span><span class="p">.</span><span class="nx">com</span><span class="err">/index.php/2009/07/jquery-delay/</span>
  <span class="nv">delay: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">time = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">[</span> <span class="nx">time</span> <span class="p">]</span> <span class="o">||</span> <span class="nv">time : </span><span class="nx">time</span><span class="p">;</span>
    <span class="nv">type = </span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">timeout = </span><span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">time</span> <span class="p">);</span>
      <span class="nv">hooks.stop = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">timeout</span> <span class="p">);</span>
      <span class="p">};</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nv">clearQueue: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">,</span> <span class="p">[]</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="err">// Get a promise resolved when queues of a certain type</span>
  <span class="o">/</span><span class="err">/ are emptied (fx is the type by default)</span>
  <span class="nv">promise: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">object = </span><span class="nx">type</span><span class="p">;</span>
      <span class="nv">type = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">type = </span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
    <span class="nx">var</span> <span class="nv">defer = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nv">elements = </span><span class="k">this</span><span class="p">,</span>
      <span class="nv">i = </span><span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nv">count = </span><span class="mi">1</span><span class="p">,</span>
      <span class="nv">deferDataKey = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;defer&quot;</span><span class="p">,</span>
      <span class="nv">queueDataKey = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">,</span>
      <span class="nv">markDataKey = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
      <span class="nx">tmp</span><span class="p">;</span>
    <span class="nx">function</span> <span class="nx">resolve</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">count</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">defer</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elements</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span> <span class="nv">tmp = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">||</span>
          <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">queueDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">||</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">markDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span> <span class="s2">&quot;once memory&quot;</span> <span class="p">),</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">))</span> <span class="p">{</span>
        <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">tmp</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">resolve</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">resolve</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="nx">var</span> <span class="nv">rclass = </span><span class="sr">/[\n\t\r]/g</span><span class="p">,</span>
  <span class="nv">rspace = </span><span class="sr">/\s+/</span><span class="p">,</span>
  <span class="nv">rreturn = </span><span class="sr">/\r/g</span><span class="p">,</span>
  <span class="nv">rtype = </span><span class="sr">/^(?:button|input)$/i</span><span class="p">,</span>
  <span class="nv">rfocusable = </span><span class="sr">/^(?:button|input|object|select|textarea)$/i</span><span class="p">,</span>
  <span class="nv">rclickable = </span><span class="sr">/^a(?:rea)?$/i</span><span class="p">,</span>
  <span class="nv">rboolean = </span><span class="sr">/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i</span><span class="p">,</span>
  <span class="nv">getSetAttribute = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">getSetAttribute</span><span class="p">,</span>
  <span class="nx">nodeHook</span><span class="p">,</span> <span class="nx">boolHook</span><span class="p">,</span> <span class="nx">fixSpecified</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">attr: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">removeAttr: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">prop: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">removeProp: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="err">// try/catch handles cases where IE balks (such as removing a property on window)</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">addClass: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">classNames</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">setClass</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">cl</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">classNames = </span><span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">&amp;&amp;</span> <span class="nx">classNames</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">elem.className = </span><span class="nx">value</span><span class="p">;</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">setClass = </span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>

            <span class="k">for</span> <span class="p">(</span> <span class="nv">c = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">cl = </span><span class="nx">classNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">cl</span><span class="p">;</span> <span class="nx">c</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!~</span><span class="nx">setClass</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">c</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">setClass</span> <span class="o">+=</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">c</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nv">elem.className = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">setClass</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">removeClass: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">classNames</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">className</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">cl</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">classNames = </span><span class="p">(</span> <span class="nx">value</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">className = </span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nv">c = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">cl = </span><span class="nx">classNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">cl</span><span class="p">;</span> <span class="nx">c</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">className = </span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">c</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nv">elem.className = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">elem.className = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">toggleClass: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">stateVal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">type = </span><span class="k">typeof</span> <span class="nx">value</span><span class="p">,</span>
      <span class="nv">isBool = </span><span class="k">typeof</span> <span class="nx">stateVal</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span> <span class="nx">stateVal</span><span class="p">),</span> <span class="nx">stateVal</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// toggle individual class names</span>
        <span class="nx">var</span> <span class="nx">className</span><span class="p">,</span>
          <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
          <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
          <span class="nv">state = </span><span class="nx">stateVal</span><span class="p">,</span>
          <span class="nv">classNames = </span><span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>

        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nv">className = </span><span class="nx">classNames</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// check each className given, space seperated list</span>
          <span class="nv">state = </span><span class="nx">isBool</span> <span class="o">?</span> <span class="nv">state : </span><span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>
          <span class="nx">self</span><span class="p">[</span> <span class="nx">state</span> <span class="o">?</span> <span class="s2">&quot;addClass&quot;</span> <span class="o">:</span> <span class="s2">&quot;removeClass&quot;</span> <span class="p">](</span> <span class="nx">className</span> <span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// store className if set</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__className__&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ toggle whole className</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">className = </span><span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__className__&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">hasClass: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">className = </span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">,</span>
      <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">className</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">val: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">isFunction</span><span class="p">,</span>
      <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">hooks = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
          <span class="err">// handle most common string cases</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rreturn</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span>
          <span class="err">// handle cases where value is null/undef or number</span>
          <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">isFunction = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">val</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isFunction</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">val = </span><span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">val = </span><span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Treat null/undefined as &quot;&quot;; convert numbers to string</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">val = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">val = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">function</span> <span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="nv">hooks = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="p">];</span>

      <span class="err">// If set returns undefined, fall back to normal setting</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span><span class="p">)</span> <span class="o">||</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">value = </span><span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">valHooks: </span><span class="p">{</span>
    <span class="nv">option: </span><span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// attributes.value is undefined in Blackberry 4.7 but</span>
        <span class="o">/</span><span class="err">/ uses .value. See #6932</span>
        <span class="nx">var</span> <span class="nv">val = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">val</span> <span class="o">||</span> <span class="nx">val</span><span class="p">.</span><span class="nx">specified</span> <span class="o">?</span> <span class="nv">elem.value : </span><span class="nx">elem</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nv">select: </span><span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">max</span><span class="p">,</span> <span class="nx">option</span><span class="p">,</span>
          <span class="nv">index = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">,</span>
          <span class="nv">values = </span><span class="p">[],</span>
          <span class="nv">options = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
          <span class="nv">one = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-one&quot;</span><span class="p">;</span>

        <span class="err">// Nothing was selected</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ Loop through all the selected options</span>
        <span class="nv">i = </span><span class="nx">one</span> <span class="o">?</span> <span class="nv">index : </span><span class="mi">0</span><span class="p">;</span>
        <span class="nv">max = </span><span class="nx">one</span> <span class="o">?</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">option = </span><span class="nx">options</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

          <span class="err">// Don&#39;t return options that are disabled or in a disabled optgroup</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">option</span><span class="p">.</span><span class="nx">selected</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">optDisabled</span> <span class="o">?</span> <span class="o">!</span><span class="nv">option.disabled : </span><span class="nx">option</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
              <span class="p">(</span><span class="o">!</span><span class="nx">option</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">option</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="s2">&quot;optgroup&quot;</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

            <span class="err">// Get the specific value for the option</span>
            <span class="nv">value = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">option</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>

            <span class="err">// We don&#39;t need an array for one selects</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="o">/</span><span class="err">/ Multi-Selects return an array</span>
            <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ Fixes Bug #2551 -- select.val() broken in IE after form.reset()</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
      <span class="p">},</span>

      <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">values = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nv">selected = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">values</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">});</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">elem.selectedIndex = </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">attrFn: </span><span class="p">{</span>
    <span class="nv">val: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">css: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">html: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">text: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">data: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">width: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">height: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">offset: </span><span class="kc">true</span>
  <span class="p">},</span>

  <span class="nv">attr: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">notxml</span><span class="p">,</span>
      <span class="nv">nType = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>

    <span class="err">// don&#39;t get/set attributes on text, comment and attribute nodes</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">pass</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)[</span> <span class="nx">name</span> <span class="p">](</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Fallback to prop when attributes are not supported</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nv">notxml = </span><span class="nx">nType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="err">// All attributes are lowercase</span>
    <span class="o">/</span><span class="err">/ Grab necessary hook if one is defined</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">notxml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">name = </span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="nv">hooks = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">rboolean</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">boolHook : </span><span class="nx">nodeHook</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">notxml</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">notxml</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

      <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>

      <span class="err">// Non-existent attributes return null, we normalize to undefined</span>
      <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="kc">undefined</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">removeAttr: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">propName</span><span class="p">,</span> <span class="nx">attrNames</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span>
      <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">attrNames = </span><span class="nx">value</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>
      <span class="nv">l = </span><span class="nx">attrNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">name = </span><span class="nx">attrNames</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">propName = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>

          <span class="err">// See #9699 for explanation of this approach (setting first, then removal)</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">getSetAttribute</span> <span class="o">?</span> <span class="nv">name : </span><span class="nx">propName</span> <span class="p">);</span>

          <span class="err">// Set corresponding property to false for boolean attributes</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">rboolean</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">propName</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">propName</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">attrHooks: </span><span class="p">{</span>
    <span class="nv">type: </span><span class="p">{</span>
      <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// We can&#39;t allow the type property to be changed (since it causes problems in IE)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">rtype</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;type property can&#39;t be changed&quot;</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">radioValue</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Setting the type on a radio button after the value resets the value in IE6-9</span>
          <span class="o">/</span><span class="err">/ Reset value to it&#39;s default in case type is set after value</span>
          <span class="o">/</span><span class="err">/ This is for element creation</span>
          <span class="nx">var</span> <span class="nv">val = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">elem.value = </span><span class="nx">val</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="err">// Use the value property for back compat</span>
    <span class="o">/</span><span class="err">/ Use the nodeHook for button elements in IE6/7 (#1954)</span>
    <span class="nv">value: </span><span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeHook</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">nodeHook</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">elem</span> <span class="o">?</span>
          <span class="nv">elem.value :</span>
          <span class="kc">null</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeHook</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">nodeHook</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="o">/</span><span class="err">/ Does not return so that setAttribute is also used</span>
        <span class="nv">elem.value = </span><span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">propFix: </span><span class="p">{</span>
    <span class="nv">tabindex: </span><span class="s2">&quot;tabIndex&quot;</span><span class="p">,</span>
    <span class="nv">readonly: </span><span class="s2">&quot;readOnly&quot;</span><span class="p">,</span>
    <span class="s2">&quot;for&quot;</span><span class="o">:</span> <span class="s2">&quot;htmlFor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span><span class="p">,</span>
    <span class="nv">maxlength: </span><span class="s2">&quot;maxLength&quot;</span><span class="p">,</span>
    <span class="nv">cellspacing: </span><span class="s2">&quot;cellSpacing&quot;</span><span class="p">,</span>
    <span class="nv">cellpadding: </span><span class="s2">&quot;cellPadding&quot;</span><span class="p">,</span>
    <span class="nv">rowspan: </span><span class="s2">&quot;rowSpan&quot;</span><span class="p">,</span>
    <span class="nv">colspan: </span><span class="s2">&quot;colSpan&quot;</span><span class="p">,</span>
    <span class="nv">usemap: </span><span class="s2">&quot;useMap&quot;</span><span class="p">,</span>
    <span class="nv">frameborder: </span><span class="s2">&quot;frameBorder&quot;</span><span class="p">,</span>
    <span class="nv">contenteditable: </span><span class="s2">&quot;contentEditable&quot;</span>
  <span class="p">},</span>

  <span class="nv">prop: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">notxml</span><span class="p">,</span>
      <span class="nv">nType = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>

    <span class="err">// don&#39;t get/set properties on text, comment and attribute nodes</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">notxml = </span><span class="nx">nType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">notxml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Fix name and attach hooks</span>
      <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
      <span class="nv">hooks = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">propHooks: </span><span class="p">{</span>
    <span class="nv">tabIndex: </span><span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// elem.tabIndex doesn&#39;t always return the correct value when it hasn&#39;t been explicitly set</span>
        <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">fluidproject</span><span class="p">.</span><span class="nx">org</span><span class="err">/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/</span>
        <span class="nx">var</span> <span class="nv">attributeNode = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;tabindex&quot;</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">attributeNode</span> <span class="o">&amp;&amp;</span> <span class="nx">attributeNode</span><span class="p">.</span><span class="nx">specified</span> <span class="o">?</span>
          <span class="nb">parseInt</span><span class="p">(</span> <span class="nx">attributeNode</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">rfocusable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">rclickable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">href</span> <span class="o">?</span>
            <span class="mi">0</span> <span class="o">:</span>
            <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Add the tabIndex propHook to attrHooks for back-compat (different case is intentional)</span>
<span class="nv">jQuery.attrHooks.tabindex = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">tabIndex</span><span class="p">;</span>

<span class="err">// Hook for boolean attributes</span>
<span class="nv">boolHook = </span><span class="p">{</span>
  <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Align boolean attributes with corresponding properties</span>
    <span class="o">/</span><span class="err">/ Fall back to attribute presence where some booleans are not supported</span>
    <span class="nx">var</span> <span class="nx">attrNode</span><span class="p">,</span>
      <span class="nv">property = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">property</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">property</span> <span class="o">!==</span> <span class="s2">&quot;boolean&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nv">attrNode = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">attrNode</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">?</span>
      <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">:</span>
      <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">propName</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Remove boolean attributes when set to false</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="err">// value is true since we know at this point it&#39;s type boolean and not false</span>
      <span class="o">/</span><span class="err">/ Set boolean attributes to the same name and set the DOM property</span>
      <span class="nv">propName = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">propName</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Only set the IDL specifically if it already exists on the element</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">propName</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="err">// IE6/7 do not support getting/setting some attributes with get/setAttribute</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">getSetAttribute</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nv">fixSpecified = </span><span class="p">{</span>
    <span class="nv">name: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">id: </span><span class="kc">true</span>
  <span class="p">};</span>

  <span class="err">// Use this for any attribute in IE6/7</span>
  <span class="o">/</span><span class="err">/ This fixes almost every IE6/7 issue</span>
  <span class="nv">nodeHook = jQuery.valHooks.button = </span><span class="p">{</span>
    <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">ret</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">fixSpecified</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">?</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">!==</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">specified</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nv">ret.nodeValue :</span>
        <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Set the existing or create a new attribute node</span>
      <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">ret = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttributeNode</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="p">(</span> <span class="nv">ret.nodeValue = </span><span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="err">// Apply the nodeHook to tabindex</span>
  <span class="nv">jQuery.attrHooks.tabindex.set = </span><span class="nx">nodeHook</span><span class="p">.</span><span class="nx">set</span><span class="p">;</span>

  <span class="err">// Set width and height to auto instead of 0 on empty string( Bug #8150 )</span>
  <span class="o">/</span><span class="err">/ This is for removals</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="p">{</span>
      <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="err">// Set contenteditable to false on removals(#10429)</span>
  <span class="o">/</span><span class="err">/ Setting to empty string throws an error as an invalid value</span>
  <span class="nv">jQuery.attrHooks.contenteditable = </span><span class="p">{</span>
    <span class="nv">get: </span><span class="nx">nodeHook</span><span class="p">.</span><span class="nx">get</span><span class="p">,</span>
    <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">value = </span><span class="s2">&quot;false&quot;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">nodeHook</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


<span class="o">/</span><span class="err">/ Some attributes require a special call on IE</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">hrefNormalized</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">undefined</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.attrHooks.style = </span><span class="p">{</span>
    <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Return undefined in the case of empty string</span>
      <span class="o">/</span><span class="err">/ Normalize to lowercase since IE uppercases css property names</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">||</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="nv">elem.style.cssText = </span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Safari mis-reports the default selected property of an option</span>
<span class="o">/</span><span class="err">/ Accessing the parent&#39;s selectedIndex property fixes it</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">optSelected</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.propHooks.selected = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span> <span class="p">{</span>
    <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">parent = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">parent</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>

        <span class="err">// Make sure that it also works with optgroups, see #5701</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ IE6/7 call enctype encoding</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">enctype</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.propFix.enctype = </span><span class="s2">&quot;encoding&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Radios and checkboxes getter/setter</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkOn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Handle the case where in Webkit &quot;&quot; is returned instead of &quot;on&quot; if a value isn&#39;t specified</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">],</span> <span class="p">{</span>
    <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="nv">elem.checked = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>




<span class="nx">var</span> <span class="nv">rformElems = </span><span class="sr">/^(?:textarea|input|select)$/i</span><span class="p">,</span>
  <span class="nv">rtypenamespace = </span><span class="sr">/^([^\.]*)?(?:\.(.+))?$/</span><span class="p">,</span>
  <span class="nv">rhoverHack = </span><span class="sr">/\bhover(\.\S+)?\b/</span><span class="p">,</span>
  <span class="nv">rkeyEvent = </span><span class="sr">/^key/</span><span class="p">,</span>
  <span class="nv">rmouseEvent = </span><span class="sr">/^(?:mouse|contextmenu)|click/</span><span class="p">,</span>
  <span class="nv">rfocusMorph = </span><span class="sr">/^(?:focusinfocus|focusoutblur)$/</span><span class="p">,</span>
  <span class="nv">rquickIs = </span><span class="sr">/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/</span><span class="p">,</span>
  <span class="nv">quickParse = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">quick = </span><span class="nx">rquickIs</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">quick</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">//   0  1    2   3</span>
      <span class="o">/</span><span class="err">/ [ _, tag, id, class ]</span>
      <span class="nx">quick</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">quick</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="nx">quick</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">quick</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;(?:^|\\s)&quot;</span> <span class="o">+</span> <span class="nx">quick</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;(?:\\s|$)&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">quick</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nv">quickIs = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">m</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">attrs = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">(</span><span class="o">!</span><span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="o">!</span><span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">id</span> <span class="o">||</span> <span class="p">{}).</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="o">!</span><span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">||</span> <span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nx">test</span><span class="p">(</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">[</span> <span class="s2">&quot;class&quot;</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{}).</span><span class="nx">value</span> <span class="p">))</span>
    <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">hoverHack = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">hover</span> <span class="o">?</span> <span class="nv">events : </span><span class="nx">events</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rhoverHack</span><span class="p">,</span> <span class="s2">&quot;mouseenter$1 mouseleave$1&quot;</span> <span class="p">);</span>
  <span class="p">};</span>

<span class="err">/*</span>
 <span class="o">*</span> <span class="nx">Helper</span> <span class="nx">functions</span> <span class="k">for</span> <span class="nx">managing</span> <span class="nx">events</span> <span class="o">--</span> <span class="o">not</span> <span class="nx">part</span> <span class="k">of</span> <span class="nx">the</span> <span class="nx">public</span> <span class="nx">interface</span><span class="p">.</span>
 <span class="o">*</span> <span class="nx">Props</span> <span class="nx">to</span> <span class="nx">Dean</span> <span class="nx">Edwards</span><span class="s1">&#39; addEvent library for many of the ideas.</span>
<span class="s1"> */</span>
<span class="s1">jQuery.event = {</span>

<span class="s1">  add: function( elem, types, handler, data, selector ) {</span>

<span class="s1">    var elemData, eventHandle, events,</span>
<span class="s1">      t, tns, type, namespaces, handleObj,</span>
<span class="s1">      handleObjIn, quick, handlers, special;</span>

<span class="s1">    // Don&#39;</span><span class="nx">t</span> <span class="nx">attach</span> <span class="nx">events</span> <span class="nx">to</span> <span class="nx">noData</span> <span class="o">or</span> <span class="nx">text</span><span class="err">/comment nodes (allow plain objects tho)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="o">!</span><span class="nx">types</span> <span class="o">||</span> <span class="o">!</span><span class="nx">handler</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nv">elemData = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Caller can pass in an object of custom data in lieu of the handler</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">handleObjIn = </span><span class="nx">handler</span><span class="p">;</span>
      <span class="nv">handler = </span><span class="nx">handleObjIn</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Make sure that the handler has a unique ID, used to find/remove it later</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">handler.guid = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Init the element&#39;s event structure and main handler, if this is the first</span>
    <span class="nv">events = </span><span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">elemData.events = events = </span><span class="p">{};</span>
    <span class="p">}</span>
    <span class="nv">eventHandle = </span><span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">elemData.handle = eventHandle = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Discard the second event of a jQuery.event.trigger() and</span>
        <span class="o">/</span><span class="err">/ when an event is called after a page has unloaded</span>
        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">jQuery</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">!==</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">:</span>
          <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="err">// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events</span>
      <span class="nv">eventHandle.elem = </span><span class="nx">elem</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Handle multiple events separated by a space</span>
    <span class="o">/</span><span class="err">/ jQuery(...).bind(&quot;mouseover mouseout&quot;, fn);</span>
    <span class="nv">types = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">hoverHack</span><span class="p">(</span><span class="nx">types</span><span class="p">)</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nv">t = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">t</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nv">tns = </span><span class="nx">rtypenamespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">types</span><span class="p">[</span><span class="nx">t</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nv">type = </span><span class="nx">tns</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nv">namespaces = </span><span class="p">(</span> <span class="nx">tns</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;.&quot;</span> <span class="p">).</span><span class="nx">sort</span><span class="p">();</span>

      <span class="err">// If event changes its type, use the special event handlers for the changed type</span>
      <span class="nv">special = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

      <span class="err">// If selector defined, determine special event api type, otherwise given type</span>
      <span class="nv">type = </span><span class="p">(</span> <span class="nx">selector</span> <span class="o">?</span> <span class="nv">special.delegateType : </span><span class="nx">special</span><span class="p">.</span><span class="nx">bindType</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>

      <span class="err">// Update special based on newly reset type</span>
      <span class="nv">special = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

      <span class="err">// handleObj is passed to all event handlers</span>
      <span class="nv">handleObj = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nv">type: </span><span class="nx">type</span><span class="p">,</span>
        <span class="nv">origType: </span><span class="nx">tns</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nv">data: </span><span class="nx">data</span><span class="p">,</span>
        <span class="nv">handler: </span><span class="nx">handler</span><span class="p">,</span>
        <span class="nv">guid: </span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">,</span>
        <span class="nv">selector: </span><span class="nx">selector</span><span class="p">,</span>
        <span class="nv">quick: </span><span class="nx">quickParse</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">),</span>
        <span class="nv">namespace: </span><span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
      <span class="p">},</span> <span class="nx">handleObjIn</span> <span class="p">);</span>

      <span class="err">// Init the event handler queue if we&#39;re the first</span>
      <span class="nv">handlers = </span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handlers</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">handlers = </span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nv">handlers.delegateCount = </span><span class="mi">0</span><span class="p">;</span>

        <span class="err">// Only use addEventListener/attachEvent if the special events handler returns false</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">setup</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Bind the global event handler to the element</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">special</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">handleObj.handler.guid = </span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Add to the element&#39;s handler list, delegates in front</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handlers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">delegateCount</span><span class="o">++</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">handlers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Keep track of which events have ever been used, for event optimization</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Nullify elem to prevent memory leaks in IE</span>
    <span class="nv">elem = </span><span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">global: </span><span class="p">{},</span>

  <span class="err">// Detach an event or set of events from an element</span>
  <span class="nv">remove: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">mappedTypes</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">var</span> <span class="nv">elemData = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
      <span class="nx">t</span><span class="p">,</span> <span class="nx">tns</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">origCount</span><span class="p">,</span>
      <span class="nx">j</span><span class="p">,</span> <span class="nx">events</span><span class="p">,</span> <span class="nx">special</span><span class="p">,</span> <span class="nx">handle</span><span class="p">,</span> <span class="nx">eventType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nv">events = </span><span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Once for each type.namespace in types; type may be omitted</span>
    <span class="nv">types = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">hoverHack</span><span class="p">(</span> <span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nv">t = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">t</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">tns = </span><span class="nx">rtypenamespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">types</span><span class="p">[</span><span class="nx">t</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nv">type = origType = </span><span class="nx">tns</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nv">namespaces = </span><span class="nx">tns</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

      <span class="err">// Unbind all events (on this namespace, if provided) for the element</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">t</span> <span class="p">],</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nv">special = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
      <span class="nv">type = </span><span class="p">(</span> <span class="nx">selector</span><span class="o">?</span> <span class="nv">special.delegateType : </span><span class="nx">special</span><span class="p">.</span><span class="nx">bindType</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nv">eventType = </span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nv">origCount = </span><span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nv">namespaces = </span><span class="nx">namespaces</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">).</span><span class="nx">sort</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>

      <span class="err">// Remove matching events</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">j = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">handleObj = </span><span class="nx">eventType</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">mappedTypes</span> <span class="o">||</span> <span class="nx">origType</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
           <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span> <span class="o">||</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
           <span class="p">(</span> <span class="o">!</span><span class="nx">namespaces</span> <span class="o">||</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
           <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">selector</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;**&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">eventType</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">eventType</span><span class="p">.</span><span class="nx">delegateCount</span><span class="o">--</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Remove generic event handler if we removed something and no more handlers exist</span>
      <span class="o">/</span><span class="err">/ (avoids potential for endless recursion during removal of special event handlers)</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">origCount</span> <span class="o">!==</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">delete</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Remove the expando if it&#39;s no longer used</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">handle = </span><span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">handle.elem = </span><span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ removeData also checks for emptiness and clears the expando if empty</span>
      <span class="o">/</span><span class="err">/ so use it instead of delete</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;events&quot;</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span> <span class="p">],</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// Events that are safe to short-circuit if no handlers are attached.</span>
  <span class="o">/</span><span class="err">/ Native DOM events should not be added, they may have inline handlers.</span>
  <span class="nv">customEvent: </span><span class="p">{</span>
    <span class="s2">&quot;getData&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;setData&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;changeData&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="nv">trigger: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">onlyHandlers</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Don&#39;t do events on text and comment nodes</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Event object or event type</span>
    <span class="nx">var</span> <span class="nv">type = </span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">event</span><span class="p">,</span>
      <span class="nv">namespaces = </span><span class="p">[],</span>
      <span class="nx">cache</span><span class="p">,</span> <span class="nx">exclusive</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">old</span><span class="p">,</span> <span class="nx">ontype</span><span class="p">,</span> <span class="nx">special</span><span class="p">,</span> <span class="nx">handle</span><span class="p">,</span> <span class="nx">eventPath</span><span class="p">,</span> <span class="nx">bubbleType</span><span class="p">;</span>

    <span class="err">// focus/blur morphs to focusin/out; ensure we&#39;re not firing them right now</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rfocusMorph</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;!&quot;</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Exclusive events trigger only for the exact event (no namespaces)</span>
      <span class="nv">type = </span><span class="nx">type</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="nv">exclusive = </span><span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;.&quot;</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Namespaced trigger; create a regexp to match event type in handle()</span>
      <span class="nv">namespaces = </span><span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
      <span class="nv">type = </span><span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">namespaces</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">customEvent</span><span class="p">[</span> <span class="nx">type</span> <span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// No jQuery handlers for this event type, and it can&#39;t have inline handlers</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Caller can pass in an Event, Object, or just an event type string</span>
    <span class="nv">event = </span><span class="k">typeof</span> <span class="nx">event</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span>
      <span class="err">// jQuery.Event object</span>
      <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">?</span> <span class="nv">event :</span>
      <span class="err">// Object literal</span>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="o">:</span>
      <span class="err">// Just the event type (string)</span>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>

    <span class="nv">event.type = </span><span class="nx">type</span><span class="p">;</span>
    <span class="nv">event.isTrigger = </span><span class="kc">true</span><span class="p">;</span>
    <span class="nv">event.exclusive = </span><span class="nx">exclusive</span><span class="p">;</span>
    <span class="nv">event.namespace = </span><span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;.&quot;</span> <span class="p">);</span>
    <span class="nv">event.namespace_re = </span><span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="o">?</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nv">ontype = </span><span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;:&quot;</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nv">type : </span><span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="err">// Handle a global trigger</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// TODO: Stop taunting the data cache; remove global events and always attach to document</span>
      <span class="nv">cache = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">cache</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">events</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Clean up the event in case it is being reused</span>
    <span class="nv">event.result = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">event.target = </span><span class="nx">elem</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Clone any incoming data and prepend the event, creating the handler arg list</span>
    <span class="nv">data = </span><span class="nx">data</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span> <span class="p">[];</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>

    <span class="err">// Allow special events to draw outside the lines</span>
    <span class="nv">special = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">&amp;&amp;</span> <span class="nx">special</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Determine event propagation path in advance, per W3C events spec (#9951)</span>
    <span class="o">/</span><span class="err">/ Bubble up to document, then to window; watch for a global ownerDocument var (#9724)</span>
    <span class="nv">eventPath = </span><span class="p">[[</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">special</span><span class="p">.</span><span class="nx">bindType</span> <span class="o">||</span> <span class="nx">type</span> <span class="p">]];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">onlyHandlers</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">noBubble</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nv">bubbleType = </span><span class="nx">special</span><span class="p">.</span><span class="nx">delegateType</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nv">cur = </span><span class="nx">rfocusMorph</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">bubbleType</span> <span class="o">+</span> <span class="nx">type</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">elem : </span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="nv">old = </span><span class="kc">null</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">cur</span><span class="p">;</span> <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">eventPath</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">bubbleType</span> <span class="p">]);</span>
        <span class="nv">old = </span><span class="nx">cur</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Only add window if we got to document (e.g., not plain obj or detached DOM)</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="o">&amp;&amp;</span> <span class="nx">old</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">eventPath</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">old</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="nx">old</span><span class="p">.</span><span class="nx">parentWindow</span> <span class="o">||</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">bubbleType</span> <span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Fire handlers on the event path</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">eventPath</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">();</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nv">cur = </span><span class="nx">eventPath</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
      <span class="nv">event.type = </span><span class="nx">eventPath</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>

      <span class="nv">handle = </span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">)[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="o">/</span><span class="err">/ Note that this is a bare JS function and not a jQuery handler</span>
      <span class="nv">handle = </span><span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nv">event.type = </span><span class="nx">type</span><span class="p">;</span>

    <span class="err">// If nobody prevented the default action, do it now</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">onlyHandlers</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">_default</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">_default</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;click&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// Call a native DOM method on the target with the same name name as the event.</span>
        <span class="o">/</span><span class="err">/ Can&#39;t use an .isFunction() check here because IE6/7 fails that test.</span>
        <span class="o">/</span><span class="err">/ Don&#39;t do default actions on window, that&#39;s where global variables be (#6170)</span>
        <span class="o">/</span><span class="err">/ IE&lt;9 dies on focus/blur to hidden element (#1486)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;focus&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;blur&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

          <span class="err">// Don&#39;t re-trigger an onFOO event when we call its FOO() method</span>
          <span class="nv">old = </span><span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Prevent re-triggering of the same event, since we already bubbled it above</span>
          <span class="nv">jQuery.event.triggered = </span><span class="nx">type</span><span class="p">;</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]();</span>
          <span class="nv">jQuery.event.triggered = </span><span class="kc">undefined</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">old</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">dispatch: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>

    <span class="err">// Make a writable jQuery.Event from the native event object</span>
    <span class="nv">event = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span> <span class="p">);</span>

    <span class="nx">var</span> <span class="nv">handlers = </span><span class="p">(</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">)[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[]),</span>
      <span class="nv">delegateCount = </span><span class="nx">handlers</span><span class="p">.</span><span class="nx">delegateCount</span><span class="p">,</span>
      <span class="nv">args = </span><span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
      <span class="nv">run_all = </span><span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">exclusive</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
      <span class="nv">handlerQueue = </span><span class="p">[],</span>
      <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">jqcur</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">selMatch</span><span class="p">,</span> <span class="nx">matched</span><span class="p">,</span> <span class="nx">matches</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">sel</span><span class="p">,</span> <span class="nx">related</span><span class="p">;</span>

    <span class="err">// Use the fix-ed jQuery.Event rather than the (read-only) native event</span>
    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
    <span class="nv">event.delegateTarget = </span><span class="k">this</span><span class="p">;</span>

    <span class="err">// Determine handlers that should run if there are delegated events</span>
    <span class="o">/</span><span class="err">/ Avoid disabled elements in IE (#6911) and non-left-click bubbling in Firefox (#3861)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">delegateCount</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;click&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// Pregenerate a single jQuery object for reuse with .is()</span>
      <span class="nv">jqcur = </span><span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
      <span class="nv">jqcur.context = </span><span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nv">cur = </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span> <span class="nx">cur</span> <span class="o">!=</span> <span class="k">this</span><span class="p">;</span> <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="k">this</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">selMatch = </span><span class="p">{};</span>
        <span class="nv">matches = </span><span class="p">[];</span>
        <span class="nx">jqcur</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">delegateCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">handleObj = </span><span class="nx">handlers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
          <span class="nv">sel = </span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">selMatch</span><span class="p">[</span> <span class="nx">sel</span> <span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">selMatch</span><span class="p">[</span> <span class="nx">sel</span> <span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
              <span class="nx">handleObj</span><span class="p">.</span><span class="nx">quick</span> <span class="o">?</span> <span class="nx">quickIs</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">quick</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">jqcur</span><span class="p">.</span><span class="o">is</span><span class="p">(</span> <span class="nx">sel</span> <span class="p">)</span>
            <span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">selMatch</span><span class="p">[</span> <span class="nx">sel</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">matches</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handlerQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nv">elem: </span><span class="nx">cur</span><span class="p">,</span> <span class="nv">matches: </span><span class="nx">matches</span> <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Add the remaining (directly-bound) handlers</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">delegateCount</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handlerQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nv">elem: </span><span class="k">this</span><span class="p">,</span> <span class="nv">matches: </span><span class="nx">handlers</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">delegateCount</span> <span class="p">)</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Run delegates first; they may want to stop propagation beneath us</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">handlerQueue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">();</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">matched = </span><span class="nx">handlerQueue</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
      <span class="nv">event.currentTarget = </span><span class="nx">matched</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nv">j = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">matches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span><span class="p">();</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">handleObj = </span><span class="nx">matched</span><span class="p">.</span><span class="nx">matches</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

        <span class="err">// Triggered event must either 1) be non-exclusive and have no namespace, or</span>
        <span class="o">/</span><span class="err">/ 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">run_all</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span><span class="p">)</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nv">event.data = </span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
          <span class="nv">event.handleObj = </span><span class="nx">handleObj</span><span class="p">;</span>

          <span class="nv">ret = </span><span class="p">(</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{}).</span><span class="nx">handle</span> <span class="o">||</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span> <span class="p">)</span>
              <span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">event.result = </span><span class="nx">ret</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Includes some event props shared by KeyEvent and MouseEvent</span>
  <span class="o">/</span><span class="err">/ *** attrChange attrName relatedNode srcElement  are not normalized, non-W3C, deprecated, will be removed in 1.8 ***</span>
  <span class="nv">props: </span><span class="s2">&quot;attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>

  <span class="nv">fixHooks: </span><span class="p">{},</span>

  <span class="nv">keyHooks: </span><span class="p">{</span>
    <span class="nv">props: </span><span class="s2">&quot;char charCode key keyCode&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>
    <span class="nv">filter: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// Add which for key events</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">event.which = </span><span class="nx">original</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nv">original.charCode : </span><span class="nx">original</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">mouseHooks: </span><span class="p">{</span>
    <span class="nv">props: </span><span class="s2">&quot;button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>
    <span class="nv">filter: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">eventDoc</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span>
        <span class="nv">button = </span><span class="nx">original</span><span class="p">.</span><span class="nx">button</span><span class="p">,</span>
        <span class="nv">fromElement = </span><span class="nx">original</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">;</span>

      <span class="err">// Calculate pageX/Y if missing and clientX/Y available</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">original</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">eventDoc = </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
        <span class="nv">doc = </span><span class="nx">eventDoc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>
        <span class="nv">body = </span><span class="nx">eventDoc</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>

        <span class="nv">event.pageX = </span><span class="nx">original</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">);</span>
        <span class="nv">event.pageY = </span><span class="nx">original</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Add relatedTarget, if necessary</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">&amp;&amp;</span> <span class="nx">fromElement</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">event.relatedTarget = </span><span class="nx">fromElement</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">?</span> <span class="nv">original.toElement : </span><span class="nx">fromElement</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Add which for click: 1 === left; 2 === middle; 3 === right</span>
      <span class="o">/</span><span class="err">/ Note: button is not normalized, so don&#39;t use it</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">&amp;&amp;</span> <span class="nx">button</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">event.which = </span><span class="p">(</span> <span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">2</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">fix: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Create a writable copy of the event object and normalize some properties</span>
    <span class="nx">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span>
      <span class="nv">originalEvent = </span><span class="nx">event</span><span class="p">,</span>
      <span class="nv">fixHook = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nv">copy = </span><span class="nx">fixHook</span><span class="p">.</span><span class="nx">props</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">props</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="nv">event = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">originalEvent</span> <span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="nx">copy</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">prop = </span><span class="nx">copy</span><span class="p">[</span> <span class="o">--</span><span class="nx">i</span> <span class="p">];</span>
      <span class="nx">event</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">originalEvent</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Fix target property, if necessary (#1925, IE 6/7/8 &amp; Safari2)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">event.target = </span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">srcElement</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Target should not be a text node (#504, Safari)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">event.target = </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ For mouse/key events; add metaKey if it&#39;s not there (#3368, IE6/7/8)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">event.metaKey = </span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">filter</span><span class="o">?</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">originalEvent</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">event</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">special: </span><span class="p">{</span>
    <span class="nv">ready: </span><span class="p">{</span>
      <span class="err">// Make sure the ready event is setup</span>
      <span class="nv">setup: </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">bindReady</span>
    <span class="p">},</span>

    <span class="nv">load: </span><span class="p">{</span>
      <span class="err">// Prevent triggered image.load events from bubbling to window.load</span>
      <span class="nv">noBubble: </span><span class="kc">true</span>
    <span class="p">},</span>

    <span class="nv">focus: </span><span class="p">{</span>
      <span class="nv">delegateType: </span><span class="s2">&quot;focusin&quot;</span>
    <span class="p">},</span>
    <span class="nv">blur: </span><span class="p">{</span>
      <span class="nv">delegateType: </span><span class="s2">&quot;focusout&quot;</span>
    <span class="p">},</span>

    <span class="nv">beforeunload: </span><span class="p">{</span>
      <span class="nv">setup: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// We only want to do this special case on windows</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nv">onbeforeunload = </span><span class="nx">eventHandle</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>

      <span class="nv">teardown: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">===</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nv">onbeforeunload = </span><span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">simulate: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">bubble</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Piggyback on a donor event to simulate a different one.</span>
    <span class="o">/</span><span class="err">/ Fake originalEvent to avoid donor&#39;s stopPropagation, but if the</span>
    <span class="o">/</span><span class="err">/ simulated event prevents default then we do the same on the donor.</span>
    <span class="nx">var</span> <span class="nv">e = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(),</span>
      <span class="nx">event</span><span class="p">,</span>
      <span class="p">{</span> <span class="nv">type: </span><span class="nx">type</span><span class="p">,</span>
        <span class="nv">isSimulated: </span><span class="kc">true</span><span class="p">,</span>
        <span class="nv">originalEvent: </span><span class="p">{}</span>
      <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">bubble</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="err">// Some plugins are using, but it&#39;s undocumented/deprecated and will be removed.</span>
<span class="o">/</span><span class="err">/ The 1.7 special event interface should provide all the hooks needed now.</span>
<span class="nv">jQuery.event.handle = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">;</span>

<span class="nv">jQuery.removeEvent = </span><span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">?</span>
  <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="o">:</span>
  <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="nv">jQuery.Event = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
  <span class="err">// Allow instantiation without the &#39;new&#39; keyword</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Event object</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">originalEvent = </span><span class="nx">src</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">type = </span><span class="nx">src</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

    <span class="err">// Events bubbling up the document may have been marked as prevented</span>
    <span class="o">/</span><span class="err">/ by a handler lower down the tree; reflect the correct value.</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">isDefaultPrevented = </span><span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultPrevented</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span>
      <span class="nx">src</span><span class="p">.</span><span class="nx">getPreventDefault</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">getPreventDefault</span><span class="p">()</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">returnTrue : </span><span class="nx">returnFalse</span><span class="p">;</span>

  <span class="err">// Event type</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">type = </span><span class="nx">src</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Put explicitly provided properties onto the event object</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Create a timestamp if incoming event doesn&#39;t have one</span>
  <span class="k">this</span><span class="p">.</span><span class="nv">timeStamp = </span><span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">timeStamp</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

  <span class="err">// Mark it as fixed</span>
  <span class="k">this</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">function</span> <span class="nx">returnFalse</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">function</span> <span class="nx">returnTrue</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding</span>
<span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">www</span><span class="p">.</span><span class="nx">w3</span><span class="p">.</span><span class="nx">org</span><span class="err">/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html</span>
<span class="nv">jQuery.Event.prototype = </span><span class="p">{</span>
  <span class="nv">preventDefault: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">isDefaultPrevented = </span><span class="nx">returnTrue</span><span class="p">;</span>

    <span class="nx">var</span> <span class="nv">e = </span><span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ if preventDefault exists run it on the original event</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="err">// otherwise set the returnValue property of the original event to false (IE)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">e.returnValue = </span><span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nv">stopPropagation: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">isPropagationStopped = </span><span class="nx">returnTrue</span><span class="p">;</span>

    <span class="nx">var</span> <span class="nv">e = </span><span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">/</span><span class="err">/ if stopPropagation exists run it on the original event</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="o">/</span><span class="err">/ otherwise set the cancelBubble property of the original event to true (IE)</span>
    <span class="nv">e.cancelBubble = </span><span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nv">stopImmediatePropagation: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">isImmediatePropagationStopped = </span><span class="nx">returnTrue</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nv">isDefaultPrevented: </span><span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nv">isPropagationStopped: </span><span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nv">isImmediatePropagationStopped: </span><span class="nx">returnFalse</span>
<span class="p">};</span>

<span class="err">// Create mouseenter/leave events using mouseover/out and event-time checks</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nv">mouseenter: </span><span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
  <span class="nv">mouseleave: </span><span class="s2">&quot;mouseout&quot;</span>
<span class="p">},</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">orig</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nv">delegateType: </span><span class="nx">fix</span><span class="p">,</span>
    <span class="nv">bindType: </span><span class="nx">fix</span><span class="p">,</span>

    <span class="nv">handle: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">target = </span><span class="k">this</span><span class="p">,</span>
        <span class="nv">related = </span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">,</span>
        <span class="nv">handleObj = </span><span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">,</span>
        <span class="nv">selector = </span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">ret</span><span class="p">;</span>

      <span class="err">// For mousenter/leave call the handler if related is outside the target.</span>
      <span class="o">/</span><span class="err">/ NB: No relatedTarget if the mouse left/entered the browser window</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">related</span> <span class="o">||</span> <span class="p">(</span><span class="nx">related</span> <span class="o">!==</span> <span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">related</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">event.type = </span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">;</span>
        <span class="nv">ret = </span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
        <span class="nv">event.type = </span><span class="nx">fix</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="err">// IE submit delegation</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">submitBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nv">jQuery.event.special.submit = </span><span class="p">{</span>
    <span class="nv">setup: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="err">// Only need this for delegated form submit events</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Lazy-add a submit handler when a descendant form may potentially be submitted</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;click._submit keypress._submit&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Node name check avoids a VML-related crash in IE (#9807)</span>
        <span class="nx">var</span> <span class="nv">elem = </span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
          <span class="nv">form = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">elem.form : </span><span class="kc">undefined</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">form</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">form</span><span class="p">.</span><span class="nx">_submit_attached</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">form</span><span class="p">,</span> <span class="s2">&quot;submit._submit&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="err">// If form was submitted by the user, bubble the event up the tree</span>
            <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span>
          <span class="nv">form._submit_attached = </span><span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="err">// return undefined since we don&#39;t need an event listener</span>
    <span class="p">},</span>

    <span class="nv">teardown: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="err">// Only need this for delegated form submit events</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Remove delegated handlers; cleanData eventually reaps submit handlers attached above</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;._submit&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ IE change delegation and checkbox/radio fix</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">changeBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nv">jQuery.event.special.change = </span><span class="p">{</span>

    <span class="nv">setup: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// IE doesn&#39;t fire change on a check/radio until blur; trigger it on click</span>
        <span class="o">/</span><span class="err">/ after a propertychange. Eat the blur-change in special.change.handle.</span>
        <span class="o">/</span><span class="err">/ This still fires onchange a second time for check/radio after blur.</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;propertychange._change&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">propertyName</span> <span class="o">===</span> <span class="s2">&quot;checked&quot;</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nv">_just_changed = </span><span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">});</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;click._change&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_just_changed</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nv">_just_changed = </span><span class="kc">false</span><span class="p">;</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="o">/</span><span class="err">/ Delegated event; lazy-add a change handler on descendant inputs</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;beforeactivate._change&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">elem = </span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">_change_attached</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;change._change&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isSimulated</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span>
          <span class="nv">elem._change_attached = </span><span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">},</span>

    <span class="nv">handle: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">elem = </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>

      <span class="err">// Swallow native change events from checkbox/radio, we already triggered them above</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isSimulated</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="o">||</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;radio&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nv">teardown: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;._change&quot;</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Create &quot;bubbling&quot; focus and blur events</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">focusinBubbles</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span> <span class="nv">focus: </span><span class="s2">&quot;focusin&quot;</span><span class="p">,</span> <span class="nv">blur: </span><span class="s2">&quot;focusout&quot;</span> <span class="p">},</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>

    <span class="err">// Attach a single capturing handler while someone wants focusin/focusout</span>
    <span class="nx">var</span> <span class="nv">attaches = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">handler = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">event</span> <span class="p">),</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">};</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">fix</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nv">setup: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">attaches</span><span class="o">++</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nv">teardown: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">--</span><span class="nx">attaches</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="kc">on</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="sr">/*INTERNAL*/</span> <span class="nx">one</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">origFn</span><span class="p">,</span> <span class="nx">type</span><span class="p">;</span>

    <span class="err">// Types can be a map of types/handlers</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// ( types-Object, selector, data )</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// ( types-Object, data )</span>
        <span class="nv">data = </span><span class="nx">selector</span><span class="p">;</span>
        <span class="nv">selector = </span><span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">types</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="kc">on</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span> <span class="nx">one</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// ( types, fn )</span>
      <span class="nv">fn = </span><span class="nx">selector</span><span class="p">;</span>
      <span class="nv">data = selector = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// ( types, selector, fn )</span>
        <span class="nv">fn = </span><span class="nx">data</span><span class="p">;</span>
        <span class="nv">data = </span><span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="err">// ( types, data, fn )</span>
        <span class="nv">fn = </span><span class="nx">data</span><span class="p">;</span>
        <span class="nv">data = </span><span class="nx">selector</span><span class="p">;</span>
        <span class="nv">selector = </span><span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">fn = </span><span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">origFn = </span><span class="nx">fn</span><span class="p">;</span>
      <span class="nv">fn = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Can use an empty set, since event contains the info</span>
        <span class="nx">jQuery</span><span class="p">().</span><span class="kc">off</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">origFn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">};</span>
      <span class="err">// Use same guid so caller can remove using origFn</span>
      <span class="nv">fn.guid = </span><span class="nx">origFn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="p">(</span> <span class="nv">origFn.guid = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nv">one: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kc">on</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="kc">off</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">types</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">handleObj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// ( event )  dispatched jQuery.Event</span>
      <span class="nx">var</span> <span class="nv">handleObj = </span><span class="nx">types</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">types</span><span class="p">.</span><span class="nx">delegateTarget</span> <span class="p">).</span><span class="kc">off</span><span class="p">(</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span><span class="o">?</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nv">handleObj.namespace : </span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span>
      <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// ( types-object [, selector] )</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">types</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="kc">off</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// ( types [, fn] )</span>
      <span class="nv">fn = </span><span class="nx">selector</span><span class="p">;</span>
      <span class="nv">selector = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">fn = </span><span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">bind: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kc">on</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">unbind: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kc">off</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">live: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">).</span><span class="kc">on</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nv">die: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">).</span><span class="kc">off</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">delegate: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kc">on</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">undelegate: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// ( namespace ) or ( selector, types [, fn] )</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="kc">off</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="kc">off</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">trigger: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nv">triggerHandler: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">toggle: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Save reference to arguments for access in closure</span>
    <span class="nx">var</span> <span class="nv">args = </span><span class="nx">arguments</span><span class="p">,</span>
      <span class="nv">guid = </span><span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">,</span>
      <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">toggler = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Figure out which function to execute</span>
        <span class="nx">var</span> <span class="nv">lastToggle = </span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;lastToggle&quot;</span> <span class="o">+</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">%</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;lastToggle&quot;</span> <span class="o">+</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span><span class="p">,</span> <span class="nx">lastToggle</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>

        <span class="err">// Make sure that clicks stop</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

        <span class="err">// and execute the function</span>
        <span class="k">return</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">lastToggle</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">};</span>

    <span class="err">// link all the functions, so any of them can unbind this click handler</span>
    <span class="nv">toggler.guid = </span><span class="nx">guid</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">].</span><span class="nv">guid = </span><span class="nx">guid</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span> <span class="nx">toggler</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">hover: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fnOver</span><span class="p">,</span> <span class="nx">fnOut</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">(</span> <span class="nx">fnOver</span> <span class="p">).</span><span class="nx">mouseleave</span><span class="p">(</span> <span class="nx">fnOut</span> <span class="o">||</span> <span class="nx">fnOver</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">(</span><span class="s2">&quot;blur focus focusin focusout load resize scroll unload click dblclick &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;change select submit keydown keypress keyup error contextmenu&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

  <span class="err">// Handle event binding</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">fn = </span><span class="nx">data</span><span class="p">;</span>
      <span class="nv">data = </span><span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="kc">on</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">rkeyEvent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyHooks</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">rmouseEvent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mouseHooks</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>



<span class="err">/*!</span>
 <span class="o">*</span> <span class="nx">Sizzle</span> <span class="nx">CSS</span> <span class="nx">Selector</span> <span class="nx">Engine</span>
 <span class="o">*</span>  <span class="nx">Copyright</span> <span class="mi">2011</span><span class="p">,</span> <span class="nx">The</span> <span class="nx">Dojo</span> <span class="nx">Foundation</span>
 <span class="o">*</span>  <span class="nx">Released</span> <span class="nx">under</span> <span class="nx">the</span> <span class="nx">MIT</span><span class="p">,</span> <span class="nx">BSD</span><span class="p">,</span> <span class="o">and</span> <span class="nx">GPL</span> <span class="nx">Licenses</span><span class="p">.</span>
 <span class="o">*</span>  <span class="nx">More</span> <span class="nv">information: </span><span class="nx">http</span><span class="o">:</span><span class="err">//sizzlejs.com/</span>
 <span class="o">*</span><span class="err">/</span>
<span class="p">(</span><span class="nx">function</span><span class="p">(){</span>

<span class="nx">var</span> <span class="nv">chunker = </span><span class="sr">/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|[&#39;&quot;][^&#39;&quot;]*[&#39;&quot;]|[^\[\]&#39;&quot;]+)+\]|\\.|[^ &gt;+~,(\[\\]+)+|[&gt;+~])(\s*,\s*)?((?:.|\r|\n)*)/g</span><span class="p">,</span>
  <span class="nv">expando = </span><span class="s2">&quot;sizcache&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
  <span class="nv">done = </span><span class="mi">0</span><span class="p">,</span>
  <span class="nv">toString = </span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span>
  <span class="nv">hasDuplicate = </span><span class="kc">false</span><span class="p">,</span>
  <span class="nv">baseHasDuplicate = </span><span class="kc">true</span><span class="p">,</span>
  <span class="nv">rBackslash = </span><span class="sr">/\\/g</span><span class="p">,</span>
  <span class="nv">rReturn = </span><span class="sr">/\r\n/g</span><span class="p">,</span>
  <span class="nv">rNonWord = </span><span class="sr">/\W/</span><span class="p">;</span>

<span class="err">// Here we check if the JavaScript engine is using some sort of</span>
<span class="o">/</span><span class="err">/ optimization where it does not always call our comparision</span>
<span class="o">/</span><span class="err">/ function. If that is the case, discard the hasDuplicate value.</span>
<span class="o">/</span><span class="err">/   Thus far that includes Google Chrome.</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">].</span><span class="nx">sort</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">baseHasDuplicate = </span><span class="kc">false</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">var</span> <span class="nv">Sizzle = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">results = </span><span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="nv">context = </span><span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>

  <span class="nx">var</span> <span class="nv">origContext = </span><span class="nx">context</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>
  
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">var</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">pop</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span>
    <span class="nv">prune = </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">contextXML = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">context</span> <span class="p">),</span>
    <span class="nv">parts = </span><span class="p">[],</span>
    <span class="nv">soFar = </span><span class="nx">selector</span><span class="p">;</span>
  
  <span class="err">// Reset the position of the chunker regexp (start from head)</span>
  <span class="nx">do</span> <span class="p">{</span>
    <span class="nx">chunker</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="nv">m = </span><span class="nx">chunker</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">soFar</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">m</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">soFar = </span><span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    
      <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
    
      <span class="k">if</span> <span class="p">(</span> <span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">extra = </span><span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="nx">m</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">origPOS</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">set = </span><span class="nx">posProcess</span><span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">set = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">?</span>
        <span class="p">[</span> <span class="nx">context</span> <span class="p">]</span> <span class="o">:</span>
        <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">context</span> <span class="p">);</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">selector = </span><span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">selector</span> <span class="o">+=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="p">}</span>
        
        <span class="nv">set = </span><span class="nx">posProcess</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="err">// Take a shortcut and set the context if the root selector is an ID</span>
    <span class="o">/</span><span class="err">/ (but not if it&#39;ll be faster if the inner selector is an ID)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">contextXML</span> <span class="o">&amp;&amp;</span>
        <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">ID</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">ID</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nv">ret = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">contextXML</span> <span class="p">);</span>
      <span class="nv">context = </span><span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span> <span class="o">?</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret = </span><span class="nx">seed</span> <span class="o">?</span>
        <span class="p">{</span> <span class="nv">expr: </span><span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nv">set: </span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span> <span class="p">}</span> <span class="o">:</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;~&quot;</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="nv">context.parentNode : </span><span class="nx">context</span><span class="p">,</span> <span class="nx">contextXML</span> <span class="p">);</span>

      <span class="nv">set = </span><span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span> <span class="o">?</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">checkSet = </span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">set</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">prune = </span><span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">cur = </span><span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="nv">pop = </span><span class="nx">cur</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">cur</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">cur = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">pop = </span><span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">pop</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">pop = </span><span class="nx">context</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">cur</span> <span class="p">](</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">pop</span><span class="p">,</span> <span class="nx">contextXML</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">checkSet = parts = </span><span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">checkSet</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">checkSet = </span><span class="nx">set</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">checkSet</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">cur</span> <span class="o">||</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">checkSet</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">prune</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">checkSet</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">results</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">origContext</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>
    <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span><span class="p">(</span> <span class="nx">results</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>

<span class="nv">Sizzle.uniqueSort = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">sortOrder</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">hasDuplicate = </span><span class="nx">baseHasDuplicate</span><span class="p">;</span>
    <span class="nx">results</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span> <span class="nx">sortOrder</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">hasDuplicate</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">results</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">results</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>

<span class="nv">Sizzle.matches = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">set</span> <span class="p">);</span>
<span class="p">};</span>

<span class="nv">Sizzle.matchesSelector = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">node</span><span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nv">Sizzle.find = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">left</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">len = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">type = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">order</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nv">match = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">leftMatch</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">left = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">match</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;\\&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
        <span class="nv">set = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">set</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">expr = </span><span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">set = </span><span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">?</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="o">:</span>
      <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nv">set: </span><span class="nx">set</span><span class="p">,</span> <span class="nv">expr: </span><span class="nx">expr</span> <span class="p">};</span>
<span class="p">};</span>

<span class="nv">Sizzle.filter = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="o">not</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">anyFound</span><span class="p">,</span>
    <span class="nx">type</span><span class="p">,</span> <span class="nx">found</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">filter</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span>
    <span class="nx">i</span><span class="p">,</span> <span class="nx">pass</span><span class="p">,</span>
    <span class="nv">old = </span><span class="nx">expr</span><span class="p">,</span>
    <span class="nv">result = </span><span class="p">[],</span>
    <span class="nv">curLoop = </span><span class="nx">set</span><span class="p">,</span>
    <span class="nv">isXMLFilter = </span><span class="nx">set</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>

  <span class="k">while</span> <span class="p">(</span> <span class="nx">expr</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nv">match = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">leftMatch</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">filter = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
        <span class="nv">left = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

        <span class="nv">anyFound = </span><span class="kc">false</span><span class="p">;</span>

        <span class="nx">match</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;\\&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">curLoop</span> <span class="o">===</span> <span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">result = </span><span class="p">[];</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">preFilter</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">match = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">preFilter</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="o">not</span><span class="p">,</span> <span class="nx">isXMLFilter</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">anyFound = found = </span><span class="kc">true</span><span class="p">;</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="nv">item = </span><span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">item</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">found = </span><span class="nx">filter</span><span class="p">(</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">curLoop</span> <span class="p">);</span>
              <span class="nv">pass = </span><span class="o">not</span> <span class="o">^</span> <span class="nx">found</span><span class="p">;</span>

              <span class="k">if</span> <span class="p">(</span> <span class="nx">inplace</span> <span class="o">&amp;&amp;</span> <span class="nx">found</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nv">anyFound = </span><span class="kc">true</span><span class="p">;</span>

                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>

              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">item</span> <span class="p">);</span>
                <span class="nv">anyFound = </span><span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">curLoop = </span><span class="nx">result</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nv">expr = </span><span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">anyFound</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[];</span>
          <span class="p">}</span>

          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Improper expression</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">expr</span> <span class="o">===</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">anyFound</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nv">old = </span><span class="nx">expr</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">curLoop</span><span class="p">;</span>
<span class="p">};</span>

<span class="nv">Sizzle.error = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">&quot;Syntax error, unrecognized expression: &quot;</span> <span class="o">+</span> <span class="nx">msg</span> <span class="p">);</span>
<span class="p">};</span>

<span class="err">/**</span>
 <span class="o">*</span> <span class="nx">Utility</span> <span class="nx">function</span> <span class="k">for</span> <span class="nx">retreiving</span> <span class="nx">the</span> <span class="nx">text</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">an</span> <span class="nx">array</span> <span class="k">of</span> <span class="nx">DOM</span> <span class="nx">nodes</span>
 <span class="o">*</span> <span class="nx">@param</span> <span class="p">{</span><span class="nb">Array</span><span class="o">|</span><span class="nx">Element</span><span class="p">}</span> <span class="nx">elem</span>
 <span class="o">*</span><span class="err">/</span>
<span class="nx">var</span> <span class="nv">getText = Sizzle.getText = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span>
    <span class="nv">nodeType = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>
    <span class="nv">ret = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Use textContent || innerText for elements</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Replace IE&#39;s carriage returns</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rReturn</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="err">// Traverse it&#39;s children</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span> <span class="nx">elem</span><span class="p">;</span> <span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

    <span class="err">// If no nodeType, this is expected to be an array</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="nv">node = </span><span class="nx">elem</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Do not traverse comment nodes</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">node</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">var</span> <span class="nv">Expr = Sizzle.selectors = </span><span class="p">{</span>
  <span class="nv">order: </span><span class="p">[</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;TAG&quot;</span> <span class="p">],</span>

  <span class="nv">match: </span><span class="p">{</span>
    <span class="nv">ID: </span><span class="sr">/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/</span><span class="p">,</span>
    <span class="nv">CLASS: </span><span class="sr">/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/</span><span class="p">,</span>
    <span class="nv">NAME: </span><span class="sr">/\[name=[&#39;&quot;]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)[&#39;&quot;]*\]/</span><span class="p">,</span>
    <span class="nv">ATTR: </span><span class="sr">/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:([&#39;&quot;])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/</span><span class="p">,</span>
    <span class="nv">TAG: </span><span class="sr">/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/</span><span class="p">,</span>
    <span class="nv">CHILD: </span><span class="sr">/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/</span><span class="p">,</span>
    <span class="nv">POS: </span><span class="sr">/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/</span><span class="p">,</span>
    <span class="nv">PSEUDO: </span><span class="sr">/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\(([&#39;&quot;]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/</span>
  <span class="p">},</span>

  <span class="nv">leftMatch: </span><span class="p">{},</span>

  <span class="nv">attrMap: </span><span class="p">{</span>
    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span><span class="p">,</span>
    <span class="s2">&quot;for&quot;</span><span class="o">:</span> <span class="s2">&quot;htmlFor&quot;</span>
  <span class="p">},</span>

  <span class="nv">attrHandle: </span><span class="p">{</span>
    <span class="nv">href: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;href&quot;</span> <span class="p">);</span>
    <span class="p">},</span>
    <span class="nv">type: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">relative: </span><span class="p">{</span>
    <span class="s2">&quot;+&quot;</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span><span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span><span class="p">){</span>
      <span class="nx">var</span> <span class="nv">isPartStr = </span><span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nv">isTag = </span><span class="nx">isPartStr</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">),</span>
        <span class="nv">isPartStrNotTag = </span><span class="nx">isPartStr</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isTag</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isTag</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">part = </span><span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nv">elem = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{}</span>

          <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">isPartStrNotTag</span> <span class="o">||</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">part</span> <span class="o">?</span>
            <span class="nx">elem</span> <span class="o">||</span> <span class="kc">false</span> <span class="o">:</span>
            <span class="nx">elem</span> <span class="o">===</span> <span class="nx">part</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isPartStrNotTag</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">elem</span><span class="p">,</span>
        <span class="nv">isPartStr = </span><span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
        <span class="nv">l = </span><span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isPartStr</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">part = </span><span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">elem = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">var</span> <span class="nv">parent = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
            <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">part</span> <span class="o">?</span> <span class="nv">parent : </span><span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">elem = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">isPartStr</span> <span class="o">?</span>
              <span class="nv">elem.parentNode :</span>
              <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">===</span> <span class="nx">part</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">isPartStr</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span><span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">isXML</span><span class="p">){</span>
      <span class="nx">var</span> <span class="nx">nodeCheck</span><span class="p">,</span>
        <span class="nv">doneName = </span><span class="nx">done</span><span class="o">++</span><span class="p">,</span>
        <span class="nv">checkFn = </span><span class="nx">dirCheck</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">part = </span><span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
        <span class="nv">nodeCheck = </span><span class="nx">part</span><span class="p">;</span>
        <span class="nv">checkFn = </span><span class="nx">dirNodeCheck</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">checkFn</span><span class="p">(</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="s2">&quot;~&quot;</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">nodeCheck</span><span class="p">,</span>
        <span class="nv">doneName = </span><span class="nx">done</span><span class="o">++</span><span class="p">,</span>
        <span class="nv">checkFn = </span><span class="nx">dirCheck</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">part = </span><span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
        <span class="nv">nodeCheck = </span><span class="nx">part</span><span class="p">;</span>
        <span class="nv">checkFn = </span><span class="nx">dirNodeCheck</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">checkFn</span><span class="p">(</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">find: </span><span class="p">{</span>
    <span class="nv">ID: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">m = </span><span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="err">// Check parentNode to catch when Blackberry 4.6 returns</span>
        <span class="o">/</span><span class="err">/ nodes that are no longer in the document #6963</span>
        <span class="k">return</span> <span class="nx">m</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nv">NAME: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">ret = </span><span class="p">[],</span>
          <span class="nv">results = </span><span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nv">TAG: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nv">preFilter: </span><span class="p">{</span>
    <span class="nv">CLASS: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="o">not</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">match = </span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nv">elem = </span><span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">not</span> <span class="o">^</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\t\n\r]/g</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">ID: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nv">TAG: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="nv">CHILD: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;nth&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\+|\s*/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

        <span class="err">// parse equations like &#39;even&#39;, &#39;odd&#39;, &#39;5&#39;, &#39;2n&#39;, &#39;3n+2&#39;, &#39;4n-1&#39;, &#39;-n+6&#39;</span>
        <span class="nx">var</span> <span class="nv">test = </span><span class="sr">/(-?)(\d*)(?:n([+\-]?\d*))?/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span>
          <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;even&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;2n&quot;</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;odd&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;2n+1&quot;</span> <span class="o">||</span>
          <span class="o">!</span><span class="sr">/\D/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;0n+&quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>

        <span class="err">// calculate the numbers (first)n+(last) including if they are negative</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">test</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nx">test</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">))</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">test</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ TODO: Move to normal caching system</span>
      <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">done</span><span class="o">++</span><span class="p">;</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">ATTR: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="o">not</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
      
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrMap</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrMap</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Handle if an un-quoted value was used</span>
      <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;~=&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">PSEUDO: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="o">not</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;not&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// If we&#39;re dealing with a complex expression, or a simple one</span>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">chunker</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="sr">/^\w/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="kc">true</span> <span class="o">^</span> <span class="o">not</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">);</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">POS</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">CHILD</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">POS: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  
  <span class="nv">filters: </span><span class="p">{</span>
    <span class="nv">enabled: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">disabled: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">checked: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>
    
    <span class="nv">selected: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Accessing this property makes selected-by-default</span>
      <span class="o">/</span><span class="err">/ options in Safari work properly</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selected</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">parent: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">empty: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">has: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">header: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="sr">/h\d/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nv">text: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">attr = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span> <span class="p">),</span> <span class="nv">type = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
      <span class="err">// IE6 and 7 will map elem.type to &#39;text&#39; for new HTML5 types (search, etc) </span>
      <span class="o">/</span><span class="err">/ use getAttribute instead to test this case</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;text&quot;</span> <span class="o">===</span> <span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">attr</span> <span class="o">===</span> <span class="nx">type</span> <span class="o">||</span> <span class="nx">attr</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nv">radio: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;radio&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">checkbox: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">file: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;file&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">password: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;password&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">submit: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;submit&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">image: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;image&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">reset: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;reset&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">button: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;button&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">input: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="sr">/input|select|textarea|button/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nv">focus: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nv">setFilters: </span><span class="p">{</span>
    <span class="nv">first: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">last: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">even: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">odd: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">lt: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">gt: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">nth: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">eq: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nv">filter: </span><span class="p">{</span>
    <span class="nv">PSEUDO: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nv">filter = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">filter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;contains&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">||</span> <span class="nx">getText</span><span class="p">([</span> <span class="nx">elem</span> <span class="p">])</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;not&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="o">not</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">j = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="o">not</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">not</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nv">CHILD: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">last</span><span class="p">,</span>
        <span class="nx">doneName</span><span class="p">,</span> <span class="nx">parent</span><span class="p">,</span> <span class="nx">cache</span><span class="p">,</span>
        <span class="nx">count</span><span class="p">,</span> <span class="nx">diff</span><span class="p">,</span>
        <span class="nv">type = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nv">node = </span><span class="nx">elem</span><span class="p">;</span>

      <span class="k">switch</span> <span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">case</span> <span class="s2">&quot;only&quot;</span><span class="o">:</span>
        <span class="nx">case</span> <span class="s2">&quot;first&quot;</span><span class="o">:</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nv">node = </span><span class="nx">node</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)</span> <span class="p">)</span>  <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span> 
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> 
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;first&quot;</span> <span class="p">)</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> 
          <span class="p">}</span>

          <span class="nv">node = </span><span class="nx">elem</span><span class="p">;</span>

        <span class="nx">case</span> <span class="s2">&quot;last&quot;</span><span class="o">:</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nv">node = </span><span class="nx">node</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="p">)</span>  <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span> 
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> 
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

        <span class="nx">case</span> <span class="s2">&quot;nth&quot;</span><span class="o">:</span>
          <span class="nv">first = </span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
          <span class="nv">last = </span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">last</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
          
          <span class="nv">doneName = </span><span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
          <span class="nv">parent = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
  
          <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">parent</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">!==</span> <span class="nx">doneName</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeIndex</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">count = </span><span class="mi">0</span><span class="p">;</span>
            
            <span class="k">for</span> <span class="p">(</span> <span class="nv">node = </span><span class="nx">parent</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span> <span class="nx">node</span><span class="p">;</span> <span class="nv">node = </span><span class="nx">node</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nv">node.nodeIndex = </span><span class="o">++</span><span class="nx">count</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span> 

            <span class="nx">parent</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">doneName</span><span class="p">;</span>
          <span class="p">}</span>
          
          <span class="nv">diff = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeIndex</span> <span class="o">-</span> <span class="nx">last</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">diff</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">diff</span> <span class="o">%</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">diff</span> <span class="err">/ first &gt;= 0 );</span>
          <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nv">ID: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">TAG: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>
    
    <span class="nv">CLASS: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">ATTR: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nv">result = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">attr</span> <span class="o">?</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">?</span>
          <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">](</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">:</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">),</span>
        <span class="nv">value = </span><span class="nx">result</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nv">type = </span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="nv">check = </span><span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

      <span class="k">return</span> <span class="nx">result</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;!=&quot;</span> <span class="o">:</span>
        <span class="o">!</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">attr</span> <span class="o">?</span>
        <span class="nx">result</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">===</span> <span class="nv">check :</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;*=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;~=&quot;</span> <span class="o">?</span>
        <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="o">!</span><span class="nx">check</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;!=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">!==</span> <span class="nv">check :</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;^=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;$=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">check</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">===</span> <span class="nv">check :</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;|=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">||</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">check</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">:</span>
        <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">POS: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">name = </span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="nv">filter = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">setFilters</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">filter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">var</span> <span class="nv">origPOS = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">POS</span><span class="p">,</span>
  <span class="nv">fescape = </span><span class="nx">function</span><span class="p">(</span><span class="nx">all</span><span class="p">,</span> <span class="nx">num</span><span class="p">){</span>
    <span class="k">return</span> <span class="s2">&quot;\\&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">num</span> <span class="o">-</span> <span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

<span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">source</span> <span class="o">+</span> <span class="p">(</span><span class="sr">/(?![^\[]*\])(?![^\(]*\))/</span><span class="p">.</span><span class="nx">source</span><span class="p">)</span> <span class="p">);</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">leftMatch</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="sr">/(^(?:.|\r|\n)*?)/</span><span class="p">.</span><span class="nx">source</span> <span class="o">+</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">source</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\(\d+)/g</span><span class="p">,</span> <span class="nx">fescape</span><span class="p">)</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nx">var</span> <span class="nv">makeArray = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">array = </span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">};</span>

<span class="err">// Perform a simple check to determine if the browser is capable of</span>
<span class="o">/</span><span class="err">/ converting a NodeList to an array using builtin methods.</span>
<span class="o">/</span><span class="err">/ Also verifies that the returned array holds DOM nodes</span>
<span class="o">/</span><span class="err">/ (which is not the case in the Blackberry browser)</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span><span class="p">;</span>

<span class="err">// Provide a fallback method if it does not work</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">makeArray = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
      <span class="nv">ret = </span><span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">l = </span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">var</span> <span class="nx">sortOrder</span><span class="p">,</span> <span class="nx">siblingCheck</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">sortOrder = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">hasDuplicate = </span><span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="o">||</span> <span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nv">sortOrder = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// The nodes are identical, we can exit early</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">hasDuplicate = </span><span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

    <span class="err">// Fallback to using sourceIndex (in IE) if it&#39;s available on both nodes</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">sourceIndex</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nx">al</span><span class="p">,</span> <span class="nx">bl</span><span class="p">,</span>
      <span class="nv">ap = </span><span class="p">[],</span>
      <span class="nv">bp = </span><span class="p">[],</span>
      <span class="nv">aup = </span><span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
      <span class="nv">bup = </span><span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
      <span class="nv">cur = </span><span class="nx">aup</span><span class="p">;</span>

    <span class="err">// If the nodes are siblings (or identical) we can do a quick check</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">aup</span> <span class="o">===</span> <span class="nx">bup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">);</span>

    <span class="err">// If no parents were found then the nodes are disconnected</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">aup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">bup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Otherwise they&#39;re somewhere else in the tree so we need</span>
    <span class="o">/</span><span class="err">/ to build up a full list of the parentNodes for comparison</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ap</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">cur = </span><span class="nx">bup</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">bp</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">al = </span><span class="nx">ap</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="nv">bl = </span><span class="nx">bp</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="err">// Start walking down the tree looking for a discrepancy</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">al</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">bl</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ We ended someplace up the tree so do a sibling check</span>
    <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">al</span> <span class="o">?</span>
      <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="nv">siblingCheck = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">cur = </span><span class="nx">a</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Check to see if the browser returns elements by name when</span>
<span class="o">/</span><span class="err">/ querying by getElementById (and provide a workaround)</span>
<span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
  <span class="err">// We&#39;re going to inject a fake input element with a specified name</span>
  <span class="nx">var</span> <span class="nv">form = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span>
    <span class="nv">id = </span><span class="s2">&quot;script&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nv">root = </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

  <span class="nv">form.innerHTML = </span><span class="s2">&quot;&lt;a name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;/&gt;&quot;</span><span class="p">;</span>

  <span class="err">// Inject it into the root element, check its status, and remove it quickly</span>
  <span class="nx">root</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">form</span><span class="p">,</span> <span class="nx">root</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>

  <span class="err">// The workaround has to do additional checks after a getElementById</span>
  <span class="o">/</span><span class="err">/ Which slows things down for other browsers (hence the branching)</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">Expr.find.ID = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">m = </span><span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

        <span class="k">return</span> <span class="nx">m</span> <span class="o">?</span>
          <span class="nx">m</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">m</span><span class="p">.</span><span class="nx">getAttributeNode</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">).</span><span class="nx">nodeValue</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span>
            <span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="o">:</span>
            <span class="kc">undefined</span> <span class="o">:</span>
          <span class="p">[];</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="nv">Expr.filter.ID = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">node = </span><span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">===</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">root</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">form</span> <span class="p">);</span>

  <span class="err">// release memory in IE</span>
  <span class="nv">root = form = </span><span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>

<span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
  <span class="err">// Check to see if the browser returns only elements</span>
  <span class="o">/</span><span class="err">/ when doing getElementsByTagName(&quot;*&quot;)</span>

  <span class="o">/</span><span class="err">/ Create a fake element</span>
  <span class="nx">var</span> <span class="nv">div = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createComment</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">);</span>

  <span class="err">// Make sure no comments are found</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">Expr.find.TAG = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">results = </span><span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>

      <span class="err">// Filter out possible comments</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">tmp = </span><span class="p">[];</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">tmp</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nv">results = </span><span class="nx">tmp</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Check to see if an attribute returns normalized href attributes</span>
  <span class="nv">div.innerHTML = </span><span class="s2">&quot;&lt;a href=&#39;#&#39;&gt;&lt;/a&gt;&quot;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">getAttribute</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;#&quot;</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nv">Expr.attrHandle.href = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ release memory in IE</span>
  <span class="nv">div = </span><span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
    <span class="nx">var</span> <span class="nv">oldSizzle = </span><span class="nx">Sizzle</span><span class="p">,</span>
      <span class="nv">div = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span>
      <span class="nv">id = </span><span class="s2">&quot;__sizzle__&quot;</span><span class="p">;</span>

    <span class="nv">div.innerHTML = </span><span class="s2">&quot;&lt;p class=&#39;TEST&#39;&gt;&lt;/p&gt;&quot;</span><span class="p">;</span>

    <span class="err">// Safari can&#39;t handle uppercase or unicode characters when</span>
    <span class="o">/</span><span class="err">/ in quirks mode.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;.TEST&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="nv">Sizzle = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">context = </span><span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>

      <span class="err">// Only use querySelectorAll on non-XML documents</span>
      <span class="o">/</span><span class="err">/ (ID selectors don&#39;t work in non-HTML documents)</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// See if we find a selector to speed up</span>
        <span class="nx">var</span> <span class="nv">match = </span><span class="sr">/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">query</span> <span class="p">);</span>
        
        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Speed-up: Sizzle(&quot;TAG&quot;)</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">query</span> <span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
          
          <span class="err">// Speed-up: Sizzle(&quot;.CLASS&quot;)</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">CLASS</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Speed-up: Sizzle(&quot;body&quot;)</span>
          <span class="o">/</span><span class="err">/ The body element only exists once, optimize finding it</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">query</span> <span class="o">===</span> <span class="s2">&quot;body&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="p">[</span> <span class="nx">context</span><span class="p">.</span><span class="nx">body</span> <span class="p">],</span> <span class="nx">extra</span> <span class="p">);</span>
            
          <span class="err">// Speed-up: Sizzle(&quot;#ID&quot;)</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">var</span> <span class="nv">elem = </span><span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">);</span>

            <span class="err">// Check parentNode to catch when Blackberry 4.6 returns</span>
            <span class="o">/</span><span class="err">/ nodes that are no longer in the document #6963</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
              <span class="err">// Handle the case where IE and Opera return items</span>
              <span class="o">/</span><span class="err">/ by name instead of ID</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">],</span> <span class="nx">extra</span> <span class="p">);</span>
              <span class="p">}</span>
              
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">extra</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          
          <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">query</span><span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">qsaError</span><span class="p">)</span> <span class="p">{}</span>

        <span class="o">/</span><span class="err">/ qSA works strangely on Element-rooted queries</span>
        <span class="o">/</span><span class="err">/ We can work around this by specifying an extra ID on the root</span>
        <span class="o">/</span><span class="err">/ and working up from there (Thanks to Andrew Dupont for the technique)</span>
        <span class="o">/</span><span class="err">/ IE 8 doesn&#39;t work on object elements</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nv">oldContext = </span><span class="nx">context</span><span class="p">,</span>
            <span class="nv">old = </span><span class="nx">context</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span> <span class="p">),</span>
            <span class="nv">nid = </span><span class="nx">old</span> <span class="o">||</span> <span class="nx">id</span><span class="p">,</span>
            <span class="nv">hasParent = </span><span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
            <span class="nv">relativeHierarchySelector = </span><span class="sr">/^\s*[+~]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">query</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">nid</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">nid = </span><span class="nx">nid</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">relativeHierarchySelector</span> <span class="o">&amp;&amp;</span> <span class="nx">hasParent</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">context = </span><span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">try</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">relativeHierarchySelector</span> <span class="o">||</span> <span class="nx">hasParent</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;[id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">nid</span> <span class="o">+</span> <span class="s2">&quot;&#39;] &quot;</span> <span class="o">+</span> <span class="nx">query</span> <span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">pseudoError</span><span class="p">)</span> <span class="p">{</span>
          <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">oldContext</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    
      <span class="k">return</span> <span class="nx">oldSizzle</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">seed</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">oldSizzle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">Sizzle</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">oldSizzle</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ release memory in IE</span>
    <span class="nv">div = </span><span class="kc">null</span><span class="p">;</span>
  <span class="p">})();</span>
<span class="p">}</span>

<span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
  <span class="nx">var</span> <span class="nv">html = </span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
    <span class="nv">matches = </span><span class="nx">html</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">||</span> <span class="nx">html</span><span class="p">.</span><span class="nx">mozMatchesSelector</span> <span class="o">||</span> <span class="nx">html</span><span class="p">.</span><span class="nx">webkitMatchesSelector</span> <span class="o">||</span> <span class="nx">html</span><span class="p">.</span><span class="nx">msMatchesSelector</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">matches</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Check to see if it&#39;s possible to do matchesSelector</span>
    <span class="o">/</span><span class="err">/ on a disconnected node (IE 9 fails this)</span>
    <span class="nx">var</span> <span class="nv">disconnectedMatch = </span><span class="o">!</span><span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span>
      <span class="nv">pseudoWorks = </span><span class="kc">false</span><span class="p">;</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="err">// This should fail with an exception</span>
      <span class="o">/</span><span class="err">/ Gecko does not error, returns false instead</span>
      <span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span> <span class="s2">&quot;[test!=&#39;&#39;]:sizzle&quot;</span> <span class="p">);</span>
  
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">pseudoError</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">pseudoWorks = </span><span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">Sizzle.matchesSelector = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Make sure that attribute selectors are quoted</span>
      <span class="nv">expr = </span><span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\=\s*([^&#39;&quot;\]]*)\s*\]/g</span><span class="p">,</span> <span class="s2">&quot;=&#39;$1&#39;]&quot;</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span> 
          <span class="k">if</span> <span class="p">(</span> <span class="nx">pseudoWorks</span> <span class="o">||</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">PSEUDO</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sr">/!=/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">);</span>

            <span class="err">// IE 9&#39;s matchesSelector returns false on disconnected nodes</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">||</span> <span class="o">!</span><span class="nx">disconnectedMatch</span> <span class="o">||</span>
                <span class="err">// As well, disconnected nodes are said to be in a document</span>
                <span class="o">/</span><span class="err">/ fragment in IE 9, so check for that</span>
                <span class="nx">node</span><span class="p">.</span><span class="nb">document</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">node</span><span class="p">]).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">})();</span>

<span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
  <span class="nx">var</span> <span class="nv">div = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>

  <span class="nv">div.innerHTML = </span><span class="s2">&quot;&lt;div class=&#39;test e&#39;&gt;&lt;/div&gt;&lt;div class=&#39;test&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">;</span>

  <span class="err">// Opera can&#39;t find a second classname (in 9.6)</span>
  <span class="o">/</span><span class="err">/ Also, make sure that getElementsByClassName actually exists</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="o">||</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Safari caches class attributes, doesn&#39;t catch changes (in 3.2)</span>
  <span class="nv">div.lastChild.className = </span><span class="s2">&quot;e&quot;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;CLASS&quot;</span><span class="p">);</span>
  <span class="nv">Expr.find.CLASS = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="err">// release memory in IE</span>
  <span class="nv">div = </span><span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>

<span class="nx">function</span> <span class="nx">dirNodeCheck</span><span class="p">(</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">match = </span><span class="kc">false</span><span class="p">;</span>

      <span class="nv">elem = </span><span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">doneName</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">match = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">sizset</span><span class="p">];</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">){</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">doneName</span><span class="p">;</span>
          <span class="nv">elem.sizset = </span><span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">match = </span><span class="nx">elem</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">elem = </span><span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">function</span> <span class="nx">dirCheck</span><span class="p">(</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">match = </span><span class="kc">false</span><span class="p">;</span>
      
      <span class="nv">elem = </span><span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">doneName</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">match = </span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">sizset</span><span class="p">];</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">doneName</span><span class="p">;</span>
            <span class="nv">elem.sizset = </span><span class="nx">i</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">cur</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">match = </span><span class="kc">true</span><span class="p">;</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="p">[</span><span class="nx">elem</span><span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">match = </span><span class="nx">elem</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nv">elem = </span><span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">contains</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">Sizzle.contains = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">contains</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="kc">true</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">Sizzle.contains = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">16</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nv">Sizzle.contains = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nv">Sizzle.isXML = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="err">// documentElement is verified for cases where it doesn&#39;t yet exist</span>
  <span class="o">/</span><span class="err">/ (such as loading iframes in IE - #4833) </span>
  <span class="nx">var</span> <span class="nv">documentElement = </span><span class="p">(</span><span class="nx">elem</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nv">elem : </span><span class="mi">0</span><span class="p">).</span><span class="nx">documentElement</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">documentElement</span> <span class="o">?</span> <span class="nx">documentElement</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">!==</span> <span class="s2">&quot;HTML&quot;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">var</span> <span class="nv">posProcess = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">match</span><span class="p">,</span>
    <span class="nv">tmpSet = </span><span class="p">[],</span>
    <span class="nv">later = </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nv">root = </span><span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="p">[</span><span class="nx">context</span><span class="p">]</span> <span class="o">:</span> <span class="nx">context</span><span class="p">;</span>

  <span class="err">// Position selectors must be done after the filter</span>
  <span class="o">/</span><span class="err">/ And so must :not(positional) so we move all PSEUDOs to the end</span>
  <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nv">match = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">PSEUDO</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">later</span> <span class="o">+=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nv">selector = </span><span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">PSEUDO</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nv">selector = </span><span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span><span class="nx">selector</span><span class="p">]</span> <span class="o">?</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">:</span> <span class="nx">selector</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">root</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">root</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">tmpSet</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">later</span><span class="p">,</span> <span class="nx">tmpSet</span> <span class="p">);</span>
<span class="p">};</span>

<span class="err">// EXPOSE</span>
<span class="o">/</span><span class="err">/ Override sizzle attribute retrieval</span>
<span class="nv">Sizzle.attr = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span><span class="p">;</span>
<span class="nv">Sizzle.selectors.attrMap = </span><span class="p">{};</span>
<span class="nv">jQuery.find = </span><span class="nx">Sizzle</span><span class="p">;</span>
<span class="nv">jQuery.expr = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">selectors</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">[</span><span class="s2">&quot;:&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">;</span>
<span class="nv">jQuery.unique = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span><span class="p">;</span>
<span class="nv">jQuery.text = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span><span class="p">;</span>
<span class="nv">jQuery.isXMLDoc = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">;</span>
<span class="nv">jQuery.contains = </span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span><span class="p">;</span>


<span class="p">})();</span>


<span class="nx">var</span> <span class="nv">runtil = </span><span class="sr">/Until$/</span><span class="p">,</span>
  <span class="nv">rparentsprev = </span><span class="sr">/^(?:parents|prevUntil|prevAll)/</span><span class="p">,</span>
  <span class="err">// Note: This RegExp should be improved, or likely pulled from Sizzle</span>
  <span class="nv">rmultiselector = </span><span class="sr">/,/</span><span class="p">,</span>
  <span class="nv">isSimple = </span><span class="sr">/^.[^:#\[\.,]*$/</span><span class="p">,</span>
  <span class="nv">slice = </span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span>
  <span class="nv">POS = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">POS</span><span class="p">,</span>
  <span class="err">// methods guaranteed to produce a unique set when starting from a unique set</span>
  <span class="nv">guaranteedUnique = </span><span class="p">{</span>
    <span class="nv">children: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">contents: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">next: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">prev: </span><span class="kc">true</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">find: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">self = </span><span class="k">this</span><span class="p">,</span>
      <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">self</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">self</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">ret = </span><span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;find&quot;</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nx">length</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">r</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">length = </span><span class="nx">ret</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">ret</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Make sure that the results are unique</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nv">n = </span><span class="nx">length</span><span class="p">;</span> <span class="nx">n</span> <span class="o">&lt;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nv">r = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">r</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span> <span class="o">===</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">ret</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">n</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">has: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">targets = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">targets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">targets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="o">not:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">winnow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span> <span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">filter: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">winnow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span> <span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="o">is:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!!</span><span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> 
      <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
        <span class="err">// If this is a positional selector, check membership in the returned set</span>
        <span class="o">/</span><span class="err">/ so $(&quot;p:first&quot;).is(&quot;p:last&quot;) won&#39;t return true for a doc with two &quot;p&quot;.</span>
        <span class="nx">POS</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">?</span> 
          <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">).</span><span class="nx">index</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">:</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">closest: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">ret = </span><span class="p">[],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nv">cur = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    
    <span class="err">// Array (deprecated as of jQuery 1.7)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">selectors</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">level = </span><span class="mi">1</span><span class="p">;</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span> <span class="o">!==</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">).</span><span class="o">is</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nv">selector: </span><span class="nx">selectors</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nv">elem: </span><span class="nx">cur</span><span class="p">,</span> <span class="nv">level: </span><span class="nx">level</span> <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
        <span class="nx">level</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ String</span>
    <span class="nx">var</span> <span class="nv">pos = </span><span class="nx">POS</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selectors</span> <span class="p">)</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selectors</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">)</span> <span class="o">:</span>
        <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">cur = </span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">pos</span> <span class="o">?</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">cur</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">(</span><span class="nx">cur</span><span class="p">,</span> <span class="nx">selectors</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">cur = </span><span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cur</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cur</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">context</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nv">ret = </span><span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="s2">&quot;closest&quot;</span><span class="p">,</span> <span class="nx">selectors</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Determine the position of an element within</span>
  <span class="o">/</span><span class="err">/ the matched set of elements</span>
  <span class="nv">index: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

    <span class="err">// No argument, return index in parent</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevAll</span><span class="p">().</span><span class="nv">length : </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ index in selector</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Locate the position of the desired element</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span>
      <span class="err">// If it receives a jQuery object, the first element is used</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">add: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">set = </span><span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">selector</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nv">all = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(),</span> <span class="nx">set</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">isDisconnected</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">isDisconnected</span><span class="p">(</span> <span class="nx">all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nv">all :</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">all</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">andSelf: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// A painfully simple check to see if an element is disconnected</span>
<span class="o">/</span><span class="err">/ from a document (should be improved, where feasible).</span>
<span class="nx">function</span> <span class="nx">isDisconnected</span><span class="p">(</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nx">node</span> <span class="o">||</span> <span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nv">parent: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">parent = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="o">?</span> <span class="nv">parent : </span><span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nv">parents: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parentNode&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">parentsUntil: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">next: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nth</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">prev: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nth</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">nextAll: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">prevAll: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">nextUntil: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">prevUntil: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">siblings: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">children: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nv">contents: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;iframe&quot;</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">contentDocument</span> <span class="o">||</span> <span class="nv">elem.contentWindow.document :</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">until</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">runtil</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">selector = </span><span class="nx">until</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nv">ret = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">guaranteedUnique</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">rmultiselector</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">rparentsprev</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret = </span><span class="nx">ret</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">filter: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">elems</span><span class="p">,</span> <span class="o">not</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">not</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">expr = </span><span class="s2">&quot;:not(&quot;</span> <span class="o">+</span> <span class="nx">expr</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">(</span><span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">expr</span><span class="p">)</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[]</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">elems</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">dir: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">matched = </span><span class="p">[],</span>
      <span class="nv">cur = </span><span class="nx">elem</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">];</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">until</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">).</span><span class="o">is</span><span class="p">(</span> <span class="nx">until</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matched</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="nv">cur = </span><span class="nx">cur</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">matched</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">nth: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">result = </span><span class="nx">result</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">var</span> <span class="nv">num = </span><span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">cur</span><span class="p">;</span> <span class="nv">cur = </span><span class="nx">cur</span><span class="p">[</span><span class="nx">dir</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="nx">num</span> <span class="o">===</span> <span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">cur</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">sibling: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">r = </span><span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">n</span><span class="p">;</span> <span class="nv">n = </span><span class="nx">n</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">n</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">n</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">r</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Implement the identical functionality for filter and not</span>
<span class="nx">function</span> <span class="nx">winnow</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">keep</span> <span class="p">)</span> <span class="p">{</span>

  <span class="err">// Can&#39;t pass null or undefined to indexOf in Firefox 4</span>
  <span class="o">/</span><span class="err">/ Set to 0 to skip string check</span>
  <span class="nv">qualifier = </span><span class="nx">qualifier</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">retVal = </span><span class="o">!!</span><span class="nx">qualifier</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">retVal</span> <span class="o">===</span> <span class="nx">keep</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">qualifier</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">keep</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">qualifier</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">filtered = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">isSimple</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">qualifier</span><span class="p">,</span> <span class="nx">filtered</span><span class="p">,</span> <span class="o">!</span><span class="nx">keep</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">qualifier = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">filtered</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">keep</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>




<span class="nx">function</span> <span class="nx">createSafeFragment</span><span class="p">(</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">list = </span><span class="nx">nodeNames</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;|&quot;</span> <span class="p">),</span>
  <span class="nv">safeFrag = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">safeFrag</span><span class="p">.</span><span class="nx">createElement</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">safeFrag</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="nx">list</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">safeFrag</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">var</span> <span class="nv">nodeNames = </span><span class="s2">&quot;abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;header|hgroup|mark|meter|nav|output|progress|section|summary|time|video&quot;</span><span class="p">,</span>
  <span class="nv">rinlinejQuery = </span><span class="sr">/ jQuery\d+=&quot;(?:\d+|null)&quot;/g</span><span class="p">,</span>
  <span class="nv">rleadingWhitespace = </span><span class="sr">/^\s+/</span><span class="p">,</span>
  <span class="nv">rxhtmlTag = </span><span class="sr">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig</span><span class="p">,</span>
  <span class="nv">rtagName = </span><span class="sr">/&lt;([\w:]+)/</span><span class="p">,</span>
  <span class="nv">rtbody = </span><span class="sr">/&lt;tbody/i</span><span class="p">,</span>
  <span class="nv">rhtml = </span><span class="sr">/&lt;|&amp;#?\w+;/</span><span class="p">,</span>
  <span class="nv">rnoInnerhtml = </span><span class="sr">/&lt;(?:script|style)/i</span><span class="p">,</span>
  <span class="nv">rnocache = </span><span class="sr">/&lt;(?:script|object|embed|option|style)/i</span><span class="p">,</span>
  <span class="nv">rnoshimcache = </span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;&lt;(?:&quot;</span> <span class="o">+</span> <span class="nx">nodeNames</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">),</span>
  <span class="err">// checked=&quot;checked&quot; or checked</span>
  <span class="nv">rchecked = </span><span class="sr">/checked\s*(?:[^=]|=\s*.checked.)/i</span><span class="p">,</span>
  <span class="nv">rscriptType = </span><span class="sr">/\/(java|ecma)script/i</span><span class="p">,</span>
  <span class="nv">rcleanScript = </span><span class="sr">/^\s*&lt;!(?:\[CDATA\[|\-\-)/</span><span class="p">,</span>
  <span class="nv">wrapMap = </span><span class="p">{</span>
    <span class="nv">option: </span><span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;select multiple=&#39;multiple&#39;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">legend: </span><span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;fieldset&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/fieldset&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">thead: </span><span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">tr: </span><span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">td: </span><span class="p">[</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">col: </span><span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">area: </span><span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;map&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/map&gt;&quot;</span> <span class="p">],</span>
    <span class="nv">_default: </span><span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nv">safeFragment = </span><span class="nx">createSafeFragment</span><span class="p">(</span> <span class="nb">document</span> <span class="p">);</span>

<span class="nv">wrapMap.optgroup = </span><span class="nx">wrapMap</span><span class="p">.</span><span class="nx">option</span><span class="p">;</span>
<span class="nv">wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = </span><span class="nx">wrapMap</span><span class="p">.</span><span class="nx">thead</span><span class="p">;</span>
<span class="nv">wrapMap.th = </span><span class="nx">wrapMap</span><span class="p">.</span><span class="nx">td</span><span class="p">;</span>

<span class="err">// IE can&#39;t serialize &lt;link&gt; and &lt;script&gt; tags normally</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">htmlSerialize</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">wrapMap._default = </span><span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;div&lt;div&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span> <span class="p">];</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">text: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">text</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">text</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">text</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">).</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">wrapAll: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// The elements to wrap the target around</span>
      <span class="nx">var</span> <span class="nv">wrap = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">html</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">wrap</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">wrap</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">elem</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">append</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">wrapInner: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapInner</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
        <span class="nv">contents = </span><span class="nx">self</span><span class="p">.</span><span class="nx">contents</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">contents</span><span class="p">.</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">wrap: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">isFunction = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">isFunction</span> <span class="o">?</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">:</span> <span class="nx">html</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">unwrap: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nv">append: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">prepend: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">before: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">set = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="nx">set</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span> <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">after: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">set = </span><span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="nx">set</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">set</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// keepData is for internal use only--do not document</span>
  <span class="nv">remove: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">keepData</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">keepData</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">empty: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Remove element nodes and prevent memory leaks</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Remove any remaining nodes</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">clone: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">dataAndEvents = </span><span class="nx">dataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">dataAndEvents</span><span class="p">;</span>
    <span class="nv">deepDataAndEvents = </span><span class="nx">deepDataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nv">dataAndEvents : </span><span class="nx">deepDataAndEvents</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nv">html: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rinlinejQuery</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span>
        <span class="kc">null</span><span class="p">;</span>

    <span class="err">// See if we can take a shortcut and just use innerHTML</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnoInnerhtml</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="nx">wrapMap</span><span class="p">[</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nv">value = </span><span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">);</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Remove element nodes and prevent memory leaks</span>
          <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
            <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nv">innerHTML = </span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="o">/</span><span class="err">/ If using innerHTML throws an exception, use the fallback method</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
        <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">())</span> <span class="p">);</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">replaceWith: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Make sure that the elements are removed from the DOM before they are inserted</span>
      <span class="o">/</span><span class="err">/ this can help fix replacing a parent with child elements</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nv">old = </span><span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">();</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">value = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">value</span> <span class="p">).</span><span class="nx">detach</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">next = </span><span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">,</span>
          <span class="nv">parent = </span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">next</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">next</span><span class="p">).</span><span class="nx">before</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">parent</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">),</span> <span class="s2">&quot;replaceWith&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">detach: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">domManip: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">parent</span><span class="p">,</span>
      <span class="nv">value = </span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nv">scripts = </span><span class="p">[];</span>

    <span class="err">// We can&#39;t cloneNode fragments that contain checked, in WebKit</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">table</span> <span class="o">?</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">parent = </span><span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

      <span class="err">// If we&#39;re in a fragment, just use that instead of building a new one</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">results = </span><span class="p">{</span> <span class="nv">fragment: </span><span class="nx">parent</span> <span class="p">};</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">results = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nv">fragment = </span><span class="nx">results</span><span class="p">.</span><span class="nx">fragment</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">first = fragment = </span><span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">first = </span><span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">table = </span><span class="nx">table</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">first</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nv">lastIndex = </span><span class="nx">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span>
            <span class="nx">table</span> <span class="o">?</span>
              <span class="nx">root</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">first</span><span class="p">)</span> <span class="o">:</span>
              <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
            <span class="err">// Make sure that we do not leak memory by inadvertently discarding</span>
            <span class="o">/</span><span class="err">/ the original fragment (which might have attached data) instead of</span>
            <span class="o">/</span><span class="err">/ using it; in addition, use the original fragment object for the last</span>
            <span class="o">/</span><span class="err">/ item instead of first because it can end up being emptied incorrectly</span>
            <span class="o">/</span><span class="err">/ in certain situations (Bug #8070).</span>
            <span class="o">/</span><span class="err">/ Fragments from the fragment cache must always be cloned and never used</span>
            <span class="o">/</span><span class="err">/ in place.</span>
            <span class="nx">results</span><span class="p">.</span><span class="nx">cacheable</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lastIndex</span> <span class="p">)</span> <span class="o">?</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="nx">fragment</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">:</span>
              <span class="nx">fragment</span>
          <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">scripts</span><span class="p">,</span> <span class="nx">evalScript</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">function</span> <span class="nx">root</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span> <span class="o">?</span>
    <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)))</span> <span class="o">:</span>
    <span class="nx">elem</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">function</span> <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span>
    <span class="nv">oldData = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">src</span> <span class="p">),</span>
    <span class="nv">curData = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">oldData</span> <span class="p">),</span>
    <span class="nv">events = </span><span class="nx">oldData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
    <span class="nv">curData.events = </span><span class="p">{};</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">namespace</span> <span class="o">?</span> <span class="s2">&quot;.&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">namespace</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ make the cloned public data object a copy from the original</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">curData.data = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">data</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">function</span> <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">nodeName</span><span class="p">;</span>

  <span class="err">// We do not need to do anything for non-Elements</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ clearAttributes removes the attributes, which we don&#39;t want,</span>
  <span class="o">/</span><span class="err">/ but also removes the attachEvent events, which we *do* want</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">clearAttributes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">clearAttributes</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ mergeAttributes, in contrast, only merges back on the</span>
  <span class="o">/</span><span class="err">/ original attributes, not the events</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">mergeAttributes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">mergeAttributes</span><span class="p">(</span> <span class="nx">src</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nv">nodeName = </span><span class="nx">dest</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

  <span class="err">// IE6-8 fail to clone children inside object elements that use</span>
  <span class="o">/</span><span class="err">/ the proprietary classid attribute value (rather than the type</span>
  <span class="o">/</span><span class="err">/ attribute) to identify the type of content to display</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">dest.outerHTML = </span><span class="nx">src</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">;</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// IE6-8 fails to persist the checked state of a cloned checkbox</span>
    <span class="o">/</span><span class="err">/ or radio button. Worse, IE6-7 fail to give the cloned element</span>
    <span class="o">/</span><span class="err">/ a checked appearance if the defaultChecked value isn&#39;t also set</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">checked</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">dest.defaultChecked = dest.checked = </span><span class="nx">src</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ IE6-7 get confused and end up setting the value of a cloned</span>
    <span class="o">/</span><span class="err">/ checkbox/radio button to an empty string instead of &quot;on&quot;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">dest.value = </span><span class="nx">src</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="o">/</span><span class="err">/ IE6-8 fails to return the selected option to the default selected</span>
  <span class="o">/</span><span class="err">/ state when cloning options</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;option&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">dest.selected = </span><span class="nx">src</span><span class="p">.</span><span class="nx">defaultSelected</span><span class="p">;</span>

  <span class="err">// IE6-8 fails to set the defaultValue to the correct value when</span>
  <span class="o">/</span><span class="err">/ cloning other types of input fields</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;textarea&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">dest.defaultValue = </span><span class="nx">src</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Event data gets referenced instead of copied if the expando</span>
  <span class="o">/</span><span class="err">/ gets copied too</span>
  <span class="nx">dest</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nv">jQuery.buildFragment = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">nodes</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">cacheable</span><span class="p">,</span> <span class="nx">cacheresults</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span>
  <span class="nv">first = </span><span class="nx">args</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>

  <span class="err">// nodes may contain either an explicit document object,</span>
  <span class="o">/</span><span class="err">/ a jQuery collection or context object.</span>
  <span class="o">/</span><span class="err">/ If nodes[0] contains a valid object to assign to doc</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodes</span> <span class="o">&amp;&amp;</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">doc = </span><span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Ensure that an attr object doesn&#39;t incorrectly stand in as a document object</span>
  <span class="o">/</span><span class="err">/ Chrome and Firefox seem to allow this to occur and will throw exception</span>
  <span class="o">/</span><span class="err">/ Fixes #8950</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">doc = </span><span class="nb">document</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Only cache &quot;small&quot; (1/2 KB) HTML strings that are associated with the main document</span>
  <span class="o">/</span><span class="err">/ Cloning options loses the selected state, so don&#39;t cache them</span>
  <span class="o">/</span><span class="err">/ IE 6 doesn&#39;t like it when you put &lt;object&gt; or &lt;embed&gt; elements in a fragment</span>
  <span class="o">/</span><span class="err">/ Also, WebKit does not clone &#39;checked&#39; attributes on cloneNode, so don&#39;t cache</span>
  <span class="o">/</span><span class="err">/ Lastly, IE6,7,8 will not correctly reuse cached fragments that were created from unknown elems #10501</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">first</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">first</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">512</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span> <span class="o">===</span> <span class="nb">document</span> <span class="o">&amp;&amp;</span>
    <span class="nx">first</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnocache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">first</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">first</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">html5Clone</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rnoshimcache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">first</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nv">cacheable = </span><span class="kc">true</span><span class="p">;</span>

    <span class="nv">cacheresults = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span><span class="p">[</span> <span class="nx">first</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">cacheresults</span> <span class="o">&amp;&amp;</span> <span class="nx">cacheresults</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">fragment = </span><span class="nx">cacheresults</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fragment</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">fragment = </span><span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">cacheable</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span><span class="p">[</span> <span class="nx">first</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">cacheresults</span> <span class="o">?</span> <span class="nv">fragment : </span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nv">fragment: </span><span class="nx">fragment</span><span class="p">,</span> <span class="nv">cacheable: </span><span class="nx">cacheable</span> <span class="p">};</span>
<span class="p">};</span>

<span class="nv">jQuery.fragments = </span><span class="p">{};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nv">appendTo: </span><span class="s2">&quot;append&quot;</span><span class="p">,</span>
  <span class="nv">prependTo: </span><span class="s2">&quot;prepend&quot;</span><span class="p">,</span>
  <span class="nv">insertBefore: </span><span class="s2">&quot;before&quot;</span><span class="p">,</span>
  <span class="nv">insertAfter: </span><span class="s2">&quot;after&quot;</span><span class="p">,</span>
  <span class="nv">replaceAll: </span><span class="s2">&quot;replaceWith&quot;</span>
<span class="p">},</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">ret = </span><span class="p">[],</span>
      <span class="nv">insert = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nv">parent = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">insert</span><span class="p">[</span> <span class="nx">original</span> <span class="p">](</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">l = </span><span class="nx">insert</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">elems = </span><span class="p">(</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span> <span class="p">).</span><span class="nx">get</span><span class="p">();</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">insert</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)[</span> <span class="nx">original</span> <span class="p">](</span> <span class="nx">elems</span> <span class="p">);</span>
        <span class="nv">ret = </span><span class="nx">ret</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">function</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Used in clean, fixes the defaultChecked property</span>
<span class="nx">function</span> <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">elem.defaultChecked = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">/</span><span class="err">/ Finds all inputs and passes them to fixDefaultChecked</span>
<span class="nx">function</span> <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">nodeName = </span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="err">// Skip scripts, get other children</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">!==</span> <span class="s2">&quot;script&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">),</span> <span class="nx">fixDefaultChecked</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="o">/</span><span class="sr">/ Derived From: http:/</span><span class="o">/</span><span class="nx">www</span><span class="p">.</span><span class="nx">iecss</span><span class="p">.</span><span class="nx">com</span><span class="err">/shimprove/javascript/shimprove.1-0-1.js</span>
<span class="nx">function</span> <span class="nx">shimCloneNode</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">div = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
  <span class="nx">safeFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>

  <span class="nv">div.innerHTML = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">clone: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">srcElements</span><span class="p">,</span>
      <span class="nx">destElements</span><span class="p">,</span>
      <span class="nx">i</span><span class="p">,</span>
      <span class="err">// IE&lt;=8 does not properly clone detached, unknown element nodes</span>
      <span class="nv">clone = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">html5Clone</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rnoshimcache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">shimCloneNode</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneChecked</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// IE copies events bound via attachEvent when using cloneNode.</span>
      <span class="o">/</span><span class="err">/ Calling detachEvent on the clone will also remove the events</span>
      <span class="o">/</span><span class="err">/ from the original. In order to get around this, we use some</span>
      <span class="o">/</span><span class="err">/ proprietary methods to clear the events. Thanks to MooTools</span>
      <span class="o">/</span><span class="err">/ guys for this hotness.</span>

      <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span>

      <span class="err">// Using Sizzle here is crazy slow, so we use getElementsByTagName instead</span>
      <span class="nv">srcElements = </span><span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="nv">destElements = </span><span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>

      <span class="err">// Weird iteration because IE will replace the length property</span>
      <span class="o">/</span><span class="err">/ with an element if you are cloning the body and one of the</span>
      <span class="o">/</span><span class="err">/ elements on the page has a name or id of &quot;length&quot;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Ensure that the destination node is not null; Fixes #9587</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Copy the events from the original to the clone</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">srcElements = </span><span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nv">destElements = </span><span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nv">srcElements = destElements = </span><span class="kc">null</span><span class="p">;</span>

    <span class="err">// Return the cloned set</span>
    <span class="k">return</span> <span class="nx">clone</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">clean: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">checkScriptType</span><span class="p">;</span>

    <span class="nv">context = </span><span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>

    <span class="err">// !context.createElement fails in IE with an error but returns typeof &#39;object&#39;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">context = </span><span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">ret = </span><span class="p">[],</span> <span class="nx">j</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nv">elem = </span><span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Convert html string into DOM nodes</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rhtml</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">elem = </span><span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="err">// Fix &quot;XHTML&quot;-style tags in all browsers</span>
          <span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">);</span>

          <span class="err">// Trim whitespace, otherwise indexOf won&#39;t work as expected</span>
          <span class="nx">var</span> <span class="nv">tag = </span><span class="p">(</span> <span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">(),</span>
            <span class="nv">wrap = </span><span class="nx">wrapMap</span><span class="p">[</span> <span class="nx">tag</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">_default</span><span class="p">,</span>
            <span class="nv">depth = </span><span class="nx">wrap</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nv">div = </span><span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>

          <span class="err">// Append wrapper element to unknown element safe doc fragment</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">===</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
            <span class="err">// Use the fragment we&#39;ve already created for this document</span>
            <span class="nx">safeFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="err">// Use a fragment created with the owner document</span>
            <span class="nx">createSafeFragment</span><span class="p">(</span> <span class="nx">context</span> <span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Go to html and back, then peel off extra wrappers</span>
          <span class="nv">div.innerHTML = </span><span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">elem</span> <span class="o">+</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

          <span class="err">// Move to the right depth</span>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">depth</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">div = </span><span class="nx">div</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Remove IE&#39;s autoinserted &lt;tbody&gt; from table fragments</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">tbody</span> <span class="p">)</span> <span class="p">{</span>

            <span class="err">// String was a &lt;table&gt;, *may* have spurious &lt;tbody&gt;</span>
            <span class="nx">var</span> <span class="nv">hasBody = </span><span class="nx">rtbody</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">),</span>
              <span class="nv">tbody = </span><span class="nx">tag</span> <span class="o">===</span> <span class="s2">&quot;table&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasBody</span> <span class="o">?</span>
                <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nv">div.firstChild.childNodes :</span>

                <span class="err">// String was a bare &lt;thead&gt; or &lt;tfoot&gt;</span>
                <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;&lt;table&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasBody</span> <span class="o">?</span>
                  <span class="nv">div.childNodes :</span>
                  <span class="p">[];</span>

            <span class="k">for</span> <span class="p">(</span> <span class="nv">j = </span><span class="nx">tbody</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">;</span> <span class="o">--</span><span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">],</span> <span class="s2">&quot;tbody&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">]</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ IE completely kills leading whitespace when innerHTML is used</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">&amp;&amp;</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">div</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">elem</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">),</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
          <span class="p">}</span>

          <span class="nv">elem = </span><span class="nx">div</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Resets defaultChecked for any radios and checkboxes</span>
      <span class="o">/</span><span class="err">/ about to be appended to the DOM in IE 6/7 (#8060)</span>
      <span class="nx">var</span> <span class="nx">len</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">appendChecked</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="p">(</span><span class="nv">len = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nv">j = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">ret = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">checkScriptType = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">rscriptType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>
      <span class="p">};</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;script&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;text/javascript&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">scripts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">var</span> <span class="nv">jsTags = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span> <span class="p">),</span> <span class="nx">checkScriptType</span> <span class="p">);</span>

            <span class="nx">ret</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">jsTags</span> <span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">cleanData: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span>
      <span class="nv">cache = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span>
      <span class="nv">special = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">,</span>
      <span class="nv">deleteExpando = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nv">elem = </span><span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noData</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nv">id = </span><span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">data = </span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>

            <span class="err">// This is a shortcut to avoid jQuery.event.remove&#39;s overhead</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Null the DOM reference to avoid IE6/7/8 leak (#7054)</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">data.handle.elem = </span><span class="kc">null</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">deleteExpando</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">delete</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">function</span> <span class="nx">evalScript</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nv">url: </span><span class="nx">elem</span><span class="p">.</span><span class="nx">src</span><span class="p">,</span>
      <span class="nv">async: </span><span class="kc">false</span><span class="p">,</span>
      <span class="nv">dataType: </span><span class="s2">&quot;script&quot;</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">text</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rcleanScript</span><span class="p">,</span> <span class="s2">&quot;/*$0*/&quot;</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>




<span class="nx">var</span> <span class="nv">ralpha = </span><span class="sr">/alpha\([^)]*\)/i</span><span class="p">,</span>
  <span class="nv">ropacity = </span><span class="sr">/opacity=([^)]*)/</span><span class="p">,</span>
  <span class="err">// fixed for IE9, see #8346</span>
  <span class="nv">rupper = </span><span class="sr">/([A-Z]|^ms)/g</span><span class="p">,</span>
  <span class="nv">rnumpx = </span><span class="sr">/^-?\d+(?:px)?$/i</span><span class="p">,</span>
  <span class="nv">rnum = </span><span class="sr">/^-?\d/</span><span class="p">,</span>
  <span class="nv">rrelNum = </span><span class="sr">/^([\-+])=([\-+.\de]+)/</span><span class="p">,</span>

  <span class="nv">cssShow = </span><span class="p">{</span> <span class="nv">position: </span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="nv">visibility: </span><span class="s2">&quot;hidden&quot;</span><span class="p">,</span> <span class="nv">display: </span><span class="s2">&quot;block&quot;</span> <span class="p">},</span>
  <span class="nv">cssWidth = </span><span class="p">[</span> <span class="s2">&quot;Left&quot;</span><span class="p">,</span> <span class="s2">&quot;Right&quot;</span> <span class="p">],</span>
  <span class="nv">cssHeight = </span><span class="p">[</span> <span class="s2">&quot;Top&quot;</span><span class="p">,</span> <span class="s2">&quot;Bottom&quot;</span> <span class="p">],</span>
  <span class="nx">curCSS</span><span class="p">,</span>

  <span class="nx">getComputedStyle</span><span class="p">,</span>
  <span class="nx">currentStyle</span><span class="p">;</span>

<span class="nv">jQuery.fn.css = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
  <span class="err">// Setting &#39;undefined&#39; is a no-op</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="err">// Add in style property hooks for overriding the default</span>
  <span class="o">/</span><span class="err">/ behavior of getting and setting a style property</span>
  <span class="nv">cssHooks: </span><span class="p">{</span>
    <span class="nv">opacity: </span><span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// We should always get a number back from opacity</span>
          <span class="nx">var</span> <span class="nv">ret = </span><span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="s2">&quot;1&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// Exclude the following css properties to add px</span>
  <span class="nv">cssNumber: </span><span class="p">{</span>
    <span class="s2">&quot;fillOpacity&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;lineHeight&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;opacity&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;orphans&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;widows&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;zIndex&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;zoom&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="err">// Add in properties whose names you wish to fix before</span>
  <span class="o">/</span><span class="err">/ setting or getting the value</span>
  <span class="nv">cssProps: </span><span class="p">{</span>
    <span class="err">// normalize float css property</span>
    <span class="s2">&quot;float&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">cssFloat</span> <span class="o">?</span> <span class="s2">&quot;cssFloat&quot;</span> <span class="o">:</span> <span class="s2">&quot;styleFloat&quot;</span>
  <span class="p">},</span>

  <span class="err">// Get and set the style property on a DOM Node</span>
  <span class="nv">style: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Don&#39;t set styles on text and comment nodes</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Make sure that we&#39;re working with the right name</span>
    <span class="nx">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nv">origName = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">),</span>
      <span class="nv">style = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="nv">hooks = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">];</span>

    <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">origName</span><span class="p">;</span>

    <span class="err">// Check if we&#39;re setting a value</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">type = </span><span class="k">typeof</span> <span class="nx">value</span><span class="p">;</span>

      <span class="err">// convert relative number strings (+= or -=) to relative numbers. #7345</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">rrelNum</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">value = </span><span class="p">(</span> <span class="o">+</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="o">+</span><span class="nx">ret</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="o">+</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">);</span>
        <span class="err">// Fixes bug #9237</span>
        <span class="nv">type = </span><span class="s2">&quot;number&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Make sure that NaN and null values aren&#39;t set. See: #7116</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ If a number was passed in, add &#39;px&#39; to the (except for certain CSS properties)</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">+=</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ If a hook was provided, use that value, otherwise just set the specified value</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nv">value = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Wrapped to prevent IE from throwing errors when &#39;invalid&#39; values are provided</span>
        <span class="o">/</span><span class="err">/ Fixes bug #5509</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="err">// If a hook was provided get the non-computed value from there</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Otherwise just get the value from the style object</span>
      <span class="k">return</span> <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">css: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">;</span>

    <span class="err">// Make sure that we&#39;re working with the right name</span>
    <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="nv">hooks = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>

    <span class="err">// cssFloat needs a special treatment</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;cssFloat&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">name = </span><span class="s2">&quot;float&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ If a hook was provided get the computed value from there</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">ret = </span><span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="err">// Otherwise, if a way to get the computed value exists, use that</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">curCSS</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// A method for quickly swapping in/out CSS properties to get correct calculations</span>
  <span class="nv">swap: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">old = </span><span class="p">{};</span>

    <span class="err">// Remember the old values, and insert the new ones</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">old</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="err">// Revert the old values</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">old</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// DEPRECATED, Use jQuery.css() instead</span>
<span class="nv">jQuery.curCSS = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">val</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">!==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">getWH</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cssShow</span><span class="p">,</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nv">val = </span><span class="nx">getWH</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">});</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rnumpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// ignore negative width and height values #1599</span>
        <span class="nv">value = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">opacity</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.cssHooks.opacity = </span><span class="p">{</span>
    <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// IE uses filters for opacity</span>
      <span class="k">return</span> <span class="nx">ropacity</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="p">(</span><span class="nx">computed</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">?</span> <span class="nv">elem.currentStyle.filter : </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">filter</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">?</span>
        <span class="p">(</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nb">RegExp</span><span class="p">.</span><span class="nx">$1</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">100</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">computed</span> <span class="o">?</span> <span class="s2">&quot;1&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nv">set: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">style = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span>
        <span class="nv">currentStyle = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">,</span>
        <span class="nv">opacity = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isNumeric</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;alpha(opacity=&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nv">filter = </span><span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="o">||</span> <span class="nx">style</span><span class="p">.</span><span class="nx">filter</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="err">// IE has trouble with opacity if it does not have layout</span>
      <span class="o">/</span><span class="err">/ Force it by setting the zoom level</span>
      <span class="nv">style.zoom = </span><span class="mi">1</span><span class="p">;</span>

      <span class="err">// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">ralpha</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// Setting style.filter to null, &quot;&quot; &amp; &quot; &quot; still leave &quot;filter:&quot; in the cssText</span>
        <span class="o">/</span><span class="err">/ if &quot;filter:&quot; is present at all, clearType is disabled, we want to avoid this</span>
        <span class="o">/</span><span class="err">/ style.removeAttribute is IE Only, but so apparently is this code path...</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="s2">&quot;filter&quot;</span> <span class="p">);</span>

        <span class="err">// if there there is no filter style applied in a css rule, we are done</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ otherwise, set new filter values</span>
      <span class="nv">style.filter = </span><span class="nx">ralpha</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">ralpha</span><span class="p">,</span> <span class="nx">opacity</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">filter</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">opacity</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="err">// This hook cannot be added until DOM ready because the support test</span>
  <span class="o">/</span><span class="err">/ for it is not run until after DOM ready</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">reliableMarginRight</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">jQuery.cssHooks.marginRight = </span><span class="p">{</span>
      <span class="nv">get: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right</span>
        <span class="o">/</span><span class="err">/ Work around by temporarily setting element display to inline-block</span>
        <span class="nx">var</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;inline-block&quot;</span> <span class="p">},</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">ret = </span><span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;margin-right&quot;</span><span class="p">,</span> <span class="s2">&quot;marginRight&quot;</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginRight</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">getComputedStyle = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">defaultView</span><span class="p">,</span> <span class="nx">computedStyle</span><span class="p">;</span>

    <span class="nv">name = </span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rupper</span><span class="p">,</span> <span class="s2">&quot;-$1&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nv">defaultView = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nv">computedStyle = </span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret = </span><span class="nx">computedStyle</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">ret = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">currentStyle = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">rsLeft</span><span class="p">,</span> <span class="nx">uncomputed</span><span class="p">,</span>
      <span class="nv">ret = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span>
      <span class="nv">style = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>

    <span class="err">// Avoid setting ret to empty string here</span>
    <span class="o">/</span><span class="err">/ so we don&#39;t default to auto</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">uncomputed = </span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ret = </span><span class="nx">uncomputed</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ From the awesome hack by Dean Edwards</span>
    <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">erik</span><span class="p">.</span><span class="nx">eae</span><span class="p">.</span><span class="nx">net</span><span class="err">/archives/2007/07/27/18.54.15/#comment-102291</span>

    <span class="o">/</span><span class="err">/ If we&#39;re not dealing with a regular pixel number</span>
    <span class="o">/</span><span class="err">/ but a number that has a weird ending, we need to convert it to pixels</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rnumpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">rnum</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// Remember the original values</span>
      <span class="nv">left = </span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
      <span class="nv">rsLeft = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>

      <span class="err">// Put in the new values to get a computed value out</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rsLeft</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem.runtimeStyle.left = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nv">style.left = </span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;fontSize&quot;</span> <span class="o">?</span> <span class="s2">&quot;1em&quot;</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">);</span>
      <span class="nv">ret = </span><span class="nx">style</span><span class="p">.</span><span class="nx">pixelLeft</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>

      <span class="err">// Revert the changed values</span>
      <span class="nv">style.left = </span><span class="nx">left</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rsLeft</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem.runtimeStyle.left = </span><span class="nx">rsLeft</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="s2">&quot;auto&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nv">curCSS = </span><span class="nx">getComputedStyle</span> <span class="o">||</span> <span class="nx">currentStyle</span><span class="p">;</span>

<span class="nx">function</span> <span class="nx">getWH</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>

  <span class="err">// Start with offset property</span>
  <span class="nx">var</span> <span class="nv">val = </span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">?</span> <span class="nv">elem.offsetWidth : </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">,</span>
    <span class="nv">which = </span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">?</span> <span class="nv">cssWidth : </span><span class="nx">cssHeight</span><span class="p">,</span>
    <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
    <span class="nv">len = </span><span class="nx">which</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">!==</span> <span class="s2">&quot;border&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">val</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="nx">which</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;margin&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">extra</span> <span class="o">+</span> <span class="nx">which</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">val</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="nx">which</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Fall back to computed then uncomputed css if necessary</span>
  <span class="nv">val = </span><span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">val = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="o">/</span><span class="err">/ Normalize &quot;&quot;, auto, and prepare for extra</span>
  <span class="nv">val = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

  <span class="err">// Add padding, border, margin</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="nx">which</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">!==</span> <span class="s2">&quot;padding&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="nx">which</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;margin&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">extra</span> <span class="o">+</span> <span class="nx">which</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.expr.filters.hidden = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">width = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span>
      <span class="nv">height = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span> <span class="nx">width</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">height</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">reliableHiddenOffsets</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">))</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nv">jQuery.expr.filters.visible = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">hidden</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>




<span class="nx">var</span> <span class="nv">r20 = </span><span class="sr">/%20/g</span><span class="p">,</span>
  <span class="nv">rbracket = </span><span class="sr">/\[\]$/</span><span class="p">,</span>
  <span class="nv">rCRLF = </span><span class="sr">/\r?\n/g</span><span class="p">,</span>
  <span class="nv">rhash = </span><span class="sr">/#.*$/</span><span class="p">,</span>
  <span class="nv">rheaders = </span><span class="sr">/^(.*?):[ \t]*([^\r\n]*)\r?$/mg</span><span class="p">,</span> <span class="err">// IE leaves an \r character at EOL</span>
  <span class="nv">rinput = </span><span class="sr">/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i</span><span class="p">,</span>
  <span class="err">// #7653, #8125, #8152: local protocol detection</span>
  <span class="nv">rlocalProtocol = </span><span class="sr">/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/</span><span class="p">,</span>
  <span class="nv">rnoContent = </span><span class="sr">/^(?:GET|HEAD)$/</span><span class="p">,</span>
  <span class="nv">rprotocol = </span><span class="sr">/^\/\//</span><span class="p">,</span>
  <span class="nv">rquery = </span><span class="sr">/\?/</span><span class="p">,</span>
  <span class="nv">rscript = </span><span class="sr">/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi</span><span class="p">,</span>
  <span class="nv">rselectTextarea = </span><span class="sr">/^(?:select|textarea)/i</span><span class="p">,</span>
  <span class="nv">rspacesAjax = </span><span class="sr">/\s+/</span><span class="p">,</span>
  <span class="nv">rts = </span><span class="sr">/([?&amp;])_=[^&amp;]*/</span><span class="p">,</span>
  <span class="nv">rurl = </span><span class="sr">/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/</span><span class="p">,</span>

  <span class="err">// Keep a copy of the old load method</span>
  <span class="nv">_load = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">load</span><span class="p">,</span>

  <span class="err">/* Prefilters</span>
   <span class="o">*</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">They</span> <span class="nx">are</span> <span class="nx">useful</span> <span class="nx">to</span> <span class="nx">introduce</span> <span class="nx">custom</span> <span class="nx">dataTypes</span> <span class="p">(</span><span class="nx">see</span> <span class="nx">ajax</span><span class="err">/jsonp.js for an example)</span>
   <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">These</span> <span class="nx">are</span> <span class="nv">called:</span>
   <span class="o">*</span>    <span class="o">-</span> <span class="nx">BEFORE</span> <span class="nx">asking</span> <span class="k">for</span> <span class="nx">a</span> <span class="nx">transport</span>
   <span class="o">*</span>    <span class="o">-</span> <span class="nx">AFTER</span> <span class="nx">param</span> <span class="nx">serialization</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">is</span> <span class="nx">a</span> <span class="nx">string</span> <span class="k">if</span> <span class="nx">s</span><span class="p">.</span><span class="nx">processData</span> <span class="o">is</span> <span class="kc">true</span><span class="p">)</span>
   <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">key</span> <span class="o">is</span> <span class="nx">the</span> <span class="nx">dataType</span>
   <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="nx">the</span> <span class="nx">catchall</span> <span class="nx">symbol</span> <span class="s2">&quot;*&quot;</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">used</span>
   <span class="o">*</span> <span class="mi">5</span><span class="p">)</span> <span class="nx">execution</span> <span class="nx">will</span> <span class="nx">start</span> <span class="nx">with</span> <span class="nx">transport</span> <span class="nx">dataType</span> <span class="o">and</span> <span class="nx">THEN</span> <span class="k">continue</span> <span class="nx">down</span> <span class="nx">to</span> <span class="s2">&quot;*&quot;</span> <span class="k">if</span> <span class="nx">needed</span>
   <span class="o">*</span><span class="err">/</span>
  <span class="nv">prefilters = </span><span class="p">{},</span>

  <span class="err">/* Transports bindings</span>
   <span class="o">*</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">key</span> <span class="o">is</span> <span class="nx">the</span> <span class="nx">dataType</span>
   <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">the</span> <span class="nx">catchall</span> <span class="nx">symbol</span> <span class="s2">&quot;*&quot;</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">used</span>
   <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">selection</span> <span class="nx">will</span> <span class="nx">start</span> <span class="nx">with</span> <span class="nx">transport</span> <span class="nx">dataType</span> <span class="o">and</span> <span class="nx">THEN</span> <span class="nx">go</span> <span class="nx">to</span> <span class="s2">&quot;*&quot;</span> <span class="k">if</span> <span class="nx">needed</span>
   <span class="o">*</span><span class="err">/</span>
  <span class="nv">transports = </span><span class="p">{},</span>

  <span class="err">// Document location</span>
  <span class="nx">ajaxLocation</span><span class="p">,</span>

  <span class="err">// Document location segments</span>
  <span class="nx">ajaxLocParts</span><span class="p">,</span>

  <span class="err">// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression</span>
  <span class="nv">allTypes = </span><span class="p">[</span><span class="s2">&quot;*/&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">];</span>

<span class="err">// #8138, IE may throw an exception when accessing</span>
<span class="o">/</span><span class="err">/ a field from window.location if document.domain has been set</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nv">ajaxLocation = </span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
  <span class="err">// Use the href attribute of an A element</span>
  <span class="o">/</span><span class="err">/ since IE will modify it given document.location</span>
  <span class="nv">ajaxLocation = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">);</span>
  <span class="nv">ajaxLocation.href = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nv">ajaxLocation = </span><span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Segment location into parts</span>
<span class="nv">ajaxLocParts = </span><span class="nx">rurl</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>

<span class="err">// Base &quot;constructor&quot; for jQuery.ajaxPrefilter and jQuery.ajaxTransport</span>
<span class="nx">function</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">structure</span> <span class="p">)</span> <span class="p">{</span>

  <span class="err">// dataTypeExpression is optional and defaults to &quot;*&quot;</span>
  <span class="k">return</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">dataTypeExpression</span><span class="p">,</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">dataTypeExpression</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">func = </span><span class="nx">dataTypeExpression</span><span class="p">;</span>
      <span class="nv">dataTypeExpression = </span><span class="s2">&quot;*&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">dataTypes = </span><span class="nx">dataTypeExpression</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspacesAjax</span> <span class="p">),</span>
        <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
        <span class="nv">length = </span><span class="nx">dataTypes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="nx">dataType</span><span class="p">,</span>
        <span class="nx">list</span><span class="p">,</span>
        <span class="nx">placeBefore</span><span class="p">;</span>

      <span class="err">// For each dataType in the dataTypeExpression</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">dataType = </span><span class="nx">dataTypes</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
        <span class="err">// We control if we&#39;re asked to add before</span>
        <span class="o">/</span><span class="err">/ any existing element</span>
        <span class="nv">placeBefore = </span><span class="sr">/^\+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">dataType</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">placeBefore</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">dataType = </span><span class="nx">dataType</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">list = </span><span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
        <span class="err">// then we add to the structure accordingly</span>
        <span class="nx">list</span><span class="p">[</span> <span class="nx">placeBefore</span> <span class="o">?</span> <span class="s2">&quot;unshift&quot;</span> <span class="o">:</span> <span class="s2">&quot;push&quot;</span> <span class="p">](</span> <span class="nx">func</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Base inspection function for prefilters and transports</span>
<span class="nx">function</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span>
    <span class="nx">dataType</span> <span class="sr">/* internal */</span><span class="p">,</span> <span class="nx">inspected</span> <span class="sr">/* internal */</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nv">dataType = </span><span class="nx">dataType</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="nv">inspected = </span><span class="nx">inspected</span> <span class="o">||</span> <span class="p">{};</span>

  <span class="nx">inspected</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="nx">var</span> <span class="nv">list = </span><span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">],</span>
    <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
    <span class="nv">length = </span><span class="nx">list</span> <span class="o">?</span> <span class="nv">list.length : </span><span class="mi">0</span><span class="p">,</span>
    <span class="nv">executeOnly = </span><span class="p">(</span> <span class="nx">structure</span> <span class="o">===</span> <span class="nx">prefilters</span> <span class="p">),</span>
    <span class="nx">selection</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">executeOnly</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selection</span> <span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">selection = </span><span class="nx">list</span><span class="p">[</span> <span class="nx">i</span> <span class="p">](</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>
    <span class="err">// If we got redirected to another dataType</span>
    <span class="o">/</span><span class="err">/ we try there if executing only and not done already</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selection</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">executeOnly</span> <span class="o">||</span> <span class="nx">inspected</span><span class="p">[</span> <span class="nx">selection</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">selection = </span><span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">selection</span> <span class="p">);</span>
        <span class="nv">selection = </span><span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span>
            <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">selection</span><span class="p">,</span> <span class="nx">inspected</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="o">/</span><span class="err">/ If we&#39;re only executing or nothing was selected</span>
  <span class="o">/</span><span class="err">/ we try the catchall dataType if not done already</span>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">executeOnly</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selection</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inspected</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">selection = </span><span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span>
        <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="nx">inspected</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="o">/</span><span class="err">/ unnecessary when only executing (prefilters)</span>
  <span class="o">/</span><span class="err">/ but it&#39;ll be ignored by the caller in that case</span>
  <span class="k">return</span> <span class="nx">selection</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ A special extend for ajax options</span>
<span class="o">/</span><span class="err">/ that takes &quot;flat&quot; options (not to be deep extended)</span>
<span class="o">/</span><span class="err">/ Fixes #9887</span>
<span class="nx">function</span> <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">deep</span><span class="p">,</span>
    <span class="nv">flatOptions = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">flatOptions</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="p">(</span> <span class="nx">flatOptions</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">?</span> <span class="nv">target : </span><span class="p">(</span> <span class="nx">deep</span> <span class="o">||</span> <span class="p">(</span> <span class="nv">deep = </span><span class="p">{}</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">src</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">deep</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">load: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">url</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">_load</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">_load</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

    <span class="err">// Don&#39;t do a request if no elements are being requested</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="kc">off</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="kc">off</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">selector = </span><span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="kc">off</span><span class="p">,</span> <span class="nx">url</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
      <span class="nv">url = </span><span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">off</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Default to a GET request</span>
    <span class="nx">var</span> <span class="nv">type = </span><span class="s2">&quot;GET&quot;</span><span class="p">;</span>

    <span class="err">// If the second parameter was provided</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// If it&#39;s a function</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// We assume that it&#39;s the callback</span>
        <span class="nv">callback = </span><span class="nx">params</span><span class="p">;</span>
        <span class="nv">params = </span><span class="kc">undefined</span><span class="p">;</span>

      <span class="err">// Otherwise, build a param string</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">params</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">params = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">traditional</span> <span class="p">);</span>
        <span class="nv">type = </span><span class="s2">&quot;POST&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">self = </span><span class="k">this</span><span class="p">;</span>

    <span class="err">// Request the remote document</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nv">url: </span><span class="nx">url</span><span class="p">,</span>
      <span class="nv">type: </span><span class="nx">type</span><span class="p">,</span>
      <span class="nv">dataType: </span><span class="s2">&quot;html&quot;</span><span class="p">,</span>
      <span class="nv">data: </span><span class="nx">params</span><span class="p">,</span>
      <span class="err">// Complete callback (responseText is used internally)</span>
      <span class="nv">complete: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">responseText</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Store the response as specified by the jqXHR object</span>
        <span class="nv">responseText = </span><span class="nx">jqXHR</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
        <span class="err">// If successful, inject the HTML into all the matched elements</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// #4825: Get the actual response in case</span>
          <span class="o">/</span><span class="err">/ a dataFilter is present in ajaxSettings</span>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">r</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">responseText = </span><span class="nx">r</span><span class="p">;</span>
          <span class="p">});</span>
          <span class="err">// See if a selector was specified</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">?</span>
            <span class="err">// Create a dummy div to hold the results</span>
            <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;&lt;div&gt;&quot;</span><span class="p">)</span>
              <span class="o">/</span><span class="err">/ inject the contents of the document in, removing the scripts</span>
              <span class="o">/</span><span class="err">/ to avoid any &#39;Permission Denied&#39; errors in IE</span>
              <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">responseText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rscript</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

              <span class="o">/</span><span class="err">/ Locate the specified elements</span>
              <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="o">:</span>

            <span class="err">// If not, just inject the full result</span>
            <span class="nx">responseText</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="p">[</span> <span class="nx">responseText</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">serialize: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">serializeArray</span><span class="p">()</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">serializeArray: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">checked</span> <span class="o">||</span> <span class="nx">rselectTextarea</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span>
          <span class="nx">rinput</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">){</span>
      <span class="nx">var</span> <span class="nv">val = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>

      <span class="k">return</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="kc">null</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">i</span> <span class="p">){</span>
            <span class="k">return</span> <span class="p">{</span> <span class="nv">name: </span><span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nv">value: </span><span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rCRLF</span><span class="p">,</span> <span class="s2">&quot;\r\n&quot;</span> <span class="p">)</span> <span class="p">};</span>
          <span class="p">})</span> <span class="o">:</span>
          <span class="p">{</span> <span class="nv">name: </span><span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nv">value: </span><span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rCRLF</span><span class="p">,</span> <span class="s2">&quot;\r\n&quot;</span> <span class="p">)</span> <span class="p">};</span>
    <span class="p">}).</span><span class="nx">get</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Attach a bunch of functions for handling common AJAX events</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="s2">&quot;ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">),</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">o</span> <span class="p">){</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">o</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">f</span> <span class="p">){</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kc">on</span><span class="p">(</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">f</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">method</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// shift arguments if data argument was omitted</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">type = </span><span class="nx">type</span> <span class="o">||</span> <span class="nx">callback</span><span class="p">;</span>
      <span class="nv">callback = </span><span class="nx">data</span><span class="p">;</span>
      <span class="nv">data = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nv">type: </span><span class="nx">method</span><span class="p">,</span>
      <span class="nv">url: </span><span class="nx">url</span><span class="p">,</span>
      <span class="nv">data: </span><span class="nx">data</span><span class="p">,</span>
      <span class="nv">success: </span><span class="nx">callback</span><span class="p">,</span>
      <span class="nv">dataType: </span><span class="nx">type</span>
    <span class="p">});</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nv">getScript: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">getJSON: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Creates a full fledged settings object into target</span>
  <span class="o">/</span><span class="err">/ with both ajaxSettings and settings fields.</span>
  <span class="o">/</span><span class="err">/ If target is omitted, writes into ajaxSettings.</span>
  <span class="nv">ajaxSetup: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Building a settings object</span>
      <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="err">// Extending ajaxSettings</span>
      <span class="nv">settings = </span><span class="nx">target</span><span class="p">;</span>
      <span class="nv">target = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">ajaxSettings: </span><span class="p">{</span>
    <span class="nv">url: </span><span class="nx">ajaxLocation</span><span class="p">,</span>
    <span class="nv">isLocal: </span><span class="nx">rlocalProtocol</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">),</span>
    <span class="nv">global: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">type: </span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
    <span class="nv">contentType: </span><span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span>
    <span class="nv">processData: </span><span class="kc">true</span><span class="p">,</span>
    <span class="nv">async: </span><span class="kc">true</span><span class="p">,</span>
    <span class="err">/*</span>
    <span class="nv">timeout: </span><span class="mi">0</span><span class="p">,</span>
    <span class="nv">data: </span><span class="kc">null</span><span class="p">,</span>
    <span class="nv">dataType: </span><span class="kc">null</span><span class="p">,</span>
    <span class="nv">username: </span><span class="kc">null</span><span class="p">,</span>
    <span class="nv">password: </span><span class="kc">null</span><span class="p">,</span>
    <span class="nv">cache: </span><span class="kc">null</span><span class="p">,</span>
    <span class="nv">traditional: </span><span class="kc">false</span><span class="p">,</span>
    <span class="nv">headers: </span><span class="p">{},</span>
    <span class="o">*</span><span class="err">/</span>

    <span class="nv">accepts: </span><span class="p">{</span>
      <span class="nv">xml: </span><span class="s2">&quot;application/xml, text/xml&quot;</span><span class="p">,</span>
      <span class="nv">html: </span><span class="s2">&quot;text/html&quot;</span><span class="p">,</span>
      <span class="nv">text: </span><span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
      <span class="nv">json: </span><span class="s2">&quot;application/json, text/javascript&quot;</span><span class="p">,</span>
      <span class="s2">&quot;*&quot;</span><span class="o">:</span> <span class="nx">allTypes</span>
    <span class="p">},</span>

    <span class="nv">contents: </span><span class="p">{</span>
      <span class="nv">xml: </span><span class="sr">/xml/</span><span class="p">,</span>
      <span class="nv">html: </span><span class="sr">/html/</span><span class="p">,</span>
      <span class="nv">json: </span><span class="sr">/json/</span>
    <span class="p">},</span>

    <span class="nv">responseFields: </span><span class="p">{</span>
      <span class="nv">xml: </span><span class="s2">&quot;responseXML&quot;</span><span class="p">,</span>
      <span class="nv">text: </span><span class="s2">&quot;responseText&quot;</span>
    <span class="p">},</span>

    <span class="err">// List of data converters</span>
    <span class="o">/</span><span class="err">/ 1) key format is &quot;source_type destination_type&quot; (a single space in-between)</span>
    <span class="o">/</span><span class="err">/ 2) the catchall symbol &quot;*&quot; can be used for source_type</span>
    <span class="nv">converters: </span><span class="p">{</span>

      <span class="err">// Convert anything to text</span>
      <span class="s2">&quot;* text&quot;</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nb">String</span><span class="p">,</span>

      <span class="err">// Text to html (true = no transformation)</span>
      <span class="s2">&quot;text html&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

      <span class="err">// Evaluate text as a json expression</span>
      <span class="s2">&quot;text json&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">,</span>

      <span class="err">// Parse text as xml</span>
      <span class="s2">&quot;text xml&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseXML</span>
    <span class="p">},</span>

    <span class="err">// For options that shouldn&#39;t be deep extended:</span>
    <span class="o">/</span><span class="err">/ you can add your own custom options here if</span>
    <span class="o">/</span><span class="err">/ and when you create one that shouldn&#39;t be</span>
    <span class="o">/</span><span class="err">/ deep extended (see ajaxExtend)</span>
    <span class="nv">flatOptions: </span><span class="p">{</span>
      <span class="nv">context: </span><span class="kc">true</span><span class="p">,</span>
      <span class="nv">url: </span><span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">ajaxPrefilter: </span><span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">prefilters</span> <span class="p">),</span>
  <span class="nv">ajaxTransport: </span><span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">transports</span> <span class="p">),</span>

  <span class="err">// Main method</span>
  <span class="nv">ajax: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>

    <span class="err">// If url is an object, simulate pre-1.5 signature</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">url</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">options = </span><span class="nx">url</span><span class="p">;</span>
      <span class="nv">url = </span><span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Force options to be an object</span>
    <span class="nv">options = </span><span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="nx">var</span> <span class="err">// Create the final options object</span>
      <span class="nv">s = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">options</span> <span class="p">),</span>
      <span class="err">// Callbacks context</span>
      <span class="nv">callbackContext = </span><span class="nx">s</span><span class="p">.</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">s</span><span class="p">,</span>
      <span class="err">// Context for global events</span>
      <span class="o">/</span><span class="err">/ It&#39;s the callbackContext if one was provided in the options</span>
      <span class="o">/</span><span class="err">/ and if it&#39;s a DOM node or a jQuery collection</span>
      <span class="nv">globalEventContext = </span><span class="nx">callbackContext</span> <span class="o">!==</span> <span class="nx">s</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">callbackContext</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="nx">callbackContext</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="o">?</span>
            <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">callbackContext</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">,</span>
      <span class="err">// Deferreds</span>
      <span class="nv">deferred = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nv">completeDeferred = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span> <span class="s2">&quot;once memory&quot;</span> <span class="p">),</span>
      <span class="err">// Status-dependent callbacks</span>
      <span class="nv">statusCode = </span><span class="nx">s</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="err">// ifModified key</span>
      <span class="nx">ifModifiedKey</span><span class="p">,</span>
      <span class="err">// Headers (they are sent all at once)</span>
      <span class="nv">requestHeaders = </span><span class="p">{},</span>
      <span class="nv">requestHeadersNames = </span><span class="p">{},</span>
      <span class="err">// Response headers</span>
      <span class="nx">responseHeadersString</span><span class="p">,</span>
      <span class="nx">responseHeaders</span><span class="p">,</span>
      <span class="err">// transport</span>
      <span class="nx">transport</span><span class="p">,</span>
      <span class="err">// timeout handle</span>
      <span class="nx">timeoutTimer</span><span class="p">,</span>
      <span class="err">// Cross-domain detection vars</span>
      <span class="nx">parts</span><span class="p">,</span>
      <span class="err">// The jqXHR state</span>
      <span class="nv">state = </span><span class="mi">0</span><span class="p">,</span>
      <span class="err">// To know if global events are to be dispatched</span>
      <span class="nx">fireGlobals</span><span class="p">,</span>
      <span class="err">// Loop variable</span>
      <span class="nx">i</span><span class="p">,</span>
      <span class="err">// Fake xhr</span>
      <span class="nv">jqXHR = </span><span class="p">{</span>

        <span class="nv">readyState: </span><span class="mi">0</span><span class="p">,</span>

        <span class="err">// Caches the header</span>
        <span class="nv">setRequestHeader: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">var</span> <span class="nv">lname = </span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
            <span class="nv">name = </span><span class="nx">requestHeadersNames</span><span class="p">[</span> <span class="nx">lname</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">requestHeadersNames</span><span class="p">[</span> <span class="nx">lname</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
            <span class="nx">requestHeaders</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="err">// Raw string</span>
        <span class="nv">getAllResponseHeaders: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">?</span> <span class="nv">responseHeadersString : </span><span class="kc">null</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="err">// Builds headers hashtable if needed</span>
        <span class="nv">getResponseHeader: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">var</span> <span class="nx">match</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">responseHeaders</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">responseHeaders = </span><span class="p">{};</span>
              <span class="k">while</span><span class="p">(</span> <span class="p">(</span> <span class="nv">match = </span><span class="nx">rheaders</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">responseHeadersString</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">responseHeaders</span><span class="p">[</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nv">match = </span><span class="nx">responseHeaders</span><span class="p">[</span> <span class="nx">key</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">match</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">match</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="err">// Overrides response content-type header</span>
        <span class="nv">overrideMimeType: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">s.mimeType = </span><span class="nx">type</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="err">// Cancel the request</span>
        <span class="nv">abort: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">statusText</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">statusText = </span><span class="nx">statusText</span> <span class="o">||</span> <span class="s2">&quot;abort&quot;</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">transport</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">transport</span><span class="p">.</span><span class="nx">abort</span><span class="p">(</span> <span class="nx">statusText</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">done</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">statusText</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

    <span class="err">// Callback for when everything is done</span>
    <span class="o">/</span><span class="err">/ It is defined here because jslint complains if it is declared</span>
    <span class="o">/</span><span class="err">/ at the end of the function (which would be more logical and readable)</span>
    <span class="nx">function</span> <span class="nx">done</span><span class="p">(</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">nativeStatusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// Called once</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ State is &quot;done&quot; now</span>
      <span class="nv">state = </span><span class="mi">2</span><span class="p">;</span>

      <span class="err">// Clear timeout if it exists</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">timeoutTimer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">timeoutTimer</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Dereference transport for early garbage collection</span>
      <span class="o">/</span><span class="err">/ (no matter how long the jqXHR object will be used)</span>
      <span class="nv">transport = </span><span class="kc">undefined</span><span class="p">;</span>

      <span class="err">// Cache response headers</span>
      <span class="nv">responseHeadersString = </span><span class="nx">headers</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="err">// Set readyState</span>
      <span class="nv">jqXHR.readyState = </span><span class="nx">status</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">4</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">var</span> <span class="nx">isSuccess</span><span class="p">,</span>
        <span class="nx">success</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nv">statusText = </span><span class="nx">nativeStatusText</span><span class="p">,</span>
        <span class="nv">response = </span><span class="nx">responses</span> <span class="o">?</span> <span class="nx">ajaxHandleResponses</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">responses</span> <span class="p">)</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>
        <span class="nx">lastModified</span><span class="p">,</span>
        <span class="nx">etag</span><span class="p">;</span>

      <span class="err">// If successful, handle type chaining</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">ifModified</span> <span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nv">lastModified = </span><span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span> <span class="s2">&quot;Last-Modified&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">lastModified</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nv">etag = </span><span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span> <span class="s2">&quot;Etag&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">etag</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ If not modified</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nv">statusText = </span><span class="s2">&quot;notmodified&quot;</span><span class="p">;</span>
          <span class="nv">isSuccess = </span><span class="kc">true</span><span class="p">;</span>

        <span class="err">// If we have data</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="k">try</span> <span class="p">{</span>
            <span class="nv">success = </span><span class="nx">ajaxConvert</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">response</span> <span class="p">);</span>
            <span class="nv">statusText = </span><span class="s2">&quot;success&quot;</span><span class="p">;</span>
            <span class="nv">isSuccess = </span><span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="err">// We have a parsererror</span>
            <span class="nv">statusText = </span><span class="s2">&quot;parsererror&quot;</span><span class="p">;</span>
            <span class="nv">error = </span><span class="nx">e</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="err">// We extract error from statusText</span>
        <span class="o">/</span><span class="err">/ then normalize statusText and status for non-aborts</span>
        <span class="nv">error = </span><span class="nx">statusText</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">statusText</span> <span class="o">||</span> <span class="nx">status</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">statusText = </span><span class="s2">&quot;error&quot;</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">status = </span><span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Set data for the fake xhr object</span>
      <span class="nv">jqXHR.status = </span><span class="nx">status</span><span class="p">;</span>
      <span class="nv">jqXHR.statusText = </span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">nativeStatusText</span> <span class="o">||</span> <span class="nx">statusText</span> <span class="p">);</span>

      <span class="err">// Success/Error</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isSuccess</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">error</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Status-dependent callbacks</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">(</span> <span class="nx">statusCode</span> <span class="p">);</span>
      <span class="nv">statusCode = </span><span class="kc">undefined</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajax&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">isSuccess</span> <span class="o">?</span> <span class="s2">&quot;Success&quot;</span> <span class="o">:</span> <span class="s2">&quot;Error&quot;</span> <span class="p">),</span>
            <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">isSuccess</span> <span class="o">?</span> <span class="nv">success : </span><span class="nx">error</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Complete</span>
      <span class="nx">completeDeferred</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">statusText</span> <span class="p">]</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxComplete&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">]</span> <span class="p">);</span>
        <span class="err">// Handle the global AJAX counter</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">active</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxStop&quot;</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Attach deferreds</span>
    <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span> <span class="nx">jqXHR</span> <span class="p">);</span>
    <span class="nv">jqXHR.success = </span><span class="nx">jqXHR</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
    <span class="nv">jqXHR.error = </span><span class="nx">jqXHR</span><span class="p">.</span><span class="nx">fail</span><span class="p">;</span>
    <span class="nv">jqXHR.complete = </span><span class="nx">completeDeferred</span><span class="p">.</span><span class="nx">add</span><span class="p">;</span>

    <span class="err">// Status-dependent callbacks</span>
    <span class="nv">jqXHR.statusCode = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nx">tmp</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">tmp</span> <span class="k">in</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">statusCode</span><span class="p">[</span> <span class="nx">tmp</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">statusCode</span><span class="p">[</span><span class="nx">tmp</span><span class="p">],</span> <span class="nx">map</span><span class="p">[</span><span class="nx">tmp</span><span class="p">]</span> <span class="p">];</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">tmp = </span><span class="nx">map</span><span class="p">[</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">status</span> <span class="p">];</span>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="k">then</span><span class="p">(</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">tmp</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="err">// Remove hash character (#7531: and string promotion)</span>
    <span class="o">/</span><span class="err">/ Add protocol if not provided (#5866: IE7 issue with protocol-less urls)</span>
    <span class="o">/</span><span class="err">/ We also use the url parameter if available</span>
    <span class="nv">s.url = </span><span class="p">(</span> <span class="p">(</span> <span class="nx">url</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rhash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rprotocol</span><span class="p">,</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;//&quot;</span> <span class="p">);</span>

    <span class="err">// Extract dataTypes list</span>
    <span class="nv">s.dataTypes = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspacesAjax</span> <span class="p">);</span>

    <span class="err">// Determine if a cross-domain request is in order</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">parts = </span><span class="nx">rurl</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">);</span>
      <span class="nv">s.crossDomain = </span><span class="o">!!</span><span class="p">(</span> <span class="nx">parts</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">!=</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">!=</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">||</span>
          <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;http:&quot;</span> <span class="o">?</span> <span class="mi">80</span> <span class="o">:</span> <span class="mi">443</span> <span class="p">)</span> <span class="p">)</span> <span class="o">!=</span>
            <span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;http:&quot;</span> <span class="o">?</span> <span class="mi">80</span> <span class="o">:</span> <span class="mi">443</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
      <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Convert data if not already a string</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">processData</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">s.data = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">traditional</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Apply prefilters</span>
    <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">prefilters</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>

    <span class="err">// If request was aborted inside a prefiler, stop there</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ We can fire global events as of now if asked to</span>
    <span class="nv">fireGlobals = </span><span class="nx">s</span><span class="p">.</span><span class="nx">global</span><span class="p">;</span>

    <span class="err">// Uppercase the type</span>
    <span class="nv">s.type = </span><span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>

    <span class="err">// Determine if request has content</span>
    <span class="nv">s.hasContent = </span><span class="o">!</span><span class="nx">rnoContent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>

    <span class="err">// Watch for a new set of requests</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">active</span><span class="o">++</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxStart&quot;</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ More options handling for requests with no content</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// If data is available, append data to url</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="err">// #9682: remove data so that it&#39;s not used in an eventual retry</span>
        <span class="k">delete</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Get ifModifiedKey before adding the anti-cache parameter</span>
      <span class="nv">ifModifiedKey = </span><span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>

      <span class="err">// Add anti-cache in url if needed</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nx">var</span> <span class="nv">ts = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
          <span class="err">// try replacing _= if it is there</span>
          <span class="nv">ret = </span><span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rts</span><span class="p">,</span> <span class="s2">&quot;$1_=&quot;</span> <span class="o">+</span> <span class="nx">ts</span> <span class="p">);</span>

        <span class="err">// if nothing was replaced, add timestamp to the end</span>
        <span class="nv">s.url = </span><span class="nx">ret</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_=&quot;</span> <span class="o">+</span> <span class="nv">ts : </span><span class="s2">&quot;&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Set the correct header, if data is being sent</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">contentType</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">ifModified</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ifModifiedKey = </span><span class="nx">ifModifiedKey</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;If-Modified-Since&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;If-None-Match&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Set the Accepts header for the server, depending on the dataType</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span>
      <span class="s2">&quot;Accept&quot;</span><span class="p">,</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">?</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">?</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nx">allTypes</span> <span class="o">+</span> <span class="s2">&quot;; q=0.01&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span>
    <span class="p">);</span>

    <span class="err">// Check for headers option</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Allow custom headers/mimetypes and early abort</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">beforeSend</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">beforeSend</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Abort if not done already</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Install callbacks on deferreds</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span> <span class="nv">success: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">error: </span><span class="mi">1</span><span class="p">,</span> <span class="nv">complete: </span><span class="mi">1</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">[</span> <span class="nx">i</span> <span class="p">](</span> <span class="nx">s</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Get transport</span>
    <span class="nv">transport = </span><span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">transports</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>

    <span class="err">// If no transport, we auto-abort</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">transport</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">done</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;No Transport&quot;</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">jqXHR.readyState = </span><span class="mi">1</span><span class="p">;</span>
      <span class="err">// Send global event</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxSend&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="o">/</span><span class="err">/ Timeout</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">async</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">timeoutTimer = </span><span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">function</span><span class="p">(){</span>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">abort</span><span class="p">(</span> <span class="s2">&quot;timeout&quot;</span> <span class="p">);</span>
        <span class="p">},</span> <span class="nx">s</span><span class="p">.</span><span class="nx">timeout</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nv">state = </span><span class="mi">1</span><span class="p">;</span>
        <span class="nx">transport</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="nx">requestHeaders</span><span class="p">,</span> <span class="nx">done</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="err">// Propagate exception as error if not done</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">done</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
        <span class="err">// Simply rethrow otherwise</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jqXHR</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Serialize an array of form elements or a set of</span>
  <span class="o">/</span><span class="err">/ key/values into a query string</span>
  <span class="nv">param: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">traditional</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">s = </span><span class="p">[],</span>
      <span class="nv">add = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// If value is a function, invoke it and return its value</span>
        <span class="nv">value = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
        <span class="nx">s</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">};</span>

    <span class="err">// Set traditional to true for jQuery &lt;= 1.3.2 behavior.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">traditional</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">traditional = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">traditional</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ If an array was passed in, assume that it is an array of form elements.</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Serialize the form elements</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="p">);</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="err">// If traditional, encode the &quot;old&quot; way (the way 1.3.2 or older</span>
      <span class="o">/</span><span class="err">/ did it), otherwise encode params recursively.</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">prefix</span> <span class="k">in</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span> <span class="nx">prefix</span> <span class="p">],</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Return the resulting serialization</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;&amp;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">r20</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">function</span> <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Serialize array item.</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">v</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">traditional</span> <span class="o">||</span> <span class="nx">rbracket</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">prefix</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Treat each array item as a scalar.</span>
        <span class="nx">add</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">v</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="err">// If array item is non-scalar (array or object), encode its</span>
        <span class="o">/</span><span class="err">/ numeric index to resolve deserialization ambiguity issues.</span>
        <span class="o">/</span><span class="err">/ Note that rack (as of 1.0.0) can&#39;t currently deserialize</span>
        <span class="o">/</span><span class="err">/ nested arrays properly, and attempting to do so may cause</span>
        <span class="o">/</span><span class="err">/ a server error. Possible fixes are to modify rack&#39;s</span>
        <span class="o">/</span><span class="err">/ deserialization algorithm or to provide an option or flag</span>
        <span class="o">/</span><span class="err">/ to force array serialization to be shallow.</span>
        <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">?</span> <span class="nv">i : </span><span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">traditional</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Serialize object item.</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="err">// Serialize scalar item.</span>
    <span class="nx">add</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">obj</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ This is still on the jQuery object... for now</span>
<span class="o">/</span><span class="err">/ Want to move this to jQuery.ajax some day</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="err">// Counter for holding the number of active queries</span>
  <span class="nv">active: </span><span class="mi">0</span><span class="p">,</span>

  <span class="err">// Last-Modified header cache for next request</span>
  <span class="nv">lastModified: </span><span class="p">{},</span>
  <span class="nv">etag: </span><span class="p">{}</span>

<span class="p">});</span>

<span class="err">/* Handles responses to an ajax request:</span>
 <span class="o">*</span> <span class="o">-</span> <span class="nx">sets</span> <span class="nx">all</span> <span class="nx">responseXXX</span> <span class="nx">fields</span> <span class="nx">accordingly</span>
 <span class="o">*</span> <span class="o">-</span> <span class="nx">finds</span> <span class="nx">the</span> <span class="nx">right</span> <span class="nx">dataType</span> <span class="p">(</span><span class="nx">mediates</span> <span class="nx">between</span> <span class="nx">content</span><span class="o">-</span><span class="nx">type</span> <span class="o">and</span> <span class="nx">expected</span> <span class="nx">dataType</span><span class="p">)</span>
 <span class="o">*</span> <span class="o">-</span> <span class="nx">returns</span> <span class="nx">the</span> <span class="nx">corresponding</span> <span class="nx">response</span>
 <span class="o">*</span><span class="err">/</span>
<span class="nx">function</span> <span class="nx">ajaxHandleResponses</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">var</span> <span class="nv">contents = </span><span class="nx">s</span><span class="p">.</span><span class="nx">contents</span><span class="p">,</span>
    <span class="nv">dataTypes = </span><span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">,</span>
    <span class="nv">responseFields = </span><span class="nx">s</span><span class="p">.</span><span class="nx">responseFields</span><span class="p">,</span>
    <span class="nx">ct</span><span class="p">,</span>
    <span class="nx">type</span><span class="p">,</span>
    <span class="nx">finalDataType</span><span class="p">,</span>
    <span class="nx">firstDataType</span><span class="p">;</span>

  <span class="err">// Fill responseXXX fields</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responseFields</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">[</span> <span class="nx">responseFields</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">responses</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Remove auto dataType and get content-type in the process</span>
  <span class="k">while</span><span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">ct</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">ct = </span><span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">||</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span> <span class="s2">&quot;content-type&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Check if we&#39;re dealing with a known content-type</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">ct</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">contents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">contents</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ct</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ Check to see if we have a response for the expected dataType</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">finalDataType = </span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="err">// Try convertible dataTypes</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">finalDataType = </span><span class="nx">type</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">firstDataType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">firstDataType = </span><span class="nx">type</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="o">/</span><span class="err">/ Or just use first one</span>
    <span class="nv">finalDataType = </span><span class="nx">finalDataType</span> <span class="o">||</span> <span class="nx">firstDataType</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">/</span><span class="err">/ If we found a dataType</span>
  <span class="o">/</span><span class="err">/ We add the dataType to the list if needed</span>
  <span class="o">/</span><span class="err">/ and return the corresponding response</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">finalDataType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">finalDataType</span> <span class="o">!==</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">finalDataType</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">responses</span><span class="p">[</span> <span class="nx">finalDataType</span> <span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Chain conversions given the request and the original response</span>
<span class="nx">function</span> <span class="nx">ajaxConvert</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">response</span> <span class="p">)</span> <span class="p">{</span>

  <span class="err">// Apply the dataFilter if provided</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataFilter</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">response = </span><span class="nx">s</span><span class="p">.</span><span class="nx">dataFilter</span><span class="p">(</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataType</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">var</span> <span class="nv">dataTypes = </span><span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">,</span>
    <span class="nv">converters = </span><span class="p">{},</span>
    <span class="nx">i</span><span class="p">,</span>
    <span class="nx">key</span><span class="p">,</span>
    <span class="nv">length = </span><span class="nx">dataTypes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">tmp</span><span class="p">,</span>
    <span class="err">// Current and previous dataTypes</span>
    <span class="nv">current = </span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span>
    <span class="nx">prev</span><span class="p">,</span>
    <span class="err">// Conversion expression</span>
    <span class="nx">conversion</span><span class="p">,</span>
    <span class="err">// Conversion function</span>
    <span class="nx">conv</span><span class="p">,</span>
    <span class="err">// Conversion functions (transitive conversion)</span>
    <span class="nx">conv1</span><span class="p">,</span>
    <span class="nx">conv2</span><span class="p">;</span>

  <span class="err">// For each dataType in the chain</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

    <span class="err">// Create converters map</span>
    <span class="o">/</span><span class="err">/ with lowercased keys</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">converters</span><span class="p">[</span> <span class="nx">key</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Get the dataTypes</span>
    <span class="nv">prev = </span><span class="nx">current</span><span class="p">;</span>
    <span class="nv">current = </span><span class="nx">dataTypes</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

    <span class="err">// If current is auto dataType, update it to prev</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">current</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">current = </span><span class="nx">prev</span><span class="p">;</span>
    <span class="err">// If no auto and dataTypes are actually different</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">prev</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">prev</span> <span class="o">!==</span> <span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>

      <span class="err">// Get the converter</span>
      <span class="nv">conversion = </span><span class="nx">prev</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">current</span><span class="p">;</span>
      <span class="nv">conv = </span><span class="nx">converters</span><span class="p">[</span> <span class="nx">conversion</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">converters</span><span class="p">[</span> <span class="s2">&quot;* &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">];</span>

      <span class="err">// If there is no direct converter, search transitively</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">conv</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">conv2 = </span><span class="kc">undefined</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">conv1</span> <span class="k">in</span> <span class="nx">converters</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">tmp = </span><span class="nx">conv1</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">prev</span> <span class="o">||</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">conv2 = </span><span class="nx">converters</span><span class="p">[</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">conv2</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nv">conv1 = </span><span class="nx">converters</span><span class="p">[</span> <span class="nx">conv1</span> <span class="p">];</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">conv1</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nv">conv = </span><span class="nx">conv2</span><span class="p">;</span>
              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">conv2</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nv">conv = </span><span class="nx">conv1</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="o">/</span><span class="err">/ If we found no converter, dispatch an error</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">conv</span> <span class="o">||</span> <span class="nx">conv2</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;No conversion from &quot;</span> <span class="o">+</span> <span class="nx">conversion</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot; to &quot;</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="o">/</span><span class="err">/ If found converter is not an equivalence</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">conv</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Convert with 1 or 2 converters accordingly</span>
        <span class="nv">response = </span><span class="nx">conv</span> <span class="o">?</span> <span class="nx">conv</span><span class="p">(</span> <span class="nx">response</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">conv2</span><span class="p">(</span> <span class="nx">conv1</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">}</span>




<span class="nx">var</span> <span class="nv">jsc = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
  <span class="nv">jsre = </span><span class="sr">/(\=)\?(&amp;|$)|\?\?/i</span><span class="p">;</span>

<span class="err">// Default jsonp settings</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
  <span class="nv">jsonp: </span><span class="s2">&quot;callback&quot;</span><span class="p">,</span>
  <span class="nv">jsonpCallback: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">jsc</span><span class="o">++</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Detect, normalize options and install callbacks for jsonp requests</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxPrefilter</span><span class="p">(</span> <span class="s2">&quot;json jsonp&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">originalSettings</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">var</span> <span class="nv">inspectData = </span><span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">===</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="k">typeof</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;jsonp&quot;</span> <span class="o">||</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">jsre</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">||</span>
        <span class="nx">inspectData</span> <span class="o">&amp;&amp;</span> <span class="nx">jsre</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">var</span> <span class="nx">responseContainer</span><span class="p">,</span>
      <span class="nv">jsonpCallback = s.jsonpCallback =</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">()</span> <span class="o">:</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">,</span>
      <span class="nv">previous = </span><span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">],</span>
      <span class="nv">url = </span><span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
      <span class="nv">data = </span><span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
      <span class="nv">replace = </span><span class="s2">&quot;$1&quot;</span> <span class="o">+</span> <span class="nx">jsonpCallback</span> <span class="o">+</span> <span class="s2">&quot;$2&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">url = </span><span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">jsre</span><span class="p">,</span> <span class="nx">replace</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">===</span> <span class="nx">url</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">inspectData</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">data = </span><span class="nx">data</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">jsre</span><span class="p">,</span> <span class="nx">replace</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">===</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Add callback manually</span>
          <span class="nx">url</span> <span class="o">+=</span> <span class="p">(</span><span class="sr">/\?/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">jsonpCallback</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nv">s.url = </span><span class="nx">url</span><span class="p">;</span>
    <span class="nv">s.data = </span><span class="nx">data</span><span class="p">;</span>

    <span class="err">// Install callback</span>
    <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">response</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">responseContainer = </span><span class="p">[</span> <span class="nx">response</span> <span class="p">];</span>
    <span class="p">};</span>

    <span class="err">// Clean-up function</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="err">// Set callback back to previous value</span>
      <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span>
      <span class="err">// Call if it was a function and we have a response</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">responseContainer</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">previous</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">](</span> <span class="nx">responseContainer</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="err">// Use data converter to retrieve json after script execution</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span><span class="s2">&quot;script json&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">responseContainer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">jsonpCallback</span> <span class="o">+</span> <span class="s2">&quot; was not called&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">responseContainer</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="p">};</span>

    <span class="err">// force json dataType</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">;</span>

    <span class="err">// Delegate to script</span>
    <span class="k">return</span> <span class="s2">&quot;script&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="err">// Install script dataType</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
  <span class="nv">accepts: </span><span class="p">{</span>
    <span class="nv">script: </span><span class="s2">&quot;text/javascript, application/javascript, application/ecmascript, application/x-ecmascript&quot;</span>
  <span class="p">},</span>
  <span class="nv">contents: </span><span class="p">{</span>
    <span class="nv">script: </span><span class="sr">/javascript|ecmascript/</span>
  <span class="p">},</span>
  <span class="nv">converters: </span><span class="p">{</span>
    <span class="s2">&quot;text script&quot;</span><span class="o">:</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="nx">text</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">text</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Handle cache&#39;s special case and global</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxPrefilter</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">s.cache = </span><span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">s.type = </span><span class="s2">&quot;GET&quot;</span><span class="p">;</span>
    <span class="nv">s.global = </span><span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Bind script tag hack transport</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxTransport</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>

  <span class="err">// This transport only deals with cross domain requests</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">var</span> <span class="nx">script</span><span class="p">,</span>
      <span class="nv">head = </span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;head&quot;</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nv">send: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nv">script = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>

        <span class="nv">script.async = </span><span class="s2">&quot;async&quot;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">scriptCharset</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">script.charset = </span><span class="nx">s</span><span class="p">.</span><span class="nx">scriptCharset</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">script.src = </span><span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>

        <span class="err">// Attach handlers for all browsers</span>
        <span class="nv">script.onload = script.onreadystatechange = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="o">||</span> <span class="o">!</span><span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">||</span> <span class="sr">/loaded|complete/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

            <span class="err">// Handle memory leak in IE</span>
            <span class="nv">script.onload = script.onreadystatechange = </span><span class="kc">null</span><span class="p">;</span>

            <span class="err">// Remove the script</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">head</span> <span class="o">&amp;&amp;</span> <span class="nx">script</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">script</span> <span class="p">);</span>
            <span class="p">}</span>

            <span class="o">/</span><span class="err">/ Dereference the script</span>
            <span class="nv">script = </span><span class="kc">undefined</span><span class="p">;</span>

            <span class="err">// Callback if not abort</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">callback</span><span class="p">(</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;success&quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">};</span>
        <span class="err">// Use insertBefore instead of appendChild  to circumvent an IE6 bug.</span>
        <span class="o">/</span><span class="err">/ This arises when a base node is used (#2709 and #4378).</span>
        <span class="nx">head</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">script</span><span class="p">,</span> <span class="nx">head</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">},</span>

      <span class="nv">abort: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">script</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="nx">var</span> <span class="err">// #5280: Internet Explorer will keep connections alive if we don&#39;t abort on unload</span>
  <span class="nv">xhrOnUnloadAbort = </span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">?</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">// Abort all pending requests</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">xhrCallbacks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">key</span> <span class="p">](</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nv">xhrId = </span><span class="mi">0</span><span class="p">,</span>
  <span class="nx">xhrCallbacks</span><span class="p">;</span>

<span class="err">// Functions to create xhrs</span>
<span class="nx">function</span> <span class="nx">createStandardXHR</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="nx">function</span> <span class="nx">createActiveXHR</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">(</span> <span class="s2">&quot;Microsoft.XMLHTTP&quot;</span> <span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Create the request object</span>
<span class="o">/</span><span class="err">/ (This is still attached to ajaxSettings for backward compatibility)</span>
<span class="nv">jQuery.ajaxSettings.xhr = </span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">?</span>
  <span class="err">/* Microsoft failed to properly</span>
   <span class="o">*</span> <span class="nx">implement</span> <span class="nx">the</span> <span class="nx">XMLHttpRequest</span> <span class="k">in</span> <span class="nx">IE7</span> <span class="p">(</span><span class="nx">can</span><span class="s1">&#39;t request local files),</span>
<span class="s1">   * so we use the ActiveXObject when it is available</span>
<span class="s1">   * Additionally XMLHttpRequest can be disabled in IE7/IE8 so</span>
<span class="s1">   * we need a fallback.</span>
<span class="s1">   */</span>
<span class="s1">  function() {</span>
<span class="s1">    return !this.isLocal &amp;&amp; createStandardXHR() || createActiveXHR();</span>
<span class="s1">  } :</span>
<span class="s1">  // For all other browsers, use the standard XMLHttpRequest object</span>
<span class="s1">  createStandardXHR;</span>

<span class="s1">// Determine support properties</span>
<span class="s1">(function( xhr ) {</span>
<span class="s1">  jQuery.extend( jQuery.support, {</span>
<span class="s1">    ajax: !!xhr,</span>
<span class="s1">    cors: !!xhr &amp;&amp; ( &quot;withCredentials&quot; in xhr )</span>
<span class="s1">  });</span>
<span class="s1">})( jQuery.ajaxSettings.xhr() );</span>

<span class="s1">// Create transport if the browser can provide an xhr</span>
<span class="s1">if ( jQuery.support.ajax ) {</span>

<span class="s1">  jQuery.ajaxTransport(function( s ) {</span>
<span class="s1">    // Cross domain only allowed if supported through XMLHttpRequest</span>
<span class="s1">    if ( !s.crossDomain || jQuery.support.cors ) {</span>

<span class="s1">      var callback;</span>

<span class="s1">      return {</span>
<span class="s1">        send: function( headers, complete ) {</span>

<span class="s1">          // Get a new xhr</span>
<span class="s1">          var xhr = s.xhr(),</span>
<span class="s1">            handle,</span>
<span class="s1">            i;</span>

<span class="s1">          // Open the socket</span>
<span class="s1">          // Passing null username, generates a login popup on Opera (#2865)</span>
<span class="s1">          if ( s.username ) {</span>
<span class="s1">            xhr.open( s.type, s.url, s.async, s.username, s.password );</span>
<span class="s1">          } else {</span>
<span class="s1">            xhr.open( s.type, s.url, s.async );</span>
<span class="s1">          }</span>

<span class="s1">          // Apply custom fields if provided</span>
<span class="s1">          if ( s.xhrFields ) {</span>
<span class="s1">            for ( i in s.xhrFields ) {</span>
<span class="s1">              xhr[ i ] = s.xhrFields[ i ];</span>
<span class="s1">            }</span>
<span class="s1">          }</span>

<span class="s1">          // Override mime type if needed</span>
<span class="s1">          if ( s.mimeType &amp;&amp; xhr.overrideMimeType ) {</span>
<span class="s1">            xhr.overrideMimeType( s.mimeType );</span>
<span class="s1">          }</span>

<span class="s1">          // X-Requested-With header</span>
<span class="s1">          // For cross-domain requests, seeing as conditions for a preflight are</span>
<span class="s1">          // akin to a jigsaw puzzle, we simply never set it to be sure.</span>
<span class="s1">          // (it can always be set on a per-request basis or even using ajaxSetup)</span>
<span class="s1">          // For same-domain requests, won&#39;</span><span class="nx">t</span> <span class="nx">change</span> <span class="nx">header</span> <span class="k">if</span> <span class="nx">already</span> <span class="nx">provided</span><span class="p">.</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;X-Requested-With&quot;</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">headers</span><span class="p">[</span> <span class="s2">&quot;X-Requested-With&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XMLHttpRequest&quot;</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Need an extra try/catch for cross domain requests in Firefox 3</span>
          <span class="k">try</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">_</span> <span class="p">)</span> <span class="p">{}</span>

          <span class="o">/</span><span class="err">/ Do send the request</span>
          <span class="o">/</span><span class="err">/ This may raise an exception which is actually</span>
          <span class="o">/</span><span class="err">/ handled in jQuery.ajax (so no try/catch here)</span>
          <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">null</span> <span class="p">);</span>

          <span class="err">// Listener</span>
          <span class="nv">callback = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nx">var</span> <span class="nx">status</span><span class="p">,</span>
              <span class="nx">statusText</span><span class="p">,</span>
              <span class="nx">responseHeaders</span><span class="p">,</span>
              <span class="nx">responses</span><span class="p">,</span>
              <span class="nx">xml</span><span class="p">;</span>

            <span class="err">// Firefox throws exceptions when accessing properties</span>
            <span class="o">/</span><span class="err">/ of an xhr when a network error occured</span>
            <span class="o">/</span><span class="sr">/ http:/</span><span class="o">/</span><span class="nx">helpful</span><span class="p">.</span><span class="nx">knobs</span><span class="o">-</span><span class="nx">dials</span><span class="p">.</span><span class="nx">com</span><span class="err">/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)</span>
            <span class="k">try</span> <span class="p">{</span>

              <span class="err">// Was never called and is aborted or complete</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="o">||</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

                <span class="err">// Only called once</span>
                <span class="nv">callback = </span><span class="kc">undefined</span><span class="p">;</span>

                <span class="err">// Do not keep as active anymore</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nv">xhr.onreadystatechange = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">xhrOnUnloadAbort</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="k">delete</span> <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">handle</span> <span class="p">];</span>
                  <span class="p">}</span>
                <span class="p">}</span>

                <span class="o">/</span><span class="err">/ If it&#39;s an abort</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="err">// Abort it manually if needed</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!==</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">xhr</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
                  <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nv">status = </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
                  <span class="nv">responseHeaders = </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">getAllResponseHeaders</span><span class="p">();</span>
                  <span class="nv">responses = </span><span class="p">{};</span>
                  <span class="nv">xml = </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">;</span>

                  <span class="err">// Construct response list</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">xml</span> <span class="o">&amp;&amp;</span> <span class="nx">xml</span><span class="p">.</span><span class="nx">documentElement</span> <span class="sr">/* #4958 */</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nv">responses.xml = </span><span class="nx">xml</span><span class="p">;</span>
                  <span class="p">}</span>
                  <span class="nv">responses.text = </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>

                  <span class="err">// Firefox throws an exception when accessing</span>
                  <span class="o">/</span><span class="err">/ statusText for faulty cross-domain requests</span>
                  <span class="k">try</span> <span class="p">{</span>
                    <span class="nv">statusText = </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="p">;</span>
                  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="err">// We normalize with Webkit giving an empty statusText</span>
                    <span class="nv">statusText = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
                  <span class="p">}</span>

                  <span class="o">/</span><span class="err">/ Filter status for non standard behaviors</span>

                  <span class="o">/</span><span class="err">/ If the request is local and we have data: assume a success</span>
                  <span class="o">/</span><span class="err">/ (success with no data won&#39;t get notified, that&#39;s the best we</span>
                  <span class="o">/</span><span class="err">/ can do given current implementations)</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">status</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">isLocal</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nv">status = </span><span class="nx">responses</span><span class="p">.</span><span class="nx">text</span> <span class="o">?</span> <span class="mi">200</span> <span class="o">:</span> <span class="mi">404</span><span class="p">;</span>
                  <span class="err">// IE - #1450: sometimes returns 1223 when it should be 204</span>
                  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">1223</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nv">status = </span><span class="mi">204</span><span class="p">;</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">firefoxAccessException</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">complete</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">firefoxAccessException</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>

            <span class="o">/</span><span class="err">/ Call complete if needed</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">complete</span><span class="p">(</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">responseHeaders</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">};</span>

          <span class="err">// if we&#39;re in sync mode or it&#39;s in cache</span>
          <span class="o">/</span><span class="err">/ and has been retrieved directly (IE6 &amp; IE7)</span>
          <span class="o">/</span><span class="err">/ we need to manually fire the callback</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">async</span> <span class="o">||</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">();</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">handle = </span><span class="o">++</span><span class="nx">xhrId</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">xhrOnUnloadAbort</span> <span class="p">)</span> <span class="p">{</span>
              <span class="err">// Create the active xhrs callbacks list if needed</span>
              <span class="o">/</span><span class="err">/ and attach the unload handler</span>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">xhrCallbacks</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nv">xhrCallbacks = </span><span class="p">{};</span>
                <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">window</span> <span class="p">).</span><span class="nx">unload</span><span class="p">(</span> <span class="nx">xhrOnUnloadAbort</span> <span class="p">);</span>
              <span class="p">}</span>
              <span class="o">/</span><span class="err">/ Add to list of active xhrs callbacks</span>
              <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">handle</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">xhr.onreadystatechange = </span><span class="nx">callback</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nv">abort: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>




<span class="nx">var</span> <span class="nv">elemdisplay = </span><span class="p">{},</span>
  <span class="nx">iframe</span><span class="p">,</span> <span class="nx">iframeDoc</span><span class="p">,</span>
  <span class="nv">rfxtypes = </span><span class="sr">/^(?:toggle|show|hide)$/</span><span class="p">,</span>
  <span class="nv">rfxnum = </span><span class="sr">/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i</span><span class="p">,</span>
  <span class="nx">timerId</span><span class="p">,</span>
  <span class="nv">fxAttrs = </span><span class="p">[</span>
    <span class="err">// height animations</span>
    <span class="p">[</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">,</span> <span class="s2">&quot;marginBottom&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingTop&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingBottom&quot;</span> <span class="p">],</span>
    <span class="err">// width animations</span>
    <span class="p">[</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;marginRight&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingRight&quot;</span> <span class="p">],</span>
    <span class="err">// opacity animations</span>
    <span class="p">[</span> <span class="s2">&quot;opacity&quot;</span> <span class="p">]</span>
  <span class="p">],</span>
  <span class="nx">fxNow</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">show: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">display</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">speed</span> <span class="o">||</span> <span class="nx">speed</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">var</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span> <span class="nv">j = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">display = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span>

          <span class="err">// Reset the inline display of this element to learn if it is</span>
          <span class="o">/</span><span class="err">/ being hidden by cascaded rules or not</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">display = elem.style.display = </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="o">/</span><span class="err">/ Set elements which have been overridden with display: none</span>
          <span class="o">/</span><span class="err">/ in a stylesheet to whatever the default browser style is</span>
          <span class="o">/</span><span class="err">/ for such an element</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">,</span> <span class="nx">defaultDisplay</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Set the display of most of the elements in a second loop</span>
      <span class="o">/</span><span class="err">/ to avoid the constant reflow</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">display = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">elem.style.display = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">hide: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">speed</span> <span class="o">||</span> <span class="nx">speed</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;hide&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">display</span><span class="p">,</span>
        <span class="nv">i = </span><span class="mi">0</span><span class="p">,</span>
        <span class="nv">j = </span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">display = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">!==</span> <span class="s2">&quot;none&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">,</span> <span class="nx">display</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ Set the display of the elements in a second loop</span>
      <span class="o">/</span><span class="err">/ to avoid the constant reflow</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nv">style.display = </span><span class="s2">&quot;none&quot;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// Save the old toggle function</span>
  <span class="nv">_toggle: </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">toggle</span><span class="p">,</span>

  <span class="nv">toggle: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">fn2</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">bool = </span><span class="k">typeof</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">fn2</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_toggle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">bool</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">state = </span><span class="nx">bool</span> <span class="o">?</span> <span class="nv">fn : </span><span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="o">is</span><span class="p">(</span><span class="s2">&quot;:hidden&quot;</span><span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">)[</span> <span class="nx">state</span> <span class="o">?</span> <span class="s2">&quot;show&quot;</span> <span class="o">:</span> <span class="s2">&quot;hide&quot;</span> <span class="p">]();</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;toggle&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">fn2</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">fadeTo: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;:hidden&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">().</span><span class="nx">end</span><span class="p">()</span>
          <span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="nv">opacity: </span><span class="nx">to</span><span class="p">},</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nv">animate: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">optall = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">speed</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">complete</span><span class="p">,</span> <span class="p">[</span> <span class="kc">false</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Do not change referenced properties as per-property easing will be lost</span>
    <span class="nv">prop = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">prop</span> <span class="p">);</span>

    <span class="nx">function</span> <span class="nx">doAnimation</span><span class="p">()</span> <span class="p">{</span>
      <span class="err">// XXX &#39;this&#39; does not always have a nodeName when running the</span>
      <span class="o">/</span><span class="err">/ test suite</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">queue</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_mark</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">var</span> <span class="nv">opt = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">optall</span> <span class="p">),</span>
        <span class="nv">isElement = </span><span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nv">hidden = </span><span class="nx">isElement</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="o">is</span><span class="p">(</span><span class="s2">&quot;:hidden&quot;</span><span class="p">),</span>
        <span class="nx">name</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span>
        <span class="nx">parts</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">unit</span><span class="p">,</span>
        <span class="nx">method</span><span class="p">;</span>

      <span class="err">// will store per property easing and be used to determine when an animation is complete</span>
      <span class="nv">opt.animatedProperties = </span><span class="p">{};</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>

        <span class="err">// property name normalization</span>
        <span class="nv">name = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">p</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">p</span> <span class="o">!==</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">prop</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">p</span> <span class="p">];</span>
          <span class="k">delete</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">p</span> <span class="p">];</span>
        <span class="p">}</span>

        <span class="nv">val = </span><span class="nx">prop</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

        <span class="err">// easing resolution: per property &gt; opt.specialEasing &gt; opt.easing &gt; &#39;swing&#39; (default)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">opt</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">[</span> <span class="mi">1</span> <span class="p">];</span>
          <span class="nv">val = </span><span class="nx">prop</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">opt</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">specialEasing</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">specialEasing</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">easing</span> <span class="o">||</span> <span class="s1">&#39;swing&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;hide&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">hidden</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;show&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hidden</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">isElement</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;height&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="err">// Make sure that nothing sneaks out</span>
          <span class="o">/</span><span class="err">/ Record all 3 overflow attributes because IE does not</span>
          <span class="o">/</span><span class="err">/ change the overflow attribute when overflowX and</span>
          <span class="o">/</span><span class="err">/ overflowY are set to the same value</span>
          <span class="nv">opt.overflow = </span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflowX</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflowY</span> <span class="p">];</span>

          <span class="err">// Set display property to inline-block for height/width</span>
          <span class="o">/</span><span class="err">/ animations on inline elements that are having width/height animated</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="o">&amp;&amp;</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>

            <span class="err">// inline-level elements accept inline-block;</span>
            <span class="o">/</span><span class="err">/ block-level elements need to be inline with layout</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">inlineBlockNeedsLayout</span> <span class="o">||</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nv">style.display = </span><span class="s2">&quot;inline-block&quot;</span><span class="p">;</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nv">style.zoom = </span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">style.overflow = </span><span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">e = </span><span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">p</span> <span class="p">);</span>
        <span class="nv">val = </span><span class="nx">prop</span><span class="p">[</span> <span class="nx">p</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">rfxtypes</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

          <span class="err">// Tracks whether to show or hide based on private</span>
          <span class="o">/</span><span class="err">/ data attached to the element</span>
          <span class="nv">method = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;toggle&quot;</span> <span class="o">+</span> <span class="nx">p</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;toggle&quot;</span> <span class="o">?</span> <span class="nx">hidden</span> <span class="o">?</span> <span class="s2">&quot;show&quot;</span> <span class="o">:</span> <span class="s2">&quot;hide&quot;</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">method</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;toggle&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">method</span> <span class="o">===</span> <span class="s2">&quot;show&quot;</span> <span class="o">?</span> <span class="s2">&quot;hide&quot;</span> <span class="o">:</span> <span class="s2">&quot;show&quot;</span> <span class="p">);</span>
            <span class="nx">e</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]();</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">e</span><span class="p">[</span> <span class="nx">val</span> <span class="p">]();</span>
          <span class="p">}</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nv">parts = </span><span class="nx">rfxnum</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">val</span> <span class="p">);</span>
          <span class="nv">start = </span><span class="nx">e</span><span class="p">.</span><span class="nx">cur</span><span class="p">();</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nv">end = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">);</span>
            <span class="nv">unit = </span><span class="nx">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">p</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>

            <span class="err">// We need to compute starting value</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">unit</span> <span class="o">!==</span> <span class="s2">&quot;px&quot;</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="p">(</span><span class="nx">end</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">unit</span><span class="p">);</span>
              <span class="nv">start = </span><span class="p">(</span> <span class="p">(</span><span class="nx">end</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">e</span><span class="p">.</span><span class="nx">cur</span><span class="p">()</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">start</span><span class="p">;</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">unit</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="o">/</span><span class="sr">/ If a +=/</span><span class="o">-=</span> <span class="nx">token</span> <span class="nx">was</span> <span class="nx">provided</span><span class="p">,</span> <span class="nx">we</span><span class="s1">&#39;re doing a relative animation</span>
<span class="s1">            if ( parts[1] ) {</span>
<span class="s1">              end = ( (parts[ 1 ] === &quot;-=&quot; ? -1 : 1) * end ) + start;</span>
<span class="s1">            }</span>

<span class="s1">            e.custom( start, end, unit );</span>

<span class="s1">          } else {</span>
<span class="s1">            e.custom( start, val, &quot;&quot; );</span>
<span class="s1">          }</span>
<span class="s1">        }</span>
<span class="s1">      }</span>

<span class="s1">      // For JS strict compliance</span>
<span class="s1">      return true;</span>
<span class="s1">    }</span>

<span class="s1">    return optall.queue === false ?</span>
<span class="s1">      this.each( doAnimation ) :</span>
<span class="s1">      this.queue( optall.queue, doAnimation );</span>
<span class="s1">  },</span>

<span class="s1">  stop: function( type, clearQueue, gotoEnd ) {</span>
<span class="s1">    if ( typeof type !== &quot;string&quot; ) {</span>
<span class="s1">      gotoEnd = clearQueue;</span>
<span class="s1">      clearQueue = type;</span>
<span class="s1">      type = undefined;</span>
<span class="s1">    }</span>
<span class="s1">    if ( clearQueue &amp;&amp; type !== false ) {</span>
<span class="s1">      this.queue( type || &quot;fx&quot;, [] );</span>
<span class="s1">    }</span>

<span class="s1">    return this.each(function() {</span>
<span class="s1">      var index,</span>
<span class="s1">        hadTimers = false,</span>
<span class="s1">        timers = jQuery.timers,</span>
<span class="s1">        data = jQuery._data( this );</span>

<span class="s1">      // clear marker counters if we know they won&#39;</span><span class="nx">t</span> <span class="nx">be</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_unmark</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">function</span> <span class="nx">stopQueue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">index</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">hooks = </span><span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">stop</span> <span class="o">&amp;&amp;</span> <span class="nx">index</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.run&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">index</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">stopQueue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">index</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="nv">index = </span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.run&quot;</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">stop</span> <span class="p">){</span>
        <span class="nx">stopQueue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">index</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nv">index = </span><span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">--</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">elem</span> <span class="o">===</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">queue</span> <span class="o">===</span> <span class="nx">type</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>

            <span class="err">// force the next step to be the last</span>
            <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">](</span> <span class="kc">true</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">saveState</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nv">hadTimers = </span><span class="kc">true</span><span class="p">;</span>
          <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="o">/</span><span class="err">/ start the next in the queue if the last step wasn&#39;t forced</span>
      <span class="o">/</span><span class="err">/ timers currently will call their complete callbacks, which will dequeue</span>
      <span class="o">/</span><span class="err">/ but only if they were gotoEnd</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="o">&amp;&amp;</span> <span class="nx">hadTimers</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

<span class="p">});</span>

<span class="err">// Animations created synchronously will run synchronously</span>
<span class="nx">function</span> <span class="nx">createFxNow</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">clearFxNow</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="k">return</span> <span class="p">(</span> <span class="nv">fxNow = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nx">function</span> <span class="nx">clearFxNow</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">fxNow = </span><span class="kc">undefined</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Generate parameters to create a standard animation</span>
<span class="nx">function</span> <span class="nx">genFx</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">num</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">obj = </span><span class="p">{};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">fxAttrs</span><span class="p">.</span><span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">([],</span> <span class="nx">fxAttrs</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">num</span> <span class="p">)),</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">obj</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Generate shortcuts for custom animations</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nv">slideDown: </span><span class="nx">genFx</span><span class="p">(</span> <span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
  <span class="nv">slideUp: </span><span class="nx">genFx</span><span class="p">(</span> <span class="s2">&quot;hide&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
  <span class="nv">slideToggle: </span><span class="nx">genFx</span><span class="p">(</span> <span class="s2">&quot;toggle&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
  <span class="nv">fadeIn: </span><span class="p">{</span> <span class="nv">opacity: </span><span class="s2">&quot;show&quot;</span> <span class="p">},</span>
  <span class="nv">fadeOut: </span><span class="p">{</span> <span class="nv">opacity: </span><span class="s2">&quot;hide&quot;</span> <span class="p">},</span>
  <span class="nv">fadeToggle: </span><span class="p">{</span> <span class="nv">opacity: </span><span class="s2">&quot;toggle&quot;</span> <span class="p">}</span>
<span class="p">},</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nv">speed: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">opt = </span><span class="nx">speed</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">speed</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">speed</span> <span class="p">)</span> <span class="o">:</span> <span class="p">{</span>
      <span class="nv">complete: </span><span class="nx">fn</span> <span class="o">||</span> <span class="o">!</span><span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span> <span class="o">||</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">speed</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">speed</span><span class="p">,</span>
      <span class="nv">duration: </span><span class="nx">speed</span><span class="p">,</span>
      <span class="nv">easing: </span><span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span> <span class="o">||</span> <span class="nx">easing</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">easing</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span>
    <span class="p">};</span>

    <span class="nv">opt.duration = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="kc">off</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="nv">opt.duration :</span>
      <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">[</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">.</span><span class="nx">_default</span><span class="p">;</span>

    <span class="err">// normalize opt.queue - true/undefined/null -&gt; &quot;fx&quot;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">opt.queue = </span><span class="s2">&quot;fx&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Queueing</span>
    <span class="nv">opt.old = </span><span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span><span class="p">;</span>

    <span class="nv">opt.complete = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">noUnmark</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">noUnmark</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_unmark</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nx">opt</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">easing: </span><span class="p">{</span>
    <span class="nv">linear: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">firstNum</span><span class="p">,</span> <span class="nx">diff</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">firstNum</span> <span class="o">+</span> <span class="nx">diff</span> <span class="o">*</span> <span class="nx">p</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nv">swing: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">firstNum</span><span class="p">,</span> <span class="nx">diff</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="p">(</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span> <span class="nx">p</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">diff</span> <span class="o">+</span> <span class="nx">firstNum</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">timers: </span><span class="p">[],</span>

  <span class="nv">fx: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">options = </span><span class="nx">options</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">elem = </span><span class="nx">elem</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">prop = </span><span class="nx">prop</span><span class="p">;</span>

    <span class="nv">options.orig = </span><span class="nx">options</span><span class="p">.</span><span class="nx">orig</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="p">}</span>

<span class="p">});</span>

<span class="nv">jQuery.fx.prototype = </span><span class="p">{</span>
  <span class="err">// Simple function for setting a style value</span>
  <span class="nv">update: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">now</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">_default</span> <span class="p">)(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Get the current size</span>
  <span class="nv">cur: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nx">parsed</span><span class="p">,</span>
      <span class="nv">r = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
    <span class="err">// Empty strings, null, undefined and &quot;auto&quot; are converted to 0,</span>
    <span class="o">/</span><span class="err">/ complex values such as &quot;rotate(1rad)&quot; are returned as is,</span>
    <span class="o">/</span><span class="err">/ simple values such as &quot;10px&quot; are parsed to Float.</span>
    <span class="k">return</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nv">parsed = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">r</span> <span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="o">!</span><span class="nx">r</span> <span class="o">||</span> <span class="nx">r</span> <span class="o">===</span> <span class="s2">&quot;auto&quot;</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nv">r : </span><span class="nx">parsed</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="err">// Start an animation from one number to another</span>
  <span class="nv">custom: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">unit</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">self = </span><span class="k">this</span><span class="p">,</span>
      <span class="nv">fx = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nv">startTime = </span><span class="nx">fxNow</span> <span class="o">||</span> <span class="nx">createFxNow</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">end = </span><span class="nx">to</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">now = </span><span class="k">this</span><span class="p">.</span><span class="nv">start = </span><span class="nx">from</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">pos = </span><span class="k">this</span><span class="p">.</span><span class="nv">state = </span><span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">unit = </span><span class="nx">unit</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">unit</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>

    <span class="nx">function</span> <span class="nx">t</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">step</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nv">t.queue = </span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">queue</span><span class="p">;</span>
    <span class="nv">t.elem = </span><span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
    <span class="nv">t.saveState = </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hide</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">self</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="o">+</span> <span class="nx">self</span><span class="p">.</span><span class="nx">prop</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">self</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="o">+</span> <span class="nx">self</span><span class="p">.</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">start</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">t</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">timerId</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">timerId = </span><span class="nx">setInterval</span><span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">tick</span><span class="p">,</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">interval</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="err">// Simple &#39;show&#39; function</span>
  <span class="nv">show: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">dataShow = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>

    <span class="err">// Remember where we started, so that we can go back to it later</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">orig</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">dataShow</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">options.show = </span><span class="kc">true</span><span class="p">;</span>

    <span class="err">// Begin the animation</span>
    <span class="o">/</span><span class="err">/ Make sure that we start at a small width/height to avoid any flash of content</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dataShow</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// This show is picking up where a previous hide or show left off</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">cur</span><span class="p">(),</span> <span class="nx">dataShow</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;height&quot;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">cur</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Start by showing the element</span>
    <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span> <span class="p">).</span><span class="nx">show</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="err">// Simple &#39;hide&#39; function</span>
  <span class="nv">hide: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">// Remember where we started, so that we can go back to it later</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">orig</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nv">options.hide = </span><span class="kc">true</span><span class="p">;</span>

    <span class="err">// Begin the animation</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">cur</span><span class="p">(),</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="err">// Each step of an animation</span>
  <span class="nv">step: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">complete</span><span class="p">,</span>
      <span class="nv">t = </span><span class="nx">fxNow</span> <span class="o">||</span> <span class="nx">createFxNow</span><span class="p">(),</span>
      <span class="nv">done = </span><span class="kc">true</span><span class="p">,</span>
      <span class="nv">elem = </span><span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span>
      <span class="nv">options = </span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">gotoEnd</span> <span class="o">||</span> <span class="nx">t</span> <span class="o">&gt;=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">now = </span><span class="k">this</span><span class="p">.</span><span class="nx">end</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nv">pos = </span><span class="k">this</span><span class="p">.</span><span class="nv">state = </span><span class="mi">1</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>

      <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="nx">p</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nv">done = </span><span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">done</span> <span class="p">)</span> <span class="p">{</span>
        <span class="err">// Reset the overflow</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">shrinkWrapBlocks</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="s2">&quot;overflow&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">overflow</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
          <span class="p">});</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ Hide the element if the &quot;hide&quot; operation was done</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">hide</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ Reset the properties, if the item has been hidden or shown</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">hide</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">show</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">orig</span><span class="p">[</span> <span class="nx">p</span> <span class="p">]</span> <span class="p">);</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
            <span class="err">// Toggle data is no longer needed</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;toggle&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="o">/</span><span class="err">/ Execute the complete function</span>
        <span class="o">/</span><span class="err">/ in the event that the complete function throws an exception</span>
        <span class="o">/</span><span class="err">/ we must ensure it won&#39;t be called twice. #5684</span>

        <span class="nv">complete = </span><span class="nx">options</span><span class="p">.</span><span class="nx">complete</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">complete</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nv">options.complete = </span><span class="kc">false</span><span class="p">;</span>
          <span class="nx">complete</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="err">// classical easing cannot be used with an Infinity duration</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">==</span> <span class="kc">Infinity</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">now = </span><span class="nx">t</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">n = </span><span class="nx">t</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">state = </span><span class="nx">n</span> <span class="err">/ options.duration;</span>

        <span class="o">/</span><span class="err">/ Perform the easing function, defaults to swing</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">pos = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span><span class="p">]</span> <span class="p">](</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nv">now = </span><span class="k">this</span><span class="p">.</span><span class="nx">start</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">end</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="o">/</span><span class="err">/ Perform the next step of the animation</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">,</span> <span class="p">{</span>
  <span class="nv">tick: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">timer</span><span class="p">,</span>
      <span class="nv">timers = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span>
      <span class="nv">i = </span><span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">timer = </span><span class="nx">timers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
      <span class="err">// Checks the timer has not already been removed</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timer</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">timer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timers</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nv">interval: </span><span class="mi">13</span><span class="p">,</span>

  <span class="nv">stop: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">clearInterval</span><span class="p">(</span> <span class="nx">timerId</span> <span class="p">);</span>
    <span class="nv">timerId = </span><span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nv">speeds: </span><span class="p">{</span>
    <span class="nv">slow: </span><span class="mi">600</span><span class="p">,</span>
    <span class="nv">fast: </span><span class="mi">200</span><span class="p">,</span>
    <span class="err">// Default speed</span>
    <span class="nv">_default: </span><span class="mi">400</span>
  <span class="p">},</span>

  <span class="nv">step: </span><span class="p">{</span>
    <span class="nv">opacity: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fx</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nv">_default: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">fx</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span> <span class="o">+</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">unit</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="err">// Adds width/height step functions</span>
<span class="o">/</span><span class="err">/ Do not set anything below 0</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">fx</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span><span class="p">)</span> <span class="o">+</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">unit</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.expr.filters.animated = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
    <span class="p">}).</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="o">/</span><span class="err">/ Try to restore the default display value of an element</span>
<span class="nx">function</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="nx">nodeName</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">var</span> <span class="nv">body = </span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
      <span class="nv">elem = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="nx">nodeName</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span> <span class="nx">body</span> <span class="p">),</span>
      <span class="nv">display = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>

    <span class="err">// If the simple way fails,</span>
    <span class="o">/</span><span class="err">/ get element&#39;s real default display by attaching it to a temp iframe</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">||</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// No iframe to use yet, so create it</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">iframe</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">iframe = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;iframe&quot;</span> <span class="p">);</span>
        <span class="nv">iframe.frameBorder = iframe.width = iframe.height = </span><span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">iframe</span> <span class="p">);</span>

      <span class="err">// Create a cacheable copy of the iframe document on first call.</span>
      <span class="o">/</span><span class="err">/ IE and Opera will allow us to reuse the iframeDoc without re-writing the fake HTML</span>
      <span class="o">/</span><span class="err">/ document to it; WebKit &amp; Firefox won&#39;t allow reusing the iframe document.</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">iframeDoc</span> <span class="o">||</span> <span class="o">!</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">createElement</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">iframeDoc = </span><span class="p">(</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span> <span class="o">||</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">contentDocument</span> <span class="p">).</span><span class="nb">document</span><span class="p">;</span>
        <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">===</span> <span class="s2">&quot;CSS1Compat&quot;</span> <span class="o">?</span> <span class="s2">&quot;&lt;!doctype html&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;html&gt;&lt;body&gt;&quot;</span> <span class="p">);</span>
        <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="nv">elem = </span><span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">nodeName</span> <span class="p">);</span>

      <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

      <span class="nv">display = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>
      <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">iframe</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Store the correct default display</span>
    <span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">display</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">];</span>
<span class="p">}</span>




<span class="nx">var</span> <span class="nv">rtable = </span><span class="sr">/^t(?:able|d|h)$/i</span><span class="p">,</span>
  <span class="nv">rroot = </span><span class="sr">/^(?:body|html)$/i</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;getBoundingClientRect&quot;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nv">jQuery.fn.offset = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">box</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">setOffset</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">bodyOffset</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="nv">box = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>

    <span class="nx">var</span> <span class="nv">doc = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span>
      <span class="nv">docElem = </span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

    <span class="err">// Make sure we&#39;re not dealing with a disconnected DOM node</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">box</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">box</span> <span class="o">?</span> <span class="p">{</span> <span class="nv">top: </span><span class="nx">box</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span> <span class="nv">left: </span><span class="nx">box</span><span class="p">.</span><span class="nx">left</span> <span class="p">}</span> <span class="o">:</span> <span class="p">{</span> <span class="nv">top: </span><span class="mi">0</span><span class="p">,</span> <span class="nv">left: </span><span class="mi">0</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">body = </span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
      <span class="nv">win = </span><span class="nx">getWindow</span><span class="p">(</span><span class="nx">doc</span><span class="p">),</span>
      <span class="nv">clientTop  = </span><span class="nx">docElem</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nv">clientLeft = </span><span class="nx">docElem</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nv">scrollTop  = </span><span class="nx">win</span><span class="p">.</span><span class="nx">pageYOffset</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">&amp;&amp;</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span>
      <span class="nv">scrollLeft = </span><span class="nx">win</span><span class="p">.</span><span class="nx">pageXOffset</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">&amp;&amp;</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span>
      <span class="nv">top  = </span><span class="nx">box</span><span class="p">.</span><span class="nx">top</span>  <span class="o">+</span> <span class="nx">scrollTop</span>  <span class="o">-</span> <span class="nx">clientTop</span><span class="p">,</span>
      <span class="nv">left = </span><span class="nx">box</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">scrollLeft</span> <span class="o">-</span> <span class="nx">clientLeft</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nv">top: </span><span class="nx">top</span><span class="p">,</span> <span class="nv">left: </span><span class="nx">left</span> <span class="p">};</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nv">jQuery.fn.offset = </span><span class="nx">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">setOffset</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">bodyOffset</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nx">computedStyle</span><span class="p">,</span>
      <span class="nv">offsetParent = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">,</span>
      <span class="nv">prevOffsetParent = </span><span class="nx">elem</span><span class="p">,</span>
      <span class="nv">doc = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span>
      <span class="nv">docElem = </span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
      <span class="nv">body = </span><span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
      <span class="nv">defaultView = </span><span class="nx">doc</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">,</span>
      <span class="nv">prevComputedStyle = </span><span class="nx">defaultView</span> <span class="o">?</span> <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">,</span>
      <span class="nv">top = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">,</span>
      <span class="nv">left = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nv">elem = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span> <span class="o">!==</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span> <span class="o">!==</span> <span class="nx">docElem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">fixedPosition</span> <span class="o">&amp;&amp;</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nv">computedStyle = </span><span class="nx">defaultView</span> <span class="o">?</span> <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">;</span>
      <span class="nx">top</span>  <span class="o">-=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
      <span class="nx">left</span> <span class="o">-=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">offsetParent</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">top</span>  <span class="o">+=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
        <span class="nx">left</span> <span class="o">+=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">doesNotAddBorder</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">doesAddBorderForTableAndCells</span> <span class="o">&amp;&amp;</span> <span class="nx">rtable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderTopWidth</span>  <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderLeftWidth</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nv">prevOffsetParent = </span><span class="nx">offsetParent</span><span class="p">;</span>
        <span class="nv">offsetParent = </span><span class="nx">elem</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">subtractsBorderForOverflowNotVisible</span> <span class="o">&amp;&amp;</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">!==</span> <span class="s2">&quot;visible&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderTopWidth</span>  <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderLeftWidth</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nv">prevComputedStyle = </span><span class="nx">computedStyle</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;relative&quot;</span> <span class="o">||</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span>  <span class="o">+=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
      <span class="nx">left</span> <span class="o">+=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">fixedPosition</span> <span class="o">&amp;&amp;</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="p">);</span>
      <span class="nx">left</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nv">top: </span><span class="nx">top</span><span class="p">,</span> <span class="nv">left: </span><span class="nx">left</span> <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nv">jQuery.offset = </span><span class="p">{</span>

  <span class="nv">bodyOffset: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">top = </span><span class="nx">body</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">,</span>
      <span class="nv">left = </span><span class="nx">body</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">doesNotIncludeMarginInBodyOffset</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nv">top: </span><span class="nx">top</span><span class="p">,</span> <span class="nv">left: </span><span class="nx">left</span> <span class="p">};</span>
  <span class="p">},</span>

  <span class="nv">setOffset: </span><span class="nx">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">position = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span> <span class="p">);</span>

    <span class="err">// set position first, in-case top/left are set even on static elem</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">elem.style.position = </span><span class="s2">&quot;relative&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">curElem = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
      <span class="nv">curOffset = </span><span class="nx">curElem</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
      <span class="nv">curCSSTop = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;top&quot;</span> <span class="p">),</span>
      <span class="nv">curCSSLeft = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span> <span class="p">),</span>
      <span class="nv">calculatePosition = </span><span class="p">(</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;absolute&quot;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">curCSSTop</span><span class="p">,</span> <span class="nx">curCSSLeft</span><span class="p">])</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="nv">props = </span><span class="p">{},</span> <span class="nv">curPosition = </span><span class="p">{},</span> <span class="nx">curTop</span><span class="p">,</span> <span class="nx">curLeft</span><span class="p">;</span>

    <span class="err">// need to be able to calculate position if either top or left is auto and position is either absolute or fixed</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">calculatePosition</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">curPosition = </span><span class="nx">curElem</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
      <span class="nv">curTop = </span><span class="nx">curPosition</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span>
      <span class="nv">curLeft = </span><span class="nx">curPosition</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">curTop = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">curCSSTop</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nv">curLeft = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">curCSSLeft</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">options = </span><span class="nx">options</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">curOffset</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">props.top = </span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">curOffset</span><span class="p">.</span><span class="nx">top</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">curTop</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">props.left = </span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">curOffset</span><span class="p">.</span><span class="nx">left</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">curLeft</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;using&quot;</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">using</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">curElem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">props</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nv">position: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>

    <span class="err">// Get *real* offsetParent</span>
    <span class="nv">offsetParent = </span><span class="k">this</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">(),</span>

    <span class="err">// Get correct offsets</span>
    <span class="nv">offset       = </span><span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
    <span class="nv">parentOffset = </span><span class="nx">rroot</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeName</span><span class="p">)</span> <span class="o">?</span> <span class="p">{</span> <span class="nv">top: </span><span class="mi">0</span><span class="p">,</span> <span class="nv">left: </span><span class="mi">0</span> <span class="p">}</span> <span class="o">:</span> <span class="nx">offsetParent</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>

    <span class="err">// Subtract element margins</span>
    <span class="o">/</span><span class="err">/ note: when an element has margin: auto the offsetLeft and marginLeft</span>
    <span class="o">/</span><span class="err">/ are the same in Safari causing offset.left to incorrectly be 0</span>
    <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

    <span class="err">// Add offsetParent borders</span>
    <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;borderTopWidth&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;borderLeftWidth&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

    <span class="err">// Subtract the two offsets</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nv">top: </span> <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">-</span> <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span>
      <span class="nv">left: </span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">left</span>
    <span class="p">};</span>
  <span class="p">},</span>

  <span class="nv">offsetParent: </span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">offsetParent = </span><span class="k">this</span><span class="p">.</span><span class="nx">offsetParent</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">offsetParent</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">rroot</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">offsetParent = </span><span class="nx">offsetParent</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">offsetParent</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="err">// Create scrollLeft and scrollTop methods</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span><span class="s2">&quot;Left&quot;</span><span class="p">,</span> <span class="s2">&quot;Top&quot;</span><span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">var</span> <span class="nv">method = </span><span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">win</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nv">win = </span><span class="nx">getWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

      <span class="err">// Return the scroll offset</span>
      <span class="k">return</span> <span class="nx">win</span> <span class="o">?</span> <span class="p">(</span><span class="s2">&quot;pageXOffset&quot;</span> <span class="k">in</span> <span class="nx">win</span><span class="p">)</span> <span class="o">?</span> <span class="nx">win</span><span class="p">[</span> <span class="nx">i</span> <span class="o">?</span> <span class="s2">&quot;pageYOffset&quot;</span> <span class="o">:</span> <span class="s2">&quot;pageXOffset&quot;</span> <span class="p">]</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">&amp;&amp;</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">||</span>
          <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">:</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">method</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="o">/</span><span class="err">/ Set the scroll offset</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nv">win = </span><span class="nx">getWindow</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">win</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">win</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span>
          <span class="o">!</span><span class="nx">i</span> <span class="o">?</span> <span class="nv">val : </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">win</span> <span class="p">).</span><span class="nx">scrollLeft</span><span class="p">(),</span>
           <span class="nx">i</span> <span class="o">?</span> <span class="nv">val : </span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">win</span> <span class="p">).</span><span class="nx">scrollTop</span><span class="p">()</span>
        <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">function</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">?</span>
    <span class="nv">elem :</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="nv">elem.parentWindow :</span>
      <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>




<span class="o">/</span><span class="err">/ Create width, height, innerHeight, innerWidth, outerHeight and outerWidth methods</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;Height&quot;</span><span class="p">,</span> <span class="s2">&quot;Width&quot;</span> <span class="p">],</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">var</span> <span class="nv">type = </span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

  <span class="err">// innerHeight and innerWidth</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="s2">&quot;inner&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">elem</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">?</span>
      <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]()</span> <span class="o">:</span>
      <span class="kc">null</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="err">// outerHeight and outerWidth</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="s2">&quot;outer&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">margin</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">elem</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">?</span>
      <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">margin</span> <span class="o">?</span> <span class="s2">&quot;margin&quot;</span> <span class="o">:</span> <span class="s2">&quot;border&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]()</span> <span class="o">:</span>
      <span class="kc">null</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">function</span><span class="p">(</span> <span class="nx">size</span> <span class="p">)</span> <span class="p">{</span>
    <span class="err">// Get window width or height</span>
    <span class="nx">var</span> <span class="nv">elem = </span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">size</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">size</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">var</span> <span class="nv">self = </span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
        <span class="nx">self</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">size</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]()</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Everyone else use document.documentElement or document.body depending on Quirks vs Standards mode</span>
      <span class="o">/</span><span class="err">/ 3rd condition allows Nokia support, as it supports the docElem prop but not CSS1Compat</span>
      <span class="nx">var</span> <span class="nv">docElemProp = </span><span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span> <span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">],</span>
        <span class="nv">body = </span><span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">===</span> <span class="s2">&quot;CSS1Compat&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">docElemProp</span> <span class="o">||</span>
        <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">[</span> <span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">docElemProp</span><span class="p">;</span>

    <span class="err">// Get document width or height</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
      <span class="err">// Either scroll[Width/Height] or offset[Width/Height], whichever is greater</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">]</span>
      <span class="p">);</span>

    <span class="err">// Get or set width or height on the element</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">size</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">var</span> <span class="nv">orig = </span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">),</span>
        <span class="nv">ret = </span><span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">orig</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isNumeric</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">ret : </span><span class="nx">orig</span><span class="p">;</span>

    <span class="err">// Set the width or height on the element (default to pixels if value is unitless)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">size</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nv">size : </span><span class="nx">size</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="p">});</span>




<span class="err">// Expose jQuery to the global object</span>
<span class="nb">window</span><span class="p">.</span><span class="nv">jQuery = </span><span class="nb">window</span><span class="p">.</span><span class="nv">$ = </span><span class="nx">jQuery</span><span class="p">;</span>

<span class="err">// Expose jQuery as an AMD module, but only for AMD loaders that</span>
<span class="o">/</span><span class="err">/ understand the issues with loading multiple versions of jQuery</span>
<span class="o">/</span><span class="err">/ in a page that all might call define(). The loader will indicate</span>
<span class="o">/</span><span class="err">/ they have special allowances for multiple jQuery versions by</span>
<span class="o">/</span><span class="err">/ specifying define.amd.jQuery = true. Register as a named module,</span>
<span class="o">/</span><span class="err">/ since jQuery can be concatenated with other files that may use define,</span>
<span class="o">/</span><span class="err">/ but not use a proper concatenation script that understands anonymous</span>
<span class="o">/</span><span class="err">/ AMD modules. A named AMD is safest and most robust way to register.</span>
<span class="o">/</span><span class="err">/ Lowercase jquery is used because AMD module names are derived from</span>
<span class="o">/</span><span class="err">/ file names, and jQuery is normally delivered in a lowercase file name.</span>
<span class="o">/</span><span class="err">/ Do this after creating the global so that if an AMD module wants to call</span>
<span class="o">/</span><span class="err">/ noConflict to hide this version of jQuery, it will work.</span>
<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">.</span><span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">define</span><span class="p">(</span> <span class="s2">&quot;jquery&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="nx">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span> <span class="p">}</span> <span class="p">);</span>
<span class="p">}</span>



<span class="p">})(</span> <span class="nb">window</span> <span class="p">);</span></div></div></div></body></html>